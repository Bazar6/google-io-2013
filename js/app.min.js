var g=!0,h=null,l=!1;function aa(){return function(){}}var m;function n(a){var b=p;function c(){}c.prototype=b.prototype;a.d=b.prototype;a.prototype=new c};var ba=-1<window.location.href.indexOf("test");function ca(){var a,b,c,d=[];do a=2*Math.random()-1,b=2*Math.random()-1,c=a*a+b*b;while(1<=c);c=Math.sqrt(-1*Math.log(c)/c);d[0]=a*c;d[1]=b*c;return d}function da(){return window.performance&&window.performance.now?window.performance.now():+new Date}function ea(a,b){for(var c=""+a;c.length<b;)c="0"+c;return c}function fa(a,b,c){"undefined"!==typeof ga&&ga("send","event",a,b,h,c)}
function ha(a){function b(){j=da();e=h;f=a.apply(c,d)}var c,d,e,f,j=0;return function(){var k=da(),s=50-(k-j);c=this;d=arguments;0>=s?(clearTimeout(e),e=h,j=k,f=a.apply(c,d)):e||(e=setTimeout(b,s));return f}}function ia(){return"undefined"!==typeof AudioContext?AudioContext:"undefined"!==typeof webkitAudioContext?webkitAudioContext:h}
function r(a,b){var c=[],d,e;"up"===a?(d="touchend",e="mouseup"):"move"===a?(d="touchmove",e="mousemove"):"down"===a&&(d="touchstart",e="mousedown");var f=navigator.userAgent.match(/(Windows)/i)?g:l,j=navigator.userAgent.match(/(Touch)/i)?g:l;f?((Modernizr.touch||j)&&c.push(d+"."+b),c.push(e+"."+b)):Modernizr.touch?c.push(d+"."+b):c.push(e+"."+b);return c.join(" ")}
for(var ja=0,ka=["ms","moz","webkit","o"],la=0;la<ka.length&&!window.requestAnimationFrame;++la)window.requestAnimationFrame=window[ka[la]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[ka[la]+"CancelAnimationFrame"]||window[ka[la]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-ja)),d=window.setTimeout(function(){a(b+c)},c);ja=b+c;return d});
window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});var t={},ma=l,na=0,oa=h;function pa(a){a=a||da();var b=a-na,c;for(c in t)if(t.hasOwnProperty(c)){var d=t[c];d[1].call(d[0],b)}na=a;ma&&(oa=requestAnimationFrame(pa))}function qa(){var a=0,b;for(b in t)t.hasOwnProperty(b)&&a++;0<a?ma||(ma=g,na=da(),requestAnimationFrame(pa)):(ma=l,oa&&(cancelAnimationFrame(oa),oa=h))};function p(a,b,c,d,e,f,j){this.ka=Modernizr.prefixed("transform");this.ic=b||"";this.w=a;this.l=c;this.hasFocus=l;a=ia();if(this.J=d&&a||l)this.ta=ra=ra||new a;this.Ic=e||l;this.Jc=f||l;this.fc=this.hd=j&&1<window.devicePixelRatio||l;this.sd=this.Ic||this.Jc||l;this.fe=[];this.Da=$(window);this.f=this.e=0;this.ud=this.find(".bounds");this.r=this.find(".letter-i");this.Y=this.find(".letter-o");var k=this;setTimeout(function(){function a(){k.log("Preload complete");k.o();k.D(g);var b=u[k.l];b.pattern&&
(k.mb=$('<div class="back"></div>'),k.mb.prependTo(k.w),b=ea(b.pattern.toString(2),b.xb).replace(/1/g,'<span class="i"></span>').replace(/0/g,'<span class="o"></span>'),$('<div class="code">'+b+"</div>").prependTo(k.w));sa(k);if(window.onModeReady)window.onModeReady(k);k.log("Is ready");ta(k.l+".ready")}k.log("Starting preload");if(k.J){var b=0,c;for(c in k.Za)k.Za.hasOwnProperty(c)&&b++;if(0>=b)a();else for(c in k.Za)k.Za.hasOwnProperty(c)&&function(c){function d(){b--;delete k.Za[e];0===b&&a()}
var e=k.ic+"sounds/"+k.l+"/"+c;k.log('Requested sound "'+e+'"');k.Ba=k.Ba||{};d=d||aa();if(k.Ba[e])d(k.Ba[e]);else{var f=new XMLHttpRequest;f.open("GET",e,g);f.responseType="arraybuffer";f.onload=function(){k.ta.decodeAudioData(f.response,function(a){k.Ba[e]=a;d(k.Ba[e])})};f.send()}}(c)}else a()},10)}var ra;m=p.prototype;m.find=function(a){return $(this.w).find(a)};m.log=aa();
m.o=function(){this.log("Init");this.Dd=g;this.Jc&&(this.Wa&&this.Wa.destroy&&this.Wa.destroy(),this.Wa=h);this.k&&(paper=this.Cb)};function v(a,b,c,d){b=$(b);a=r(c,a.l);b.bind(a,d)}function w(a,b,c){b=$(b);a=r(c,a.l);b.unbind(a)}function ua(a,b,c){a.$||(a.$=$(a.w).find(".reload"),a.$.length||(a.$=$("<div class='reload'></div>").appendTo(a.w)));a.$.hide();var d=r("up","reload");a.$.bind(d,function(){c?a.$.fadeOut():a.$.hide();"function"===typeof b&&b()});c?a.$.fadeIn():a.$.show()}
m.D=function(a){this.e=$(this.w).width();this.f=$(this.w).height();this.hd&&(this.fc=!(1024<this.f||1024<this.e));var b=1;this.fc&&(1024===this.e&&(this.e-=2,this.f-=2),b=2);this.log("Resize "+this.e+"x"+this.f);this.e>this.f?(this.Kb=Math.min(375,this.f-60-20),this.C=this.Kb*(4/3)):(this.C=Math.min(500,this.e-60),this.Kb=0.75*this.C);this.vd=Math.floor(this.e/2);this.wd=Math.floor(this.f/2);this.bb=this.vd-Math.floor(this.C/2);this.cb=this.wd-Math.floor(this.Kb/2);this.ud.css({left:this.bb,top:this.cb,
width:this.C,height:this.Kb});this.k&&(paper=this.Cb,this.k.width=this.e*b,this.k.height=this.f*b,paper.view.setViewSize(this.e*b,this.f*b),$(this.k).css({width:this.e,height:this.f}));a&&y(this)};m.Nd=function(a){this.kb+=a;a*=0.0010;0.5<a&&(a=0.016);this.Jc&&this.la(a);TWEEN.update(this.kb);this.Ic&&this.H(a);this.pc++};function y(a){a.Ic&&a.H(0)}
m.H=function(){if(this.k&&0<this.k.width&&0<this.k.height){var a=1;this.fc&&(a=2);paper=this.Cb;var b=this.k.getContext("2d");b.save();b.scale(a,a);paper.view.draw();b.restore()}};m.postMessage=function(a){this.log("Got message: "+a.name,a);"focus"===a.name?sa(this):"unfocus"===a.name&&this.hasFocus&&(this.log("Lost focus"),this.hasFocus=l,this.sd&&(delete t[this.l],qa()),this.A())};function ta(a,b){window.app&&window.app.postMessage&&window.app.postMessage({name:a,data:b})}
m.Ca=function(a,b){fa("mode-"+this.Zd,a,b)};function sa(a){a.hasFocus||(a.k&&(paper=a.Cb),a.Dd&&a.o(),a.Kc(),a.log("Got focus"),a.hasFocus=g,a.sd&&(a.pc=0,a.kb=0,t[a.l]=[a,a.Nd],qa()),a.u())}m.Kc=aa();
m.u=function(){var a=this,b=r("up",this.l);this.r.bind(b,function(){a.q()});this.Y.bind(b,function(){a.p()});this.mb&&this.mb.bind(b,function(){ta("goToHome")});$(document).bind("keyup."+this.l,function(b){if(105===b.keyCode||49===b.keyCode||73===b.keyCode)a.q();else if(111===b.keyCode||48===b.keyCode||79===b.keyCode)a.p();else if(27===b.keyCode)ta("goToHome");else return;b.preventDefault();b.stopPropagation();return l})};
m.A=function(){var a=r("up",this.l);this.r.unbind(a);this.Y.unbind(a);this.mb&&this.mb.unbind(a);this.$&&(this.$.hide(),this.$.unbind(r("up","reload")));$(document).unbind("keyup."+this.l)};function va(a,b){a.Ba=a.Ba||{};if(a.Ba[b])return a.Ba[b]}function z(a){if(a.Wa)return a.Wa;a.Wa=new Physics(void 0);return a.Wa}
m.la=function(a){if(0<a){var b=z(this);b.integrate(a);if(this.k)for(a=0;a<b.particles.length;a++){var c=b.particles[a];"undefined"!==typeof c.drawObj&&c.drawObj.position&&(c.drawObj.position.x=c.pos.x,c.drawObj.position.y=c.pos.y)}}};function B(a,b){a.Za=a.Za||{};a.Za[b]=g}
m.n=function(a,b,c){if(this.J){var d=this.ic+"sounds/"+this.l+"/"+a;this.log('Playing sound "'+a+'"');a=this.ta;var d=va(this,d),e=a.createBufferSource(),f=a.createGainNode();f.gain.value=0.1;e.buffer=d;e.loop=c||l;e.connect(f);f.connect(a.destination);e.noteOn(0);"function"===typeof b&&b(e)}};m.q=function(){this.log('Activated "I"');this.Ca("activated-i")};m.p=function(){this.log('Activated "O"');this.Ca("activated-o")};
function xa(a,b){if(!a.k){a.k=document.createElement("canvas");var c=1;a.fc&&(c=2);a.k.width=a.e*c;a.k.height=a.f*c;$(a.k).css({width:a.e,height:a.f});$(a.w).prepend(a.k);paper=new paper.PaperScope;paper.setup(a.k);a.Cb=paper;b&&$(a.k).remove()}}function C(a,b){b.start(a.kb)}function F(a){var b=[{x:0,y:0}];a.originalEvent.changedTouches?(b.x=a.originalEvent.changedTouches[0].pageX,b.y=a.originalEvent.changedTouches[0].pageY):(b.x=a.pageX,b.y=a.pageY);return b}
function ya(a){a.s=0.2*a.C;a.M=0.43058824*a.C;a.ha=a.bb+0.10352941*a.C;a.ia=a.cb+0.16*a.C;a.ba=new paper.Point(a.ha+a.s/2,a.ia+a.M/2);a.g=0.22588235*a.C;a.Ta=a.bb+0.69647059*a.C;a.za=a.cb+0.37411765*a.C;a.v=new paper.Point(a.Ta,a.za);a.md=a.bb+0.50352941*a.C;a.nd=a.cb+0.06823529*a.C;a.kd=a.bb+0.32*a.C;a.ld=a.cb+0.68705882*a.C;a.od=0.02212389*a.C;a.find(".year-mark")&&a.find(".year-mark").css({left:a.bb+0.85411765*a.C,top:a.cb+0.08705882*a.C})};function G(a,b){p.call(this,a,b,"metaball",g,g,g);this.cd=[{frequency:0,detune:0,type:0},{frequency:0,detune:0,type:0},{frequency:0,detune:0,type:0}]}n(G);m=G.prototype;m.K=function(){this.m.beginPath();this.m.fillRect(this.ha,this.ia,this.s,this.M);this.m.stroke()};function H(a,b){return new paper.Point({angle:180*a/Math.PI,length:b})}
m.o=function(){G.d.o.call(this);ya(this);this.pd=[];this.Cd=[];xa(this,g);this.a=z(this);this.a.viscosity=0;this.a.particles.push(new Particle);this.$a=this.a.particles.length;this.a.particles[0].radius=this.g;if(this.j)for(var a=0;a<this.j.length;a++)this.j[a].remove();this.sb&&this.sb.remove();this.j=[];this.j.push(new paper.Path.Circle(this.v,this.g));this.Rc=["rgba(210, 59, 48,","rgba(67, 134, 251,","rgba(249, 188, 71,","rgba(17, 168, 96,"];this.a.particles[0].color=this.Rc[0];this.Eb=this.e/
2;this.Ya=this.f/2;this.W=[];this.N=[];paper.view.setViewSize(this.e,this.f)};
m.u=function(){G.d.u.call(this);this.t=$("#metaball-canvas");this.i=this.t[0];this.i.width=this.e;this.i.height=this.f;this.m=this.i.getContext("2d");this.cc=this.k.getContext("2d");this.ea=document.createElement("canvas");this.ea.width=this.e;this.ea.height=this.f;this.Oa=this.ea.getContext("2d");this.$a=1;var a=this,b=r("down",this.l);this.t.bind(b,function(b){a.W=F(b).x;a.N=F(b).y;for(var d,e=0;e<a.$a;e++)if(a.a.particles[e].fixed&&(a.a.particles[e].fixed=l),Math.abs(a.W-a.a.particles[e].pos.x)<
a.a.particles[e].radius&&Math.abs(a.N-a.a.particles[e].pos.y)<a.a.particles[e].radius)if(d=a.a.particles[e],d===a.a.particles[0]&&4>a.$a){a.a.particles.push(new Particle);a.j.push(new paper.Path.Circle(a.v,a.g/2));d=a.a.particles[a.a.particles.length-1];var f=new Attraction(a.a.particles[0].pos);d.behaviours.push(f);d.pos.x=a.W;d.pos.y=a.N;d.mass=254*Math.random()+1;d.color=a.Rc[a.$a];d.fixed=g;a.$a=a.a.particles.length}else d!=a.a.particles[0]&&(d.fixed=g,d.vel.x=0,d.vel.y=0);var j=r("move",a.l);
a.t.bind(j,function(b){a.W=F(b).x;a.N=F(b).y;d&&d.fixed===g&&(d.pos.x=a.W,d.pos.y=a.N)});var k=r("up",a.l);a.t.bind(k,function(){d&&(d.fixed=l);a.t.unbind(k);a.t.unbind(j)});b.preventDefault();b.stopPropagation()})};m.A=function(){G.d.A.call(this);var a=r("down",this.l);this.t.unbind(a);if(this.J)for(a=0;a<this.pd.length;a++)this.pd[a].disconnect(),this.Cd[a].disconnect()};
m.D=function(){G.d.D.call(this,l);this.i&&(this.i.width=this.e,this.i.height=this.f);this.ea&&(this.ea.width=this.e,this.ea.height=this.f);ya(this);this.a.particles[0].radius=this.g;this.j[0].remove();this.j[0]=new paper.Path.Circle(this.v,this.g);if(1<this.j.length)for(var a=1;a<this.j.length;a++)this.j[a].remove(),this.j[a]=new paper.Path.Circle(this.v,this.g/2);this.na=4*this.g;y(this)};
m.la=function(a){G.d.la.call(this,a);this.a.particles[0].pos.x=this.Ta;this.a.particles[0].pos.y=this.za;for(a=0;a<this.a.particles.length;a++)this.a.particles[a].fixed===g&&(this.a.particles[a].pos.x=this.W,this.a.particles[a].pos.y=this.N,this.j[a].position.x=this.W,this.j[a].position.y=this.N),this.a.particles[a].pos.x>this.e-this.a.particles[a].radius?(this.a.particles[a].vel.x*=-1,this.a.particles[a].pos.x=this.e-(this.a.particles[a].radius+1)):this.a.particles[a].pos.x<this.a.particles[a].radius&&
(this.a.particles[a].vel.x*=-1,this.a.particles[a].pos.x=this.a.particles[a].radius+1),this.a.particles[a].pos.y>this.f-this.a.particles[a].radius?(this.a.particles[a].vel.y*=-1,this.a.particles[a].pos.y=this.f-(this.a.particles[a].radius+1)):this.a.particles[a].pos.y<this.a.particles[a].radius&&(this.a.particles[a].vel.y*=-1,this.a.particles[a].pos.y=this.a.particles[a].radius+1),this.a.particles[a]!=this.a.particles[0]&&(this.cd[a-1].frequency=this.a.particles[0].pos.x-this.a.particles[a].pos.x,
this.cd[a-1].detune=this.a.particles[0].pos.y-this.a.particles[a].pos.y);for(a=0;a<this.j.length;a++)this.j[a]&&this.a.particles[a]&&(this.j[a].position.x=this.a.particles[a].pos.x,this.j[a].position.y=this.a.particles[a].pos.y,this.j[a].fillColor=!$("#mask-check")[0].checked&&!$("#gradient-check")[0].checked?"black":"white");if(1<this.j.length){a=this.j;this.sb&&this.sb.remove();this.sb=new paper.Group;for(var b,c=Math.round(0.7*Math.max(this.Eb,this.Ya)),d=0;d<a.length;d++)for(var e=d+1;e<a.length;e++){a:{var f=
a[d],j=a[e],k=c,s=f.position,D=j.position;b=f.bounds.width/2;var j=j.bounds.width/2,A=Math.PI/2,q=s.getDistance(D),x=void 0,E=void 0;if(!(0==b||0==j))if(!(q>k||q<=Math.abs(b-j))){q<b+j?(x=Math.acos((b*b+q*q-j*j)/(2*b*q)),E=Math.acos((j*j+q*q-b*b)/(2*j*q))):E=x=0;var N=D.subtract(s).getAngleInRadians(),O=Math.acos((b-j)/q),k=N+x+0.45*(O-x),x=N-x-0.45*(O-x),wa=N+Math.PI-E-0.45*(Math.PI-E-O),E=N-Math.PI+E+0.45*(Math.PI-E-O),N={x:s.x+H(k,b).x,y:s.y+H(k,b).y},s={x:s.x+H(x,b).x,y:s.y+H(x,b).y},O={x:D.x+
H(wa,j).x,y:D.y+H(wa,j).y},D={x:D.x+H(E,j).x,y:D.y+H(E,j).y},Y=N.x-O.x,Oa=N.y-O.y,Y=Math.min(1.08,Math.sqrt(Y*Y+Oa*Oa)/(b+j)),Y=Y*Math.min(1,2*q/(b+j));b*=Y;j*=Y;q=new paper.Path([N,O,D,s]);q.style=f.style;q.closed=g;f=q.segments;f[0].handleOut=H(k-A,b);f[1].handleIn=H(wa+A,j);f[2].handleOut=H(E-A,j);f[3].handleIn=H(x+A,b);b=q;break a}b=void 0}b&&this.sb.appendTop(b)}}};
m.H=function(a){G.d.H.call(this,a);if(this.i){this.m.clearRect(0,0,this.i.width+1,this.i.height+1);this.Oa.clearRect(0,0,this.ea.width+1,this.ea.height+1);this.m.fillStyle="#d9d9d9";this.K();for(a=0;a<this.$a;a++){var b=this.a.particles[a];b.radius=b!=this.a.particles[0]?this.g/2:this.g;this.Oa.save();this.na=4*b.radius;this.Oa.translate(b.pos.x-this.na,b.pos.y-this.na);var c=this.Oa.createRadialGradient(this.na,this.na,0,this.na,this.na,this.na);c.addColorStop(0,b.color+"1)");c.addColorStop(1,b.color+
"0)");this.Oa.fillStyle=c;this.Oa.fillRect(0,0,4*this.na,4*this.na);this.Oa.restore()}this.cc.save();$("#mask-check")[0].checked&&(this.cc.globalCompositeOperation="source-atop");0<this.ea.height&&$("#gradient-check")[0].checked&&this.cc.drawImage(this.ea,0,0);0<this.k.height&&($("#mask-check")[0].checked?this.m.drawImage(this.k,0,0):!$("#mask-check")[0].checked&&$("#gradient-check")[0].checked?this.m.drawImage(this.ea,0,0):this.m.drawImage(this.k,0,0));this.cc.restore()}};function I(a,b){B(this,"i.mp3");B(this,"o.mp3");B(this,"error.mp3");p.call(this,a,b,"eightbit",g,g,g,l);xa(this);this.Qb=this.Wc=1<window.devicePixelRatio;this.i=document.getElementById("eightbit-canvas")}n(I);m=I.prototype;m.q=function(){I.d.q.call(this);this.Ia(this.c,this.B,10);this.n("i.mp3")};m.p=function(){I.d.p.call(this);this.Ia(this.b,this.B,10);this.n("o.mp3")};
m.K=function(){this.c&&this.c.remove();var a=new paper.Point(this.ha,this.ia),b=new paper.Size(this.s,this.M),a=new paper.Rectangle(a,b);this.c=new paper.Path.Rectangle(a);this.c.closed=g;this.c.vectors=[];for(a=0;a<this.c.segments.length;a++)b=this.c.segments[a].point.clone(),b=b.subtract(this.ba),b.velocity=0,b.acceleration=5*Math.random()+10,b.bounce=0.1*Math.random()+1.05,this.c.vectors.push(b)};
m.tb=function(){var a=new paper.Gradient([["#4487fc",0],["#826eb1",1]]),b=this.c.position.clone();b.x-=this.s/2;var c=this.c.position.clone();c.x+=this.s/2;a=new paper.GradientColor(a,b,c);this.c.fillColor=a};
m.L=function(){this.b&&this.b.remove();this.b=new paper.Path.RegularPolygon(this.v,6,this.g);this.b.smooth();this.b.vectors=[];for(var a=0;a<this.b.segments.length;a++){var b=this.b.segments[a].point.clone(),b=b.subtract(this.v);b.velocity=0;b.acceleration=5*Math.random()+10;b.bounce=0.1*Math.random()+1.05;this.b.vectors.push(b)}};
m.ub=function(){var a=new paper.Gradient([["#93689c",0],["#df4a40",1]]),b=this.b.position.clone();b.x-=this.g;var c=this.b.position.clone();c.x+=this.g;a=new paper.GradientColor(a,b,c);this.b.fillColor=a};m.o=function(){I.d.o.call(this);this.a=z(this);this.gd=$("#pixel")[0].value/100;this.B=new paper.Point(this.Ta,this.za);0<this.k.height&&(this.K(),this.L())};
m.u=function(){I.d.u.call(this);this.t=$(this.i);var a=$("#demo-wrapper"),b=this,c=r("down",this.l);a.bind(c,function(a){a.preventDefault();a.stopPropagation();b.B=new paper.Point(F(a).x,F(a).y);b.B.getDistance(b.b.position)<0.75*b.g&&b.hasFocus&&b.p();Math.abs(b.B.x-b.c.position.x)<b.s/2&&Math.abs(b.B.y-b.c.position.y)<b.M/2&&b.hasFocus&&b.q()});c=r("move",this.l);a.bind(c,function(c){c.preventDefault();c.stopPropagation();c=new paper.Point(F(c).x,F(c).y);c.getDistance(b.b.position)<0.75*b.g||Math.abs(c.x-
b.c.position.x)<b.s/2&&Math.abs(c.y-b.c.position.y)<b.M/2?b.hasFocus&&(b.i.style.cursor="pointer",a[0].style.cursor="pointer"):(b.i.style.cursor="default",a[0].style.cursor="default")});$("#pan").bind("change",function(){$("#canvas-wrapper").css({width:b.e*($(this)[0].value/100)+"px"})});$("#pixel").bind("change",function(){b.gd=$(this)[0].value/100});$("#killscreen").bind("change",function(){$("body").toggleClass("kill-on");$(this)[0].checked&&b.n("error.mp3")})};
m.A=function(){I.d.A.call(this);w(this,$(this.k),"down");w(this,$(this.k),"move")};m.D=function(a){I.d.D.call(this,l);this.Wc&&(this.Qb=!($.browser.safari&&1024<this.e));ya(this);this.K();this.L();var b=1;this.Qb&&(b=2);this.i.width=this.e*b;this.i.height=this.f*b;$(this.i).css({width:this.e,height:this.f});$("#canvas-wrapper").css({width:this.e*($("#pan")[0].value/100)+"px"});a&&y(this)};
m.Ia=function(a,b,c){for(var d=0;d<a.vectors.length;d++){var e=a.vectors[d],f;a===this.b?(f=e.add(this.v),f=f.subtract(b),f=Math.max(0,this.g-f.length)):(f=e.add(this.ba),f=f.subtract(b),f=Math.max(0,this.s-f.length));e.length+=Math.max(4*f,100);e.velocity+=c;e.velocity=Math.min(5,e.velocity)}};
m.Ma=function(a){for(var b=0;b<a.segments.length;b++){var c=a.vectors[b],d=new paper.Point(this.ha,this.ia);c.velocity=a===this.b?((this.g-c.length)/c.acceleration+c.velocity)/c.bounce:((d.getDistance(this.ba)-c.length)/c.acceleration+c.velocity)/c.bounce;c.length=Math.max(0,c.length+c.velocity)}};m.La=function(a){for(var b=0;b<a.segments.length;b++){var c=a.vectors[b].clone();a===this.b?(this.b.segments[b].point=c.add(this.v),this.b.smooth()):this.c.segments[b].point=c.add(this.ba)}};
m.la=function(a){I.d.la.call(this,a);this.c&&this.b&&(this.tb(),this.ub(),this.Ma(this.c),this.La(this.c),this.Ma(this.b),this.La(this.b),this.Qb?(this.c.scale(0.65),this.b.scale(0.65)):(this.c.scale(0.55),this.b.scale(0.55)))};
m.H=function(a){I.d.H.call(this,a);var b=this.k,c=this.i;if(b.width&&!(1>b.width)&&b.height&&!(1>b.height)){var d=b.getContext("2d");a=c.getContext("2d");b=d.getImageData(0,0,b.width,b.height);a.clearRect(0,0,c.width+1,c.height+1);c=~~(0.0625*this.e);$("#killscreen")[0].checked&&(c/=8);d=Math.min(Math.round(80*c)/4,980);c*=this.gd;paper=this.Cb;var e=1;this.Qb&&(e=2);a.save();a.scale(e,e);for(i=0;i<b.data.length;i+=d)if(0!==b.data[i+3]){var f=Math.ceil(i/4),e=f%this.e,f=Math.floor(f/this.e);a.fillStyle=
"rgba("+b.data[i]+", "+b.data[i+1]+", "+b.data[i+2]+", 1)";a.fillRect(e-~~(c/2),f-~~(c/2),c,c)}a.restore()}};function za(a,b){B(this,"cat-1.mp3");B(this,"cat-2.mp3");p.call(this,a,b,"cat",g,g)}n(za);
za.prototype.q=function(){za.d.q.call(this);this.n("cat-1.mp3");var a=this,b=new TWEEN.Tween({scaleY:1});b.to({scaleY:1.55},200);b.easing(TWEEN.Easing.Bounce.InOut);b.onUpdate(function(){a.r[0].style[a.ka]="scaleY("+this.scaleY+")"});var c=new TWEEN.Tween({scaleY:1.55});c.to({scaleY:1},200);c.easing(TWEEN.Easing.Bounce.InOut);c.delay(200);c.onUpdate(function(){a.r[0].style[a.ka]="scaleY("+this.scaleY+")"});C(this,b);C(this,c)};
za.prototype.p=function(){za.d.p.call(this);this.n("cat-2.mp3");var a=this,b=[~~Random(-50,50),~~Random(-50,50)],c=new TWEEN.Tween({scale:1,x:0,y:0});c.to({scale:1.5,x:b[0],y:b[1]},200);c.easing(TWEEN.Easing.Bounce.InOut);c.onUpdate(function(){var b="translate("+this.x+"px, "+this.y+"px) ",b=b+("scale("+this.scale+")");a.Y[0].style[a.ka]=b});b=new TWEEN.Tween({scale:1.5,x:b[0],y:b[1]});b.to({scale:1,x:0,y:0},200);b.delay(200);b.easing(TWEEN.Easing.Bounce.InOut);b.onUpdate(function(){var b="translate("+
this.x+"px, "+this.y+"px) ",b=b+("scale("+this.scale+")");a.Y[0].style[a.ka]=b});C(this,c);C(this,b)};function J(a,b){B(this,"bacon-sizzle.mp3");B(this,"egg-cracked.mp3");B(this,"cracked-open.mp3");B(this,"eggs-sizzling.mp3");p.call(this,a,b,"bacon",g,g,l)}n(J);J.prototype.o=function(){J.d.o.call(this);this.qd=g;this.xd=$("#egg-whole").css("opacity",1)[0];this.Tc=$("[id*=crack-]").css("opacity",0);this.lc=0;this.Ud=this.Tc.length;this.Yd=$("#egg-whites");this.eb=$("#egg-cracked").css("opacity",0);this.Qc=this.eb.attr("cx")+", "+this.eb.attr("cy")};
J.prototype.q=function(){J.d.q.call(this);var a=this;this.n("bacon-sizzle.mp3");var b=new TWEEN.Tween({scaleY:1,translateY:0});b.to({scaleY:1.25,translateY:-20},700);b.easing(TWEEN.Easing.Elastic.In);b.onUpdate(function(){a.r.attr("transform","scale(1, "+this.scaleY+") translate(0, "+this.translateY+")")});var c=new TWEEN.Tween({scaleY:1.25,translateY:-20});c.to({scaleY:1,translateY:0},700);c.easing(TWEEN.Easing.Elastic.Out);c.delay(700);c.onUpdate(function(){a.r.attr("transform","scale(1, "+this.scaleY+
") translate(0, "+this.translateY+")")});C(this,b);C(this,c)};J.prototype.p=function(){J.d.p.call(this);if(this.lc<this.Ud)this.Tc[this.lc].style.opacity=1,this.lc++,this.n("egg-cracked.mp3");else if(this.qd){this.n("cracked-open.mp3");var a=this,b=new TWEEN.Tween({opacity:1});b.to({opacity:0},200);b.onUpdate(function(){a.xd.style.opacity=this.opacity});b.onComplete(function(){a.eb.css("opacity",1);a.qd=l;Aa(a)});this.eb.css("opacity",0);C(this,b)}else this.n("eggs-sizzling.mp3"),Aa(this)};
function Aa(a){var b=-1*~~(250*Math.random()+20),c=a.eb.attr("transform")||"",c=parseInt(c.split("rotate(")[1],10)||0,d=~~Random(-20,20),e=new TWEEN.Tween({rotate:c});e.to({rotate:(c+b/2)/window.devicePixelRatio},500);e.easing(TWEEN.Easing.Elastic.In);e.onUpdate(function(){a.Yd.attr("transform","rotate("+(this.rotate-d)+", "+a.Qc+")");a.eb.attr("transform","rotate("+this.rotate+", "+a.Qc+")")});C(a,e)};function K(a,b){p.call(this,a,b,"simone",g,g)}n(K);
K.prototype.o=function(){K.d.o.call(this);var a=this;TWEEN.removeAll();this.F=r("down","simone");this.z=r("up","simone");this.Qd=Modernizr.touch?"Tap":"Click";this.Fb=$("#red");this.Gb=$("#green");this.nb=$("#blue");this.ob=$("#yellow");this.Ec=[this.Fb,this.Gb,this.nb,this.ob];this.Dc=$("#red, #green, #blue, #yellow").css("opacity",1);this.uc=$("#levels").removeClass().text("");this.Xa=$("#status").removeClass();this.Vd=$("#levels").css("opacity",0);this.Sc=$("#simone");this.message=$("#message").text(this.Qd+
" to play.");this.Sc.bind(this.z,function(){a.message.hide();Ba(a);a.Sc.unbind(a.z)});this.zc=0;this.gb=this.U=l;this.Xc=this.Pa=this.Ja=0;this.I=this.I||[];for(var b=0;4>b;b++)this.I.push(~~(4*Math.random()));this.log("generated sequence: "+this.I);this.total=this.I.length;this.J&&(b=this.ta,this.source=b.createOscillator(),this.S=b.createAnalyser(),this.S.fftSize=512,this.S.smoothingTimeConstant=0.85,this.wb=b.createGainNode(),this.wb.gain.value=0.01,this.bd=[{frequency:1806,detune:-3663,type:1},
{frequency:1806,detune:-4758,type:1},{frequency:229,detune:1053,type:1},{frequency:580,detune:-1137,type:2}])};K.prototype.u=function(){K.d.u.call(this);var a=this;a.Fb.bind(this.F,function(){Ca(a,0)});a.Fb.bind(this.z,function(){Da(a,0)});a.Gb.bind(this.F,function(){Ca(a,1)});a.Gb.bind(this.z,function(){Da(a,1)});a.nb.bind(this.F,function(){Ca(a,2)});a.nb.bind(this.z,function(){Da(a,2)});a.ob.bind(this.F,function(){Ca(a,3)});a.ob.bind(this.z,function(){Da(a,3)})};
K.prototype.A=function(){K.d.A.call(this);this.Fb.unbind(this.F);this.Gb.unbind(this.F);this.nb.unbind(this.F);this.ob.unbind(this.F);this.Fb.unbind(this.z);this.Gb.unbind(this.z);this.nb.unbind(this.z);this.ob.unbind(this.z)};
function Ca(a,b){if(a.U&&!a.gb){0===a.Ja&&a.Xa.removeClass("your-turn");var c=a.bd[b],d=a.Ec[b];a.J&&(a.log("Playing note: ",c),a.source.type=c.type,a.source.frequency.value=c.frequency,a.source.detune.value=c.detune);c=new TWEEN.Tween({opacity:0.5});c.to({opacity:1},100);if(a.J)c.onStart(function(){a.source.connect(a.S);a.S.connect(a.wb);a.wb.connect(a.ta.destination);a.source.noteOn(0)});c.onUpdate(function(){d.css("opacity",this.opacity)});C(a,c)}}
function Da(a,b){a.log("Guess ("+b+"). Expecting ("+a.I[a.Ja]+")");if(a.U&&!a.gb){var c=a.Ec[b],d=a.J?200:400,e=new TWEEN.Tween({opacity:1});e.to({opacity:0.5},d);e.onUpdate(function(){c.css("opacity",this.opacity)});if(a.J)e.onComplete(function(){a.source.disconnect()});else e.delay(200);C(a,e);a.gb=l;if(a.I[a.Ja]===b)if(a.Ja!==a.Pa)a.Ja++;else{a.Pa++;a.Xa.addClass("success");if(a.Pa===a.total){for(d=0;4>d;d++)a.I.push(~~(4*Math.random()));a.total+=4}a.Pa<a.total&&(a.Ja=0);Ea(a)}else a.U=l,a.Xa.addClass("game-over"),
a.Ca("failed",a.I.length),d=new TWEEN.Tween({opacity:0.5}),d.to({opacity:1},200),d.delay(500),d.onUpdate(function(){a.Dc.css("opacity",this.opacity)}),d.onComplete(function(){a.Xa.removeClass();ua(a,function(){Ba(a)},g)}),C(a,d)}}
function Ba(a){if(!a.U){a.zc++;a.U=g;a.gb=l;a.Ja=0;a.Xc=Math.max(a.Xc,a.Pa);a.Pa=0;for(var b=a.I.length,c,d;--b;)c=Math.random()*(b+1)|0,d=a.I[b],a.I[b]=a.I[c],a.I[c]=d;a.log("shuffled sequence: "+a.I);a.uc.removeClass().text("");a.Xa.removeClass();a.log("Playing sequence: "+a.I);a.Vd.animate({opacity:1},200);"0.5"!==a.Dc.css("opacity")&&(b=new TWEEN.Tween({opacity:1}),b.to({opacity:0.5},200),b.delay(200),b.onUpdate(function(){a.Dc.css("opacity",this.opacity)}),C(a,b));Ea(a)}}
function Ea(a){if(a.U){a.gb=g;for(var b,c,d=500,e=a.Pa+1,f=0;f<e;f++)b=a.I[f],c=a.Ec[b],d+=600,function(b,c,d,f){if(a.J)var A=a.bd[d];d=new TWEEN.Tween({opacity:0.5});d.to({opacity:1},200);d.delay(c);d.onStart(function(){0===f&&a.Xa.removeClass("success");a.J&&(a.log(f+" now playing: ",A),a.source.type=A.type,a.source.frequency.value=A.frequency,a.source.detune.value=A.detune,a.source.connect(a.S),a.S.connect(a.wb),a.wb.connect(a.ta.destination),a.source.noteOn(0))});d.onUpdate(function(){b[0].style.opacity=
this.opacity});var q=new TWEEN.Tween({opacity:1});q.to({opacity:0.5},200);q.delay(c+300);q.onUpdate(function(){b[0].style.opacity=this.opacity});q.onComplete(function(){f===e-1&&(a.gb=l,a.uc.text(e),a.Xa.addClass("your-turn"));a.J&&a.source.disconnect();(1===a.zc||1<a.zc&&0===a.Ja)&&a.uc.addClass("started")});C(a,d);C(a,q)}(c,d,b,f)}};function L(a,b){B(this,"bite-1.mp3");B(this,"bite-2.mp3");p.call(this,a,b,"burger",g,g,l)}n(L);L.prototype.o=function(){L.d.o.call(this);this.va=$("[id*=hot-dog-bite-]");this.yb=this.va.length;this.wa=$("[id*=burger-bite-]");this.zb=this.wa.length};L.prototype.u=function(){L.d.u.call(this);this.va.css("opacity",0);this.ca=0;this.wa.css("opacity",0);this.da=0;this.V=g};
L.prototype.q=function(){L.d.q.call(this);this.ca<this.yb&&(this.va[this.ca].style.opacity=1,this.ca++,this.n("bite-2.mp3"));if(this.V&&this.ca===this.yb){var a=this,b=new TWEEN.Tween({opacity:0});b.to({opacity:1},200);b.delay(500);b.onStart(function(){a.va.css("opacity",0)});b.onUpdate(function(){a.r.css("opacity",this.opacity)});b.onComplete(function(){a.V=g;a.ca=0});this.V=l;C(this,b)}};
L.prototype.p=function(){L.d.p.call(this);this.da<this.zb&&(this.wa[this.da].style.opacity=1,this.da++,this.n("bite-1.mp3"));if(this.V&&this.da===this.zb){var a=this,b=new TWEEN.Tween({opacity:0});b.to({opacity:1},200);b.delay(500);b.onStart(function(){a.wa.css("opacity",0)});b.onUpdate(function(){a.Y.css("opacity",this.opacity)});b.onComplete(function(){a.V=g;a.da=0});this.V=l;C(this,b)}};function M(a,b){B(this,"brass-note-1.mp3");B(this,"brass-note-2.mp3");B(this,"brass-note-3.mp3");B(this,"brass-note-4.mp3");B(this,"lute-note-1.mp3");B(this,"lute-note-2.mp3");B(this,"lute-note-3.mp3");B(this,"lute-note-4.mp3");B(this,"funky-note-1.mp3");B(this,"funky-note-2.mp3");B(this,"funky-note-3.mp3");B(this,"funky-note-4.mp3");B(this,"beats-piano.mp3");B(this,"beats-club.mp3");B(this,"beats-effected-kit.mp3");B(this,"beats-electric-1.mp3");B(this,"beats-electric-2.mp3");B(this,"beats-hip-hop.mp3");
B(this,"beats-jazzy-rock.mp3");B(this,"beats-jazzy.mp3");B(this,"beats-lounge.mp3");B(this,"beats-motown.mp3");p.call(this,a,b,"song",g,g)}n(M);
M.prototype.o=function(){M.d.o.call(this);this.F=r("down","song");this.z=r("up","song");this.Zc=$(".instrument");this.Db={};this.Db["note-1"]=[document.getElementById("rectangle1"),document.getElementById("rectangle2"),document.getElementById("rectangle3")];this.Db["note-2"]=[document.getElementById("circle-yellow1"),document.getElementById("circle-yellow2"),document.getElementById("circle-yellow3")];this.Db["note-3"]=[document.getElementById("circle-blue1"),document.getElementById("circle-blue2"),
document.getElementById("circle-blue3")];this.Db["note-4"]=[document.getElementById("polygon1"),document.getElementById("polygon2"),document.getElementById("polygon3")];this.jb=$(".song-style");$(this.jb.get(0)).addClass("active");this.Hb=this.jb.get(0).id;this.Vc="beats-piano.mp3 beats-club.mp3 beats-effected-kit.mp3 beats-electric-1.mp3 beats-electric-2.mp3 beats-hip-hop.mp3 beats-jazzy-rock.mp3 beats-jazzy.mp3 beats-lounge.mp3 beats-motown.mp3".split(" ");this.Ld=this.Vc.length;this.mc=$("#drum-number");
this.Ga=-1;this.ya=$("#drumkit");this.Ea=h};
M.prototype.u=function(){M.d.u.call(this);var a=this;a.Zc.bind(a.F,function(){var b=this.id;a.log("now playing sound for note id: "+a.Hb+"-"+b);a.Ca("play-sound",a.Hb+"-"+b);a.n(a.Hb+"-"+b+".mp3",function(b){a.source=b});for(var b=a.Db[b],c,d=0,e=~~a.source.buffer.duration,f=0,j=b.length;f<j;f++)c=b[f],function(b,c){var d=400*e,f=300*e,j=new TWEEN.Tween({scale:1,opacity:1});j.to({scale:1.75,opacity:0.05},d);j.delay(c);j.onUpdate(function(){b.style[a.ka]="scale("+this.scale+")";b.style.opacity=this.opacity});
var x=new TWEEN.Tween({scale:1.75,opacity:0.05});x.to({scale:1,opacity:1},f);x.delay(c+d);x.onUpdate(function(){b.style[a.ka]="scale("+this.scale+")";b.style.opacity=this.opacity});C(a,j);C(a,x)}(c,d),d+=200*e});a.jb.bind(a.z,function(){var b=this.id;a.log("swapping instrument to: "+b);a.Ca("changed-instrument",b);a.jb.removeClass("active");$("#"+b).addClass("active");a.Hb=b});a.ya.bind(a.F,function(){a.Ga++;0===a.Ga&&a.ya.addClass("active");a.Ga<a.Ld?(a.ya.addClass("tabbing"),a.mc.text(a.Ga+1)):
(a.ya.removeClass("active"),a.mc.text(""),a.Ga=-1,a.Ea.disconnect(0),a.Ea=h)});a.ya.bind(a.z,function(){0<=a.Ga&&(a.Ea&&a.Ea.disconnect(0),a.n(a.Vc[a.Ga],function(b){a.Ea=b},g),a.ya.removeClass("tabbing"))})};
M.prototype.A=function(){M.d.A.call(this);this.Zc.unbind(this.F);this.jb.unbind(this.z);this.ya.unbind(this.F);this.ya.unbind(this.z);this.jb.removeClass("active");this.Ea&&this.Ea.disconnect(0);this.source&&this.source.disconnect(0);this.Ea=h;this.mc.text("");this.Ga=-1;this.ya.removeClass("active");TWEEN.removeAll();for(var a=$(".shape"),b=0,c=a.length;b<c;b++){var d=a[b];d.style[this.ka]="scale(1)";d.style.opacity=1}};function Fa(a){this.ma="";this.ad=15;var b={},c,d;for(c in a)a.hasOwnProperty(c)&&a[c].pattern&&(d=a[c],b[c]={hb:d.hb,jc:ea(d.pattern.toString(2),d.xb)});this.vc=[];for(c in b)if(b.hasOwnProperty(c)){d=b[c];for(a=0;a<d.jc.length;a++)this.vc.push({key:c,Yb:RegExp("^"+d.jc.slice(0,a+1)),Wb:a+1!=d.jc.length})}}Fa.prototype.reset=function(){this.ma=""};function P(a,b){B(this,"i.mp3");B(this,"o.mp3");p.call(this,a,b,"home",g,g,l,g);this.ac=new Fa(u);this.td=0;this.Vb=g;this.Jd=12E3}n(P);function Ga(a){a.Vb=g;a.Lc.fadeIn(300);a.Z.fadeOut(300)}
function Ha(a,b){a.Z.hasClass("success")&&(a.Z.removeClass("success"),a.ac.reset());a.Z.hasClass("failure")&&(a.Z.removeClass("failure"),a.ac.reset());var c=a.ac;c.ma+=b;c.ma.length>c.ad&&(c.ma=c.ma.slice(-c.ad,c.ma.length));var d=c.ma,e;a:{e=[];for(var f=0;f<c.vc.length;f++){var j=c.vc[f],k=j.Yb.toString().length-3;if(k===c.ma.length&&j.Yb.test(c.ma)&&(e.push({Yb:j,xb:k,Wb:j.Wb}),!j.Wb)){e=j;break a}}for(var s,f=c=0;f<e.length;f++)e[f].xb>c&&(s=e[f].Yb,c=e[f].xb);e=s}a.log("current pattern: "+d);
d=d.replace(/1/g,'<span class="i"></span>').replace(/0/g,'<span class="o"></span>');a.Z.html(d);a.Z.css("marginLeft",-((a.Z.width()+15)/2));e?(a.log("matched",e),e.Wb||(a.Z.addClass("success"),d=e.key,a.Ca("matched-pattern",d),ta("goToMode",d))):(a.Z.removeClass("success"),a.Z.addClass("failure"));a.Vb&&(a.Vb=l,a.Lc.fadeOut(300),a.Z.fadeIn(300));a.td=a.kb}m=P.prototype;m.q=function(){P.d.q.call(this);this.Ia(this.c,this.B,10);this.n("i.mp3");Ha(this,"1")};
m.p=function(){P.d.p.call(this);this.Ia(this.b,this.B,10);this.n("o.mp3");Ha(this,"0")};m.K=function(a){this.c&&this.c.remove();var b=new paper.Point(this.ha,this.ia),c=new paper.Size(this.s,this.M),b=new paper.Rectangle(b,c);this.c=new paper.Path.Rectangle(b);this.c.closed=g;a&&(this.c.fullySelected=g);this.c.vectors=[];for(a=0;a<this.c.segments.length;a++)b=this.c.segments[a].point.clone(),b=b.subtract(this.ba),b.velocity=0,b.acceleration=5*Math.random()+10,b.bounce=0.1*Math.random()+1.05,this.c.vectors.push(b)};
m.tb=function(){var a=new paper.Gradient([["#4487fc",0],["#826eb1",1]]),b=this.c.position.clone();b.x-=this.s/2;var c=this.c.position.clone();c.x+=this.s/2;a=new paper.GradientColor(a,b,c);this.oc?this.c.fillColor=a:(this.c.fillColor=new paper.RgbColor(0,0,0,0),this.Aa||(this.c.strokeColor="black"))};
m.L=function(a){this.b&&this.b.remove();this.b=new paper.Path.RegularPolygon(this.v,this.rd,this.g);this.Fc&&this.b.smooth();a&&(this.b.fullySelected=g);this.b.vectors=[];for(a=0;a<this.b.segments.length;a++){var b=this.b.segments[a].point.clone(),b=b.subtract(this.v);b.velocity=0;b.acceleration=5*Math.random()+10;b.bounce=0.1*Math.random()+1.05;this.b.vectors.push(b)}};
m.ub=function(){var a=new paper.Gradient([["#93689c",0],["#df4a40",1]]),b=this.b.position.clone();b.x-=this.g;var c=this.b.position.clone();c.x+=this.g;a=new paper.GradientColor(a,b,c);this.oc?this.b.fillColor=a:(this.b.fillColor=new paper.RgbColor(0,0,0,0),this.Aa||(this.b.strokeColor="black"))};
m.o=function(){P.d.o.call(this);this.Lc=this.find("#date");this.Z=this.find("#pattern");this.ac.reset();xa(this);this.rd=$("#points")[0].value;this.Jb=$("#bounce")[0].value;this.Fc=g;this.Aa=l;this.oc=g;this.B=new paper.Point(this.Ta,this.za);0<this.k.height&&(this.K(),this.L())};
m.u=function(){P.d.u.call(this);var a=this;Ga(this);v(this,this.find("#menu"),"up",function(){$(a.w).addClass("modal-visible")});v(this,this.find("#modal"),"up",function(b){$(b.target).is("a")||$(a.w).removeClass("modal-visible")});Modernizr.touch&&(v(this,this.find(".has-dropdown label"),"up",function(){$(a.w).addClass("nav-visible");$(".dropdown-visible").removeClass("dropdown-visible");$(this).closest(".has-dropdown").addClass("dropdown-visible")}),v(this,this.w,"up",function(b){$(b.target).is("a, label, #menu")||
($(a.w).removeClass("nav-visible"),$(".dropdown-visible").removeClass("dropdown-visible"))}));v(this,this.find("#dropdown"),"up",function(a){$(a.target).is("a")||(a.preventDefault(),a.stopPropagation())});v(this,$(this.k),"down",function(b){b.preventDefault();b.stopPropagation();a.B=new paper.Point(F(b).x,F(b).y);a.b.hitTest(a.B)&&a.hasFocus&&a.p();a.c.hitTest(a.B)&&a.hasFocus&&a.q()});var b=new paper.Point(0,0);v(this,$(this.k),"move",function(c){c.preventDefault();c.stopPropagation();b={x:F(c).x,
y:F(c).y};a.b.hitTest(b)||a.c.hitTest(b)?a.hasFocus&&(document.body.style.cursor="pointer"):document.body.style.cursor="default"});$("#points").bind("change",function(){a.rd=$(this)[0].value;a.L(a.Aa)});$("#bounce").bind("change",function(){a.Jb=$(this)[0].value});$("#smooth-paths").bind("change",function(){a.Fc=$(this)[0].checked?g:l;a.L(a.Aa)});$("#show-points").bind("change",function(){a.Aa=$(this)[0].checked?g:l;a.L(a.Aa);a.K(a.Aa)});$("#fill-shapes").bind("change",function(){a.oc=$(this)[0].checked?
g:l;a.L(a.Aa);a.K(a.Aa)})};m.A=function(){P.d.A.call(this);w(this,this.find("#menu"),"up");w(this,this.find("#modal"),"up");w(this,this.find("#dropdown"),"up");w(this,this.find(".has-dropdown label"),"up");w(this,this.w,"up");w(this,$(this.k),"down");w(this,$(this.k),"move")};m.D=function(a){P.d.D.call(this,l);ya(this);this.K();this.L();a&&y(this)};
m.Ia=function(a,b,c){for(var d=0;d<a.vectors.length;d++){var e=a.vectors[d],f;a===this.b?(f=e.add(this.v),f=f.subtract(b),f=Math.max(0,this.g-f.length)):(f=e.add(this.ba),f=f.subtract(b),f=Math.max(0,this.s-f.length));e.length+=Math.max(f*this.Jb,10*this.Jb);e.velocity+=c;e.velocity=Math.min(this.Jb,e.velocity)}};
m.Ma=function(a){for(var b=0;b<a.segments.length;b++){var c=a.vectors[b],d=new paper.Point(this.ha,this.ia);c.velocity=a===this.b?((this.g-c.length)/c.acceleration+c.velocity)/c.bounce:((d.getDistance(this.ba)-c.length)/c.acceleration+c.velocity)/c.bounce;c.length=Math.max(0,c.length+c.velocity)}};m.La=function(a){for(var b=0;b<a.segments.length;b++){var c=a.vectors[b].clone();a===this.b?(this.b.segments[b].point=c.add(this.v),this.Fc&&this.b.smooth()):this.c.segments[b].point=c.add(this.ba)}};
m.H=function(a){P.d.H.call(this,a);this.Vb||this.kb-this.td>this.Jd&&Ga(this);this.c&&this.b&&(this.tb(),this.ub());0<a&&(this.c&&this.b)&&(this.Ma(this.c),this.La(this.c),this.Ma(this.b),this.La(this.b))};function Q(a,b){B(this,"bite-1.mp3");B(this,"bite-2.mp3");p.call(this,a,b,"donut",g,g,l)}n(Q);Q.prototype.o=function(){Q.d.o.call(this);this.va=$("[id*=bar-bite-]");this.yb=this.va.length;this.wa=$("[id*=donut-bite-]");this.zb=this.wa.length;this.V=g};Q.prototype.u=function(){Q.d.u.call(this);this.va.css("opacity",0);this.ca=0;this.wa.css("opacity",0);this.da=0};
Q.prototype.q=function(){Q.d.q.call(this);this.ca<this.yb&&(this.va[this.ca].style.opacity=1,this.ca++,this.n("bite-2.mp3"));if(this.V&&this.ca===this.yb){var a=this,b=new TWEEN.Tween({opacity:0});b.to({opacity:1},200);b.delay(500);b.onStart(function(){a.va.css("opacity",0)});b.onUpdate(function(){a.r.css("opacity",this.opacity)});b.onComplete(function(){a.V=g;a.ca=0});this.V=l;C(this,b)}};
Q.prototype.p=function(){Q.d.p.call(this);this.da<this.zb&&(this.wa[this.da].style.opacity=1,this.da++,this.n("bite-1.mp3"));if(this.V&&this.da===this.zb){var a=this,b=new TWEEN.Tween({opacity:0});b.to({opacity:1},200);b.delay(500);b.onStart(function(){a.wa.css("opacity",0)});b.onUpdate(function(){a.Y.css("opacity",this.opacity)});b.onComplete(function(){a.V=g;a.da=0});this.V=l;C(this,b)}};function R(a,b){B(this,"i.mp3");B(this,"o.mp3");this.a=z(this);this.a.viscosity=0;p.call(this,a,b,"space",g,g,g);xa(this);this.J&&(this.Hc=new Tuna(this.ta),this.Lb=new this.Hc.Chorus({rate:1,feedback:0,delay:2,bypass:0}))}n(R);m=R.prototype;
m.n=function(a,b,c){if(this.J){var d=this.ic+"sounds/"+this.l+"/"+a;this.log('Playing sound "'+a+'"');a=this.ta;var d=va(this,d),e=a.createBufferSource(),f=a.createGainNode();f.gain.value=0.1;e.buffer=d;e.loop=c||l;e.connect(f);f.connect(this.Lb.input);this.Lb.connect(a.destination);e.noteOn(0);"function"===typeof b&&b(e)}};m.q=function(){this.Sb=g;10>this.O&&(this.O+=2);this.n("i.mp3")};m.p=function(){this.Zb=g;10>this.P&&(this.P+=2);this.n("o.mp3")};
m.K=function(){if(this.c)Ia(this.G,this.fa,this.ga,l),this.T.position={x:this.ha+this.s/2,y:this.ia+this.M/2},this.c.position={x:this.ha+this.s/2,y:this.ia+this.M/2},this.T.scale(this.s/this.c.bounds.width),this.c.scale(this.s/this.c.bounds.width);else{var a,b,c,d;this.G=[];var e=new paper.Point(this.ha,this.ia);c=new paper.Size(this.s,this.M);c=new paper.Rectangle(e,c);this.c=new paper.Path.Rectangle(c);this.c.fillColor=new paper.RgbColor(0,0,0,0);this.T=new paper.Group;for(var f=0;f<this.s/6;f++)this.G.push(new paper.Path),
a=e.x+6*f,b=e.y,c=new paper.Point(a,b),b=e.y+this.M,d=new paper.Point(a,b),b=new paper.Point(a,this.Ya-this.M/4),a=new paper.Point(a,this.Ya+this.M/4),this.G[f].add(c,b,a,d),this.T.addChild(this.G[f]);this.T.strokeColor="#11a860";this.T.strokeWidth=1;this.fa=[];this.ga=[]}Ia(this.G,this.fa,this.ga,g)};
m.L=function(){if(this.b)Ia(this.j,this.Sa,this.ja,l),this.ib.position={x:this.Ta,y:this.za},this.b.position={x:this.Ta,y:this.za},this.ib.scale(2*this.g/this.b.bounds.height),this.b.scale(2*this.g/this.b.bounds.height);else{var a,b,c,d,e;this.j=[];this.b=new paper.Path.Circle(this.v,this.g);this.b.fillColor=new paper.RgbColor(0,0,0,0);this.ib=new paper.Group;var f=90,j=2;640>this.e&&(f=45,j=4);for(var k=0;k<f;k++)this.j.push(new paper.Path),a=this.v.x+this.g*Math.cos(k*j*(Math.PI/180)),b=this.v.y+
this.g*Math.sin(k*j*(Math.PI/180)),c=new paper.Point(a,b),a=this.v.x+this.g*Math.cos(-k*j*(Math.PI/180)),b=this.v.y+this.g*Math.sin(-k*j*(Math.PI/180)),d=new paper.Point(a,b),e=d.getDistance(c),b=new paper.Point(a,this.za+e/4),a=new paper.Point(a,this.za-e/4),this.j[k].add(c,b,a,d),this.ib.addChild(this.j[k]);this.ib.strokeColor="#3777e2";this.ib.strokeWidth=1;this.ib.rotate(90);this.Sa=[];this.ja=[]}Ia(this.j,this.Sa,this.ja,g)};
m.o=function(){R.d.o.call(this);var a=2*this.e;640>this.e&&(a=this.e/2);this.a=z(this);this.a.viscosity=0;this.a.particles=this.a.particles||[];for(var b=0;b<a;b++)this.Ka=ca(),this.a.particles.push(new Particle),this.a.particles[b].setRadius(1.4*Math.random()+0.1),this.a.particles[b].pos.x=this.Ka[0]*this.e,this.a.particles[b].pos.y=this.Ka[1]*this.f,this.a.particles[b].vel.x=0,this.a.particles[b].vel.y=0;this.Nb=0;this.Ka=[];this.Eb=this.e/2;this.Ya=this.f/2;this.W=this.Eb;this.N=this.Ya;this.Sb=
l;this.Yc=g;this.oa=0;this.O=1;this.Zb=l;this.dd=g;this.qa=0;this.P=1;0<this.k.height&&(this.K(),this.L())};function Ja(a){if(!a.t||!a.t.length)a.t=$("#space-canvas");a.i=a.i||a.t[0];a.i.width=a.e;a.i.height=a.f}
m.Kc=function(){R.d.Kc.call(this);Ja(this);var a=this,b=new paper.Point(0,0),c=r("move",this.l);$(this.w).bind(c,function(c){c.preventDefault();c.stopPropagation();a.W=F(c).x;a.N=F(c).y;b={x:a.W,y:a.N};a.b.hitTest(b)||a.c.hitTest(b)?a.hasFocus&&(document.body.style.cursor="pointer"):document.body.style.cursor="default"});c=r("down",this.l);$(this.w).bind(c,function(b){b.preventDefault();b.stopPropagation();b=F(b);b=new paper.Point(b.x,b.y);a.de=b;a.b.hitTest(b)&&a.hasFocus&&a.p();a.c.hitTest(b)&&
a.hasFocus&&a.q()})};m.A=function(){R.d.A.call(this);var a=r("move",this.l);$(this.w).unbind(a+".space");a=r("down",this.l);$(this.w).unbind(a+".space")};m.D=function(){var a=this.e,b=this.f;R.d.D.call(this,l);a=Math.abs(a-this.e);b=Math.abs(b-this.f);Ja(this);this.Eb=this.e/2;this.Ya=this.f/2;ya(this);if((50<a||50<b)&&this.a)for(b=0;b<this.a.particles.length;b++)this.Ka=ca(),this.a.particles[b].pos.x=this.Ka[0]*this.e,this.a.particles[b].pos.y=this.Ka[1]*this.f;this.K();this.L();y(this)};
function Ia(a,b,c,d){for(var e=0;e<a.length;e++){b[e]||(b[e]=[]);c[e]||(c[e]=[]);for(var f=0;f<a[e].segments.length;f++)d?(b[e][f]=a[e].segments[f].point.x,c[e][f]=a[e].segments[f].point.y):(a[e].segments[f].point.x=b[e][f],a[e].segments[f].point.y=c[e][f])}}function Ka(a,b,c,d,e,f){var j=100*a.Nb,k=1E3*a.Nb,s=1E4*a.Nb;b<s&&c===g?b+=k:(1<d?b<s&&(b+=j):(c=l,b-=k),d=1<d?d-0.1:1);b<j&&(e=l,c=g,d=1);f===g?(a.oa=b,a.Yc=c,a.O=d,a.Sb=e):(a.qa=b,a.dd=c,a.P=d,a.Zb=e)}
function S(a,b,c,d,e,f,j){var k=Math.max(a.e,a.f)/(Math.min(a.e,a.f)/2);return c?b+Math.cos(a.pc/10+(d-e))*f*j/k:b+Math.sin(a.pc/10+(d-e))*f*j/k}
m.la=function(a){R.d.la.call(this,a);for(a=0;a<this.a.particles.length;a++)this.a.particles[a].pos.x+=(this.Eb-this.W)/(5E3/this.a.particles[a].radius)+0.1,this.a.particles[a].pos.x>2*this.e?this.a.particles[a].pos.x=10*-this.a.particles[a].radius:this.a.particles[a].pos.x<2*-this.e&&(this.a.particles[a].pos.x=this.e+10*this.a.particles[a].radius),this.a.particles[a].pos.y+=(this.Ya-this.N)/(5E3/this.a.particles[a].radius),this.a.particles[a].pos.y>2*this.f?this.a.particles[a].pos.y=10*-this.a.particles[a].radius:
this.a.particles[a].pos.y<2*-this.f&&(this.a.particles[a].pos.y=this.e+10*this.a.particles[a].radius)};
m.H=function(a){R.d.H.call(this,a);var b;if(this.i){var c=this.i.getContext("2d");c.fillStyle="#e4e4e4";c.clearRect(0,0,this.i.width+1,this.i.height+1);for(b=0;b<this.a.particles.length;b++)c.beginPath(),c.arc(this.a.particles[b].pos.x+0.5,this.a.particles[b].pos.y+0.5,this.a.particles[b].radius,0,2*Math.PI),c.closePath(),c.fill();this.Nb=a/100;if(this.Sb===g){Ka(this,this.oa,this.Yc,this.O,this.Sb,g);this.J&&(this.Lb.feedback=Math.min(this.O/10,1));for(b=0;b<this.G.length;b++)this.Ka=ca(),this.G[b].segments[0].point.x=
S(this,this.fa[b][0],g,this.T.position.x,this.fa[b][0],this.oa,this.O),this.G[b].segments[0].point.y=S(this,this.ga[b][0],l,this.T.position.y,this.ga[b][0],this.oa,this.O),this.G[b].segments[1].point.x=S(this,this.fa[b][1],l,this.T.position.x,this.fa[b][1],this.oa,this.O),this.G[b].segments[1].point.y=S(this,this.ga[b][1],g,this.T.position.y,this.ga[b][1],this.oa,this.O),this.G[b].segments[2].point.x=S(this,this.fa[b][2],g,this.T.position.x,this.fa[b][2],this.oa,this.O),this.G[b].segments[2].point.y=
S(this,this.ga[b][2],l,this.T.position.y,this.ga[b][2],this.oa,this.O),this.G[b].segments[3].point.x=S(this,this.fa[b][3],l,this.T.position.x,this.fa[b][3],this.oa,this.O),this.G[b].segments[3].point.y=S(this,this.ga[b][3],g,this.T.position.y,this.ga[b][3],this.oa,this.O),this.G[b].smooth()}else Ia(this.G,this.fa,this.ga,l);if(this.Zb===g){Ka(this,this.qa,this.dd,this.P,this.Zb,l);this.J&&(this.Lb.feedback=Math.min(this.P/10,1));for(b=0;b<this.j.length;b++)this.Ka=ca(),this.j[b].segments[0].point.x=
S(this,this.Sa[b][0],g,0,0,this.qa,this.P),this.j[b].segments[0].point.y=S(this,this.ja[b][0],l,0,0,this.qa,this.P),this.j[b].segments[1].point.x=S(this,this.Sa[b][1],l,0,0,this.qa,this.P),this.j[b].segments[1].point.y=S(this,this.ja[b][1],g,this.ja[b][1],0.95*this.ja[b][1],this.qa,this.P),this.j[b].segments[2].point.x=S(this,this.Sa[b][2],g,0,0,this.qa,this.P),this.j[b].segments[2].point.y=S(this,this.ja[b][2],l,this.ja[b][2],0.95*this.ja[b][2],this.qa,this.P),this.j[b].segments[3].point.x=S(this,
this.Sa[b][3],l,0,0,this.qa,this.P),this.j[b].segments[3].point.y=S(this,this.ja[b][3],g,0,0,this.qa,this.P),this.j[b].smooth()}else Ia(this.j,this.Sa,this.ja,l)}};function T(a,b){p.call(this,a,b,"synth",g,g,l)}n(T);m=T.prototype;
m.o=function(){T.d.o.call(this);this.F=r("down","synth");this.z=r("up","synth");var a=this.ta;this.source=a.createOscillator();this.gain=a.createGainNode();this.gain.gain.value=0.01;this.Hc=new Tuna(a);this.S=a.createAnalyser();this.S.fftSize=512;this.S.smoothingTimeConstant=0.85;this.gc=$("#waveforms");this.ce=document.getElementById("oscillator-frequency");this.detune=document.getElementById("oscillator-detune");this.U=l;this.nc={};this.nc.delay=new this.Hc.Delay;La(this);this.count=360*(this.e%
360);this.Xb=$("#synth-letter-i");this.pa=$("#synth-letter-o");this.lb=1;this.tc=80;this.$c=650;this.Ed=0;this.Gd=this.Fd=0.5;this.Xd=["sine","square","saw","triangle"];var b=this;setTimeout(function(){b.D(g)},800)};
m.H=function(a){T.d.H.call(this,a);if(this.U){this.count-=300*a;this.duration+=a;a=new Uint8Array(this.S.frequencyBinCount);this.S.getByteFrequencyData(a);for(var b,c,d=0,e=this.R.length;d<e;d++){for(var f=0,j=a.length/2;f<j;f++)b=this.qb-0.75*a[f],c=b===this.qb?0:5*d,this.R[d].segments[f].point.y=b+c;this.R[d].smooth()}}};
m.D=function(a){T.d.D.call(this,l);this.qb=500>this.f?this.f/2+(this.f-256)/2:this.f/2+128;this.scale=~~(0.5*this.f);this.Wd=~~(this.f/2);this.i&&(this.i.width=this.e,this.i.height=this.f);this.Ab=this.pa.offset();this.$b=this.pa[0].getBoundingClientRect().width;this.g=this.$b/2;this.Ra=this.Ab.left+this.g;this.Bb=this.Ab.top+this.g;this.xa&&this.X&&(this.$d=this.xa.position.x,this.ae=this.xa.position.y,this.Mb=this.xa.bounds.width/2,this.xa.position.x=this.Ra,this.xa.position.y=this.Bb,this.xa.scale(this.g/
this.Mb),this.rb.position.x=this.Ra,this.rb.position.y=this.Bb,this.rb.scale(this.g/this.Mb),this.Mb=this.X.bounds.width/2,this.X.position.x=this.Ra,this.X.position.y=this.Bb,this.X.scale(0.08*this.g/this.Mb));if(this.R){Math.max(2*this.g,128);for(var b=2*this.g/128,c=0,d=this.R.length;c<d;c++)for(var e=0,f=this.R[c].segments.length;e<f;e++)this.R[c].segments[e].point.x=b*e+this.Ra-this.g,this.R[c].segments[e].point.y=this.qb}a&&y(this);a=this.Xb[0].getBoundingClientRect();var b=this.Xb.position(),
j=~~a.height;this.gc.css({top:~~b.top+"px",left:~~b.left+"px",height:j+"px",width:~~a.width+"px"});var k=this;setTimeout(function(){var a=k.gc.find("li"),b=a.height();a.css("margin-top",~~((j-4*b)/4.5))},100)};
m.u=function(){T.d.u.call(this);var a=this;a.qb=500>a.f?a.f/2+(a.f-256)/2:a.f/2+128;a.scale=~~(0.5*a.f);a.Wd=~~(a.f/2);if(!a.path&&!a.ee){xa(a);Math.max(2*a.g,128);var b=2*a.g/128;a.xa=new paper.Path.Circle(new paper.Point(a.Ra,a.Bb),a.g);a.rb=a.xa.clone();a.rb.fillColor="#3777e3";a.rb.opacity=0.9;a.X=new paper.Path.Circle(new paper.Point(a.Ra,a.Bb),0.08*a.g);a.X.fillColor="#ffffff";a.X.strokeColor="#ffffff";a.X.strokeColor.alpha=0.3;a.X.strokeWidth=0.05*a.g;a.X.opacity=0.7;a.path=new paper.Path;
a.path.strokeColor=new paper.RgbColor(255,255,255,0.2);a.path.strokeWidth=5;for(var c=0;128>=c;c++){var d=new paper.Point(b*c+a.Ra-a.g,a.qb);a.path.add(d)}a.R=[];a.R.push(a.path);for(b=0;3>b;b++)c=a.path.clone(),a.R.push(c);a.Md=new paper.Group(a.xa,a.R[0],a.R[1],a.R[2],a.R[3],a.X);a.Md.clipped=g;a.duration=0}a.U=l;Ma(a);a.Xb.bind(this.z,function(){a.lb++;a.lb=3<a.lb?0:a.lb;La(a);$(".on",a.gc).removeClass("on");$("."+a.Xd[a.lb],a.gc).addClass("on")});a.pa.bind(this.F,function(){a.ed=g;a.tc=Na(a,event.pageX,
event.pageY)});a.pa.bind(this.z,function(){Pa(a);Qa(a);a.ed=l});b=r("move",this.l);a.pa.bind(b,function(){a.ed&&(Pa(a),Qa(a))});a.Ab=a.pa.offset();a.$b=a.pa[0].getBoundingClientRect().width};m.A=function(){T.d.A.call(this);this.Xb.unbind(this.z);this.pa.unbind(this.F);this.pa.unbind(this.z);var a=r("move",this.l);this.pa.unbind(a);this.U=g;Ma(this)};function La(a){a.source.type=a.lb;a.source.frequency.value=a.tc;a.source.detune.value=a.$c}
function Ma(a){if(a.U)a.source.disconnect(),a.U=l;else{var b=a.ta;a.source.connect(a.nc.delay.input);a.nc.delay.connect(a.S);a.S.connect(a.gain);a.gain.connect(b.destination);a.source.noteOn(0);a.U=g}}function Pa(a){var b=event;Na(a,b.pageX,b.pageY);La(a)}function Qa(a){var b=event;a.X.position.x=b.pageX;a.X.position.y=b.pageY}function Na(a,b,c){b=(b-a.Ab.left)/a.$b;c=(c-a.Ab.top)/a.$b;a.tc=1E3-1E3*c;a.$c=-4800+9600*b;a.Ed=60-60*c;a.Gd=c;a.Fd=b};function Ra(a,b){B(this,"rocket-launch.mp3");B(this,"rumble.mp3");B(this,"sci-fi-door.mp3");p.call(this,a,b,"rocket",g,g,l);var c=this.find(".letter-i"),d=this.find(".letter-o");this.Nc=d.attr("cx")+", "+d.attr("cy");this.pb=c.attr("cx")+", "+c.attr("cy");this.Bc=this.find(".letter-i-wrapper");this.wc=$("#moon-1");this.vb=$("[id*=fire-]").css("opacity",0);this.Id=this.vb.length;this.Fa=0;this.Tb=this.rc=l}n(Ra);
Ra.prototype.q=function(){Ra.d.q.call(this);if(!this.Tb)if(this.Fa<this.Id){if(!this.Tb){var a=this;this.n("rumble.mp3");this.vb[this.Fa].style.opacity=1;this.vb[this.Fa+1].style.opacity=1;this.vb[this.Fa+2].style.opacity=1;var b=~~Random(2,2*this.Fa+2),c=new TWEEN.Tween({rotate:0});c.to({rotate:-b},100);c.onUpdate(function(){a.r.attr("transform","rotate("+this.rotate+", "+a.pb+")")});var d=new TWEEN.Tween({rotate:-b});d.to({rotate:b},200);d.delay(100);d.onUpdate(function(){a.r.attr("transform","rotate("+
this.rotate+", "+a.pb+")")});b=new TWEEN.Tween({rotate:b});b.to({rotate:0},100);b.delay(300);b.onUpdate(function(){a.r.attr("transform","rotate("+this.rotate+", "+a.pb+")")});b.onComplete(function(){a.Fa+=3;a.Tb=l});this.Tb=g;C(this,c);C(this,d);C(this,b)}}else if(!this.rc){this.n("rocket-launch.mp3");var e=this,c=100,d=this.Y[0].getBoundingClientRect(),b=this.r[0].getBoundingClientRect(),f=~~(d.left+d.width/2-b.height);prevTransform=transform="";(new TWEEN.Tween({translateY:0})).to({translateY:20},
400);d=new TWEEN.Tween({rotate:0});d.to({rotate:90},c);d.onUpdate(function(){e.r.attr("transform","rotate("+this.rotate+", "+e.pb+")")});b=new TWEEN.Tween({translateY:0,scale:1});b.to({translateY:f,scale:0.25},400);b.delay(c);b.onUpdate(function(){transform="scale("+this.scale+") translate(0, "+-1*this.translateY+")";e.Bc.attr("transform",transform)});b.onComplete(function(){prevTransform=transform});c+=400;f=new TWEEN.Tween({rotate:0});f.to({rotate:-90},400);f.delay(c);f.onUpdate(function(){transform=
prevTransform+" rotate("+this.rotate+", "+e.pb+")";e.Bc.attr("transform",transform)});f.onComplete(function(){e.vb.css("opacity",0);e.p()});var c=c+400,j=new TWEEN.Tween({opacity:0});j.to({opacity:1},200);j.delay(c+400+2E3);j.onStart(function(){e.Bc.attr("transform","");e.r.attr("transform","")});j.onUpdate(function(){e.r.css("opacity",this.opacity)});j.onComplete(function(){e.Fa=0;e.rc=l});this.rc=g;C(this,d);C(this,b);C(this,f);C(this,j)}};
Ra.prototype.p=function(){Ra.d.p.call(this);this.n("sci-fi-door.mp3");var a=this,b=this.wc[0].style[a.ka].split("rotate(")[1],b=parseInt(b)||0,c=new TWEEN.Tween({rotate:b});c.to({rotate:b+720},1E3);c.onUpdate(function(){a.wc.attr("transform","rotate("+this.rotate+", "+a.Nc+")")});c.onComplete(function(){a.wc.attr("transform","rotate(0, "+a.Nc+")")});C(a,c)};function U(a,b){B(this,"i.mp3");B(this,"o.mp3");p.call(this,a,b,"ascii",g,g,g);xa(this,g)}n(U);m=U.prototype;m.q=function(){U.d.q.call(this);this.Ia(this.c,this.B,10);this.n("i.mp3")};m.p=function(){U.d.p.call(this);this.Ia(this.b,this.B,10);this.n("o.mp3")};
m.K=function(){this.c&&this.c.remove();var a=new paper.Point(this.ha,this.ia),b=new paper.Size(this.s,this.M),a=new paper.Rectangle(a,b);this.c=new paper.Path.Rectangle(a);this.c.closed=g;this.c.vectors=[];for(a=0;a<this.c.segments.length;a++)b=this.c.segments[a].point.clone(),b=b.subtract(this.ba),b.velocity=0,b.acceleration=5*Math.random()+10,b.bounce=0.1*Math.random()+1.05,this.c.vectors.push(b)};
m.tb=function(){var a=new paper.Gradient([["#000",0],["#eee",1]]),b=this.c.position.clone();b.x-=this.s/2;var c=this.c.position.clone();c.x+=this.s/2;a=new paper.GradientColor(a,b,c);this.c.fillColor=a};
m.L=function(){this.b&&this.b.remove();this.b=new paper.Path.RegularPolygon(this.v,6,this.g);this.b.smooth();this.b.vectors=[];for(var a=0;a<this.b.segments.length;a++){var b=this.b.segments[a].point.clone(),b=b.subtract(this.v);b.velocity=0;b.acceleration=5*Math.random()+10;b.bounce=0.1*Math.random()+1.05;this.b.vectors.push(b)}};
m.ub=function(){var a=new paper.Gradient([["#000",0],["#eee",1]]),b=this.b.position.clone();b.x-=this.g;var c=this.b.position.clone();c.x+=this.g;a=new paper.GradientColor(a,b,c);this.b.fillColor=a};
function Sa(a){a.Va?(a.ec.x=a.md,a.ec.y=a.nd,a.dc.x=a.kd,a.dc.y=a.ld,a.Va.segments[0].point=a.ec,a.Va.segments[1].point=a.dc,a.Va.strokeWidth=a.od):(a.ec=new paper.Point(a.md,a.nd),a.dc=new paper.Point(a.kd,a.ld),a.Va=new paper.Path,a.Va.strokeWidth=a.od,a.Va.strokeColor="#ebebeb",a.Va.add(a.ec,a.dc))}m.o=function(){U.d.o.call(this);this.a=z(this);this.B=new paper.Point(this.Ta,this.za);0<this.k.height&&(Sa(this),this.K(),this.L())};
m.u=function(){U.d.u.call(this);this.t=$("#ascii-canvas");this.t.css({"z-index":3});this.i=this.t[0];this.i.width=this.e;this.i.height=this.f;var a=this,b=r("down",this.l);this.t.bind(b,function(b){b.preventDefault();b.stopPropagation();a.B=new paper.Point(F(b).x,F(b).y);a.B.getDistance(a.b.position)<a.g&&a.hasFocus&&a.p();Math.abs(a.B.x-a.c.position.x)<a.s/2&&Math.abs(a.B.y-a.c.position.y)<a.M/2&&a.hasFocus&&a.q()});b=r("move",this.l);this.t.bind(b,function(b){b.preventDefault();b.stopPropagation();
b=new paper.Point(F(b).x,F(b).y);b.getDistance(a.b.position)<a.g||Math.abs(b.x-a.c.position.x)<a.s/2&&Math.abs(b.y-a.c.position.y)<a.M/2?a.hasFocus&&(document.getElementById("ascii-canvas").style.cursor="pointer"):document.getElementById("ascii-canvas").style.cursor="default"})};m.A=function(){U.d.A.call(this);var a=r("down",this.l);this.t.unbind(a);a=r("move",this.l);this.t.unbind(a)};m.D=function(a){U.d.D.call(this,l);ya(this);Sa(this);this.K();this.L();a&&y(this)};
m.Ia=function(a,b,c){for(var d=0;d<a.vectors.length;d++){var e=a.vectors[d],f;a===this.b?(f=e.add(this.v),f=f.subtract(b),f=Math.max(0,this.g-f.length)):(f=e.add(this.ba),f=f.subtract(b),f=Math.max(0,this.s-f.length));e.length+=Math.max(4*f,100);e.velocity+=c;e.velocity=Math.min(5,e.velocity)}};
m.Ma=function(a){for(var b=0;b<a.segments.length;b++){var c=a.vectors[b],d=new paper.Point(this.ha,this.ia);c.velocity=a===this.b?((this.g-c.length)/c.acceleration+c.velocity)/c.bounce:((d.getDistance(this.ba)-c.length)/c.acceleration+c.velocity)/c.bounce;c.length=Math.max(0,c.length+c.velocity)}};m.La=function(a){for(var b=0;b<a.segments.length;b++){var c=a.vectors[b].clone();a===this.b?(this.b.segments[b].point=c.add(this.v),this.b.smooth()):this.c.segments[b].point=c.add(this.ba)}};
m.la=function(a){U.d.la.call(this,a);this.c&&this.b&&(this.tb(),this.ub(),this.Ma(this.c),this.La(this.c),this.Ma(this.b),this.La(this.b))};
m.H=function(a){U.d.H.call(this,a);var b=this.k;a=document.getElementById("ascii-canvas");if(b.width&&!(1>b.width)&&b.height&&!(1>b.height)){var c=b.width,d=b.height,e=b.getContext("2d"),f=e.getImageData(0,0,c,d).data;e.clearRect(0,0,b.width+1,b.height+1);b="";for(e=0;e<d;e+=16){for(var j=0;j<c;j+=8){var k=4*(e*c+j),s=f[k],D=f[k+1],A=f[k+2],k=Ta[0===f[k+3]?0:Ta.length-1-Math.round((0.3*s+0.59*D+0.11*A)/255*(Ta.length-1))];" "==k&&(k="&nbsp;");b+=k}b+="\n"}a.innerHTML=b}};var Ta=" .[]{}@!=-$%^&();:',golei2013".split("");var Ua=2*Math.PI;function V(a,b){B(this,"1.mp3");B(this,"2.mp3");p.call(this,a,b,"pong",g,g,g);this.Sd=this.ua=250;this.Hd=800;this.Rd=this.Na=30;this.Kd=10;this.fd=40;this.Ua=80;this.yc=40;this.ra=160;this.bc=g;this.bottomWallOpacity_=this.rightWallOpacity_=this.topWallOpacity_=0}n(V);m=V.prototype;
m.o=function(){V.d.o.call(this);var a=z(this);a.viscosity=0;this.h=this.h||new Particle;a.particles.push(this.h);this.jd=this.e/2;this.Pd=this.f/2;this.W=this.jd;this.N=this.Pd;this.Ua=this.N-this.ra/2;Va(this)};function Va(a){a.topWallOpacity_=0;a.rightWallOpacity_=0;a.bottomWallOpacity_=0;a.Na=a.Rd;a.ua=a.Sd;a.Td=a.jd-a.e/4;a.h.setRadius(a.Na);a.h.pos.x=a.Td;a.h.pos.y=a.Na;a.h.vel.x=a.ua;a.h.vel.y=a.ua;Wa(a,0)}
m.D=function(a){V.d.D.call(this,l);this.i&&(this.i.width=this.e,this.i.height=this.f);a&&y(this)};
m.u=function(){V.d.u.call(this);this.ab=document.getElementById("bonus");this.hc=$("#score");this.t=$("#pong-canvas");this.i=this.t[0];this.i.width=this.e;this.i.height=this.f;this.m=this.i.getContext("2d");var a=this,b=r("move",this.l);this.t.bind(b,function(b){b.preventDefault();b.stopPropagation();a.W=F(b).x;a.N=F(b).y});this.qc=this.qc||0;this.qc++;Wa(this,0);this.ab.style.opacity=0;this.ab.style[this.ka]="translateX(50px)";this.bc=l};m.A=function(){V.d.A.call(this);var a=r("move",this.l);this.t.unbind(a)};
function Xa(a,b){a.n("1.mp3");var c=b+"Opacity_",d={};d[c]=a[c];var e={};e[c]=1;d=new TWEEN.Tween(d);d.to(e,200);d.onUpdate(function(){a[c]=this[c]});C(a,d)}function Wa(a,b){a.Cc=b;a.hc&&a.hc.length&&a.hc.text(a.Cc)}
m.la=function(a){if(!this.bc){V.d.la.call(this,a);var b=this.Ua,c=this.N;c<this.ra/2?c=this.ra/2:c>this.f-this.ra/2&&(c=this.f-this.ra/2);this.Ua=b+0.7*(c-b)*10*a;0<this.h.vel.x&&(this.Na>=this.Kd&&(this.Na*=0.9995,this.h.setRadius(this.Na)),this.ua<=this.Hd&&(this.ua*=1.001,this.h.vel.x=this.ua,this.h.vel.y=0>this.h.vel.y?-this.ua:this.ua));if(this.h.pos.x<=this.h.radius){var d=this;d.log("You Lose");d.Ca("lost",d.Cc);d.Ca("game number",d.qc);d.bc=g;ua(d,function(){Va(d);d.bc=l})}else if(0<this.h.vel.x&&
this.h.pos.x>=this.e-this.h.radius&&(this.h.vel.x*=-1,Xa(this,"rightWall")),0<this.h.vel.y&&this.h.pos.y>=this.f-this.h.radius&&(this.h.vel.y*=-1,Xa(this,"bottomWall")),0>this.h.vel.y&&this.h.pos.y<=this.h.radius&&(this.h.vel.y*=-1,Xa(this,"topWall")),a=this.Ua-this.ra/2,b=this.Ua+this.ra/2,0>this.h.vel.x&&this.h.pos.x<=this.fd+this.yc/2+this.h.radius&&this.h.pos.y>=a&&this.h.pos.y<=b){this.h.vel.x*=-1;a=this.h.vel.mag();this.Qa?this.Qa.copy(this.h.vel):this.Qa=this.h.vel.clone();this.Qa.norm();this.kc=
this.kc||new Vector;this.kc.set(0,(this.h.pos.y-this.Ua)/(this.ra/2));this.Qa.add(this.kc);this.Qa.norm();this.Qa.scale(a);this.h.vel.copy(this.Qa);var e=this;e.n("2.mp3");a=e.Cc+1;0<e.topWallOpacity_&&(0<e.rightWallOpacity_&&0<e.bottomWallOpacity_)&&(a+=10,b=new TWEEN.Tween({opacity:0,translateX:50}),b.to({opacity:1,translateX:0},200),b.onUpdate(function(){e.ab.style.opacity=this.opacity;e.ab.style[e.ka]="translateX("+this.translateX+"px)"}),c=new TWEEN.Tween({opacity:1,translateX:0}),c.to({opacity:0,
translateX:50},200),c.delay(700),c.onUpdate(function(){e.ab.style.opacity=this.opacity;e.ab.style[e.ka]="translateX("+this.translateX+"px)"}),C(e,b),C(e,c));Wa(e,a);a=new TWEEN.Tween({topWallOpacity:e.topWallOpacity_,rightWallOpacity:e.rightWallOpacity_,bottomWallOpacity:e.bottomWallOpacity_});a.to({topWallOpacity:0,rightWallOpacity:0,bottomWallOpacity:0},200);a.onUpdate(function(){e.topWallOpacity_=this.topWallOpacity;e.rightWallOpacity_=this.rightWallOpacity;e.bottomWallOpacity_=this.bottomWallOpacity});
C(e,a)}}};
m.H=function(a){V.d.H.call(this,a);this.i&&(this.m.clearRect(0,0,this.i.width+1,this.i.height+1),this.m.fillStyle="#e0493e",this.m.beginPath(),this.m.arc(this.h.pos.x,this.h.pos.y,this.h.radius,0,Ua),this.m.fill(),this.m.fillStyle="#d0d0d0",this.m.fillRect(this.fd-this.yc/2,this.Ua-this.ra/2,this.yc,this.ra),this.m.fillStyle="#f3cdca",0<this.topWallOpacity_&&(this.m.save(),this.m.globalAlpha=this.topWallOpacity_,this.m.fillRect(0,0,this.e,10),this.m.restore()),0<this.bottomWallOpacity_&&(this.m.save(),
this.m.globalAlpha=this.bottomWallOpacity_,this.m.fillRect(0,this.f-10,this.e,10),this.m.restore()),0<this.rightWallOpacity_&&(this.m.save(),this.m.globalAlpha=this.rightWallOpacity_,this.m.fillRect(this.e-10,0,10,this.f),this.m.restore()))};function W(a,b){B(this,"strike.mp3");B(this,"whoosh-1.mp3");p.call(this,a,b,"bowling",g,g,l)}n(W);W.prototype.o=function(){W.d.o.call(this);this.Ib=this.find(".letter-o-wrapper");this.Oc=this.Y.attr("cx");this.Pc=this.Y.attr("cy");this.Mc=[this.Oc,this.Pc];this.sa=[this.r.attr("cx"),this.r.attr("cy")];this.Ub=l};
W.prototype.q=function(){W.d.q.call(this);if(!this.Ub){var a=this,b=new TWEEN.Tween({rotate:0});b.to({rotate:-5},100);b.onUpdate(function(){a.r.attr("transform","rotate("+this.rotate+", "+a.sa[0]+", "+a.sa[1]+")")});var c=new TWEEN.Tween({rotate:-5});c.to({rotate:5},200);c.onStart(function(){a.n("whoosh-1.mp3")});c.delay(100);c.onUpdate(function(){a.r.attr("transform","rotate("+this.rotate+", "+a.sa[0]+", "+a.sa[1]+")")});var d=new TWEEN.Tween({rotate:5});d.to({rotate:0},100);d.delay(300);d.onUpdate(function(){a.r.attr("transform",
"rotate("+this.rotate+", "+a.sa[0]+", "+a.sa[1]+")")});C(this,b);C(this,c);C(this,d)}};
W.prototype.p=function(){W.d.p.call(this);this.n("strike.mp3");if(!this.Ub){this.Ub=g;var a=this,b=~~Random(360,380),c=this.Ib[0].getBoundingClientRect(),d=this.r[0].getBoundingClientRect(),e=c.width/3+c.left-d.right,c=new TWEEN.Tween({rotate:0});c.to({rotate:1800},1500);c.onUpdate(function(){a.Y.attr("transform","rotate("+this.rotate%360+", "+a.Oc+", "+a.Pc+")")});d=new TWEEN.Tween({translateX:0});d.to({translateX:e},600);d.delay(1E3);d.easing(TWEEN.Easing.Exponential.In);d.onUpdate(function(){a.Ib.attr("transform",
"translate("+-this.translateX+", 0)")});e=new TWEEN.Tween({rotate:0,scale:1,posX:0});e.to({rotate:b,scale:0.5,posX:-20},300);e.delay(1500);e.onUpdate(function(){a.r.attr("transform","scale("+this.scale+") rotate("+this.rotate+", "+a.sa[0]+", "+a.sa[1]+") translate("+this.posX+", 0)")});b=new TWEEN.Tween({opacity:0});b.to({opacity:1},500);b.delay(3E3);b.onStart(function(){a.Ib.attr("transform","translate(0, 0)");a.Y.attr("transform","rotate(0, "+a.Mc[0]+", "+a.Mc[1]+")");a.r.attr("transform","scale(1) rotate(0, "+
a.sa[0]+", "+a.sa[1]+") translate(0, 0)")});b.onUpdate(function(){a.Y[0].style.opacity=this.opacity;a.r[0].style.opacity=this.opacity;a.Ib[0].style.opacity=this.opacity});b.onComplete(function(){a.Ub=l});C(this,c);C(this,d);C(this,e);C(this,b)}};var u={};function X(a,b,c,d){u[a]={hb:b,pattern:c,xb:d}}X("home",P,h);X("cat",za,231,8);var Ya=navigator.userAgent.match(/Android\ 4\.2/),Za=navigator.userAgent.match(/Chrome/);(!Ya||Za)&&X("space",R,42,8);X("pong",V,129,8);X("bacon",J,144,8);X("simone",K,211,8);X("eightbit",I,83,8);X("metaball",G,170,8);ia()&&(X("song",M,219,8),X("synth",T,136,8));X("ascii",U,127,8);X("bowling",W,117,8);X("rocket",Ra,69,8);X("donut",Q,150,8);X("burger",L,57,8);
ba&&$(function(){var a=window.location.href.split("/"),b=a[a.length-1].replace("_test.html",".html").replace(/\.html(.*)/,"");if((a=u[b])&&a.hb){var c=$(window).width(),d=$(window).height();1>d&&(d=c);b=$("<div></div>").addClass("mode").addClass(b+"-mode");b.css({width:c,height:d});$("body > *").wrapAll(b);window.currentMode=new a.hb($(".mode")[0],ba?"../../":"../");$(window).resize(ha(function(){$(".mode").css({width:$(window).width(),height:$(window).height()});window.currentMode.D(g)}))}});function $a(){this.sc=Modernizr.svg&&Modernizr.csstransforms&&Modernizr.canvas;var a=r("up","app");if(!this.sc){$(document.body).addClass("unsupported");var b=$("#menu-fallback"),c=$("#modal-fallback"),d=$("#dropdown-fallback");b.bind(a,function(a){$(a.target).is("a, label")||$("#unsupported").addClass("modal-visible")});c.bind(a,function(a){$(a.target).is("a, label")||$("#unsupported").removeClass("modal-visible")});d.bind(a,function(a){$(a.target).is("a, label")||(a.preventDefault(),a.stopPropagation())});
Modernizr.touch&&($(".has-dropdown label").bind(a,function(){$(e.w).addClass("nav-visible");$(".dropdown-visible").removeClass("dropdown-visible");$(this).closest(".has-dropdown").addClass("dropdown-visible")}),$(window).bind(a,function(a){$(a.target).is("a, label, #menu")||($(e.w).removeClass("nav-visible"),$(".dropdown-visible").removeClass("dropdown-visible"))}))}this.Gc=Modernizr.prefixed("transform");this.Da=$(window);this.f=this.e=0;var e=this;this.Da.resize(ha(function(){ab(e)}));ab(this);
this.sc&&(this.Rb=window.History,this.Rb.Adapter.bind(window,"statechange",function(){var a=e.Rb.getState().url.split("/"),a=a[a.length-1].replace("experiment-","");u[a]?bb(e,a,g):bb(e,"home",g,g)}),Modernizr.touch&&(document.body.style[Modernizr.prefixed("userSelect")]="none",document.body.style[Modernizr.prefixed("userDrag")]="none",document.body.style[Modernizr.prefixed("tapHighlightColor")]="rgba(0,0,0,0)",b=r("move","app"),this.Da.bind(b,function(a){a.preventDefault();a.stopPropagation()}),this.Da.bind(a,
function(a){$(a.target).is("a, label")||(a.preventDefault(),a.stopPropagation())}),a=r("down","app"),this.Da.bind(a,function(a){$(a.target).is("a, label")||(a.preventDefault(),a.stopPropagation())}),this.Da.bind("dblclick.app",function(a){a.preventDefault();a.stopPropagation()})),a=e,a.xc=aa(),bb(a,"home",l))}
function ab(a){a.e=a.Da.width();a.f=a.Da.height();$("#wrapper").css({width:a.e,height:a.f});a.yd=Math.floor(a.e/2);a.zd=Math.floor(a.f/2);a.Pb=425;a.Ob=318;$(".logo-io-fallback").hasClass("mobile-logo")&&$(".logo-io-fallback").removeClass("mobile-logo");var b=window.devicePixelRatio;if(525>a.e/b||418>a.f/b)a.Pb=318,a.Ob=238,$(".logo-io-fallback").addClass("mobile-logo");a.Ad=a.yd-a.Pb/2;a.Bd=a.zd-a.Ob/2;$(".bounds-fallback").css({left:a.Ad,top:a.Bd,width:a.Pb+"px",height:a.Ob+"px"});$(".logo-io-fallback").css({width:a.Pb+
"px",height:a.Ob+"px"});if(a.sc&&a.Ha)for(var c in a.Ha)a.Ha.hasOwnProperty(c)&&(b=a.Ha[c],b.aa&&(b.aa.style.width=a.e+"px",b.aa.style.height=a.f+"px"),b.fb&&b.fb.D(g))}$a.prototype.postMessage=function(a){a.name.match(/.ready/)?this.xc(a):"goToMode"===a.name?this.Rb.pushState(h,"Google I/O 2013","experiment-"+a.data):"goToHome"===a.name&&this.Rb.back()};
function bb(a,b,c,d){a.Ha=a.Ha||{};a.Ha[b]=a.Ha[b]||{name:b};var e=a.Ha[b],f,j=a.Uc;if(!(j&&j.name==e.name))if(j&&(j.fb.postMessage({name:"unfocus",data:h}),j.aa.style.Ac="none"),f=c?function(){e.fb.postMessage({name:"focus",data:h});var b=d?-a.e:a.e;e.aa.style[a.Gc]=cb(b);e.aa.style.visibility="visible";setTimeout(function(){var c=new TWEEN.Tween({translateX:b});c.to({translateX:0},800);c.easing(TWEEN.Easing.Exponential.InOut);c.onUpdate(function(){e.aa.style[a.Gc]=cb(this.translateX)});c.onComplete(function(){e.aa.style.Ac=
"auto"});c.start();if(j){var c=-b,d=new TWEEN.Tween({translateX:0});d.easing(TWEEN.Easing.Exponential.InOut);d.to({translateX:c},800);d.onUpdate(function(){j.aa.style[a.Gc]=cb(this.translateX)});d.onComplete(function(){j.aa.style.visibility="hidden"});d.start()}t.app=[a,a.Od];qa()},10)}:function(){e.fb.postMessage({name:"focus",data:h});e.aa.style.visibility="visible";e.aa.style.Ac="auto"},e.fb)a.Uc=e,"function"===typeof f&&f();else{a.xc=function(a){a.name===e.name+".ready"&&"function"===typeof f&&
f();this.xc=aa()};var k=document.createElement("div");k.className="mode "+e.name+"-mode";k.style.visibility="hidden";k.style.Ac="none";k.style.width=a.e+"px";k.style.height=a.f+"px";b="modes/"+e.name+".html?"+ +new Date;ba&&(b="../../"+b);$.ajax({url:b,type:"GET",dataType:"html",complete:function(b,c,d){d=b.responseText;if(b.isResolved()){b.done(function(a){d=a});b=d.split("<body>")[1];b=b.split("</body>")[0];$(k).html(b).appendTo($("#wrapper"));if((b=u[e.name])&&b.hb)e.fb=new b.hb(k,ba?"../../":
"");a.Uc=e;e.aa=k}}})}}$a.prototype.Ca=function(a,b){fa("app",a,b)};function cb(a){return Modernizr.be?"translate3d("+a+"px, 0, 0)":"translate("+a+"px, 0)"}$a.prototype.Od=function(){TWEEN.update()||(delete t.app,qa())};window.ww=window.ww||{};window.ww.app=window.ww.app||{};window.ww.app.Core=$a;var db=["ww","app","Core"],Z=this;!(db[0]in Z)&&Z.execScript&&Z.execScript("var "+db[0]);for(var eb;db.length&&(eb=db.shift());){var fb;if(fb=!db.length)fb=void 0!==$a;fb?Z[eb]=$a:Z=Z[eb]?Z[eb]:Z[eb]={}};
