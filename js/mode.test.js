var COMPILED=false;var goog=goog||{};goog.global=this;goog.DEBUG=true;goog.LOCALE="en";goog.provide=function(name){if(!COMPILED){if(goog.isProvided_(name))throw Error('Namespace "'+name+'" already declared.');delete goog.implicitNamespaces_[name];var namespace=name;while(namespace=namespace.substring(0,namespace.lastIndexOf("."))){if(goog.getObjectByName(namespace))break;goog.implicitNamespaces_[namespace]=true}}goog.exportPath_(name)};
goog.setTestOnly=function(opt_message){if(COMPILED&&!goog.DEBUG){opt_message=opt_message||"";throw Error("Importing test-only code into non-debug environment"+opt_message?": "+opt_message:".");}};if(!COMPILED){goog.isProvided_=function(name){return!goog.implicitNamespaces_[name]&&!!goog.getObjectByName(name)};goog.implicitNamespaces_={}}
goog.exportPath_=function(name,opt_object,opt_objectToExportTo){var parts=name.split(".");var cur=opt_objectToExportTo||goog.global;if(!(parts[0]in cur)&&cur.execScript)cur.execScript("var "+parts[0]);for(var part;parts.length&&(part=parts.shift());)if(!parts.length&&goog.isDef(opt_object))cur[part]=opt_object;else if(cur[part])cur=cur[part];else cur=cur[part]={}};
goog.getObjectByName=function(name,opt_obj){var parts=name.split(".");var cur=opt_obj||goog.global;for(var part;part=parts.shift();)if(goog.isDefAndNotNull(cur[part]))cur=cur[part];else return null;return cur};goog.globalize=function(obj,opt_global){var global=opt_global||goog.global;for(var x in obj)global[x]=obj[x]};
goog.addDependency=function(relPath,provides,requires){if(!COMPILED){var provide,require;var path=relPath.replace(/\\/g,"/");var deps=goog.dependencies_;for(var i=0;provide=provides[i];i++){deps.nameToPath[provide]=path;if(!(path in deps.pathToNames))deps.pathToNames[path]={};deps.pathToNames[path][provide]=true}for(var j=0;require=requires[j];j++){if(!(path in deps.requires))deps.requires[path]={};deps.requires[path][require]=true}}};goog.ENABLE_DEBUG_LOADER=true;
goog.require=function(name){if(!COMPILED){if(goog.isProvided_(name))return;if(goog.ENABLE_DEBUG_LOADER){var path=goog.getPathFromDeps_(name);if(path){goog.included_[path]=true;goog.writeScripts_();return}}var errorMessage="goog.require could not find: "+name;if(goog.global.console)goog.global.console["error"](errorMessage);throw Error(errorMessage);}};goog.basePath="";goog.global.CLOSURE_BASE_PATH;goog.global.CLOSURE_NO_DEPS;goog.global.CLOSURE_IMPORT_SCRIPT;goog.nullFunction=function(){};
goog.identityFunction=function(opt_returnValue,var_args){return opt_returnValue};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(ctor){ctor.getInstance=function(){if(ctor.instance_)return ctor.instance_;if(goog.DEBUG)goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=ctor;return ctor.instance_=new ctor}};goog.instantiatedSingletons_=[];
if(!COMPILED&&goog.ENABLE_DEBUG_LOADER){goog.included_={};goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}};goog.inHtmlDocument_=function(){var doc=goog.global.document;return typeof doc!="undefined"&&"write"in doc};goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH){goog.basePath=goog.global.CLOSURE_BASE_PATH;return}else if(!goog.inHtmlDocument_())return;var doc=goog.global.document;var scripts=doc.getElementsByTagName("script");for(var i=scripts.length-
1;i>=0;--i){var src=scripts[i].src;var qmark=src.lastIndexOf("?");var l=qmark==-1?src.length:qmark;if(src.substr(l-7,7)=="base.js"){goog.basePath=src.substr(0,l-7);return}}};goog.importScript_=function(src){var importScript=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;if(!goog.dependencies_.written[src]&&importScript(src))goog.dependencies_.written[src]=true};goog.writeScriptTag_=function(src){if(goog.inHtmlDocument_()){var doc=goog.global.document;if(doc.readyState=="complete"){var isDeps=
/\bdeps.js$/.test(src);if(isDeps)return false;else throw Error('Cannot write "'+src+'" after document load');}doc.write('<script type="text/javascript" src="'+src+'"></'+"script>");return true}else return false};goog.writeScripts_=function(){var scripts=[];var seenScript={};var deps=goog.dependencies_;function visitNode(path){if(path in deps.written)return;if(path in deps.visited){if(!(path in seenScript)){seenScript[path]=true;scripts.push(path)}return}deps.visited[path]=true;if(path in deps.requires)for(var requireName in deps.requires[path])if(!goog.isProvided_(requireName))if(requireName in
deps.nameToPath)visitNode(deps.nameToPath[requireName]);else throw Error("Undefined nameToPath for "+requireName);if(!(path in seenScript)){seenScript[path]=true;scripts.push(path)}}for(var path in goog.included_)if(!deps.written[path])visitNode(path);for(var i=0;i<scripts.length;i++)if(scripts[i])goog.importScript_(goog.basePath+scripts[i]);else throw Error("Undefined script input");};goog.getPathFromDeps_=function(rule){if(rule in goog.dependencies_.nameToPath)return goog.dependencies_.nameToPath[rule];
else return null};goog.findBasePath_();if(!goog.global.CLOSURE_NO_DEPS)goog.importScript_(goog.basePath+"deps.js")}
goog.typeOf=function(value){var s=typeof value;if(s=="object")if(value){if(value instanceof Array)return"array";else if(value instanceof Object)return s;var className=Object.prototype.toString.call(value);if(className=="[object Window]")return"object";if(className=="[object Array]"||typeof value.length=="number"&&typeof value.splice!="undefined"&&typeof value.propertyIsEnumerable!="undefined"&&!value.propertyIsEnumerable("splice"))return"array";if(className=="[object Function]"||typeof value.call!=
"undefined"&&typeof value.propertyIsEnumerable!="undefined"&&!value.propertyIsEnumerable("call"))return"function"}else return"null";else if(s=="function"&&typeof value.call=="undefined")return"object";return s};goog.isDef=function(val){return val!==undefined};goog.isNull=function(val){return val===null};goog.isDefAndNotNull=function(val){return val!=null};goog.isArray=function(val){return goog.typeOf(val)=="array"};
goog.isArrayLike=function(val){var type=goog.typeOf(val);return type=="array"||type=="object"&&typeof val.length=="number"};goog.isDateLike=function(val){return goog.isObject(val)&&typeof val.getFullYear=="function"};goog.isString=function(val){return typeof val=="string"};goog.isBoolean=function(val){return typeof val=="boolean"};goog.isNumber=function(val){return typeof val=="number"};goog.isFunction=function(val){return goog.typeOf(val)=="function"};
goog.isObject=function(val){var type=typeof val;return type=="object"&&val!=null||type=="function"};goog.getUid=function(obj){return obj[goog.UID_PROPERTY_]||(obj[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(obj){if("removeAttribute"in obj)obj.removeAttribute(goog.UID_PROPERTY_);try{delete obj[goog.UID_PROPERTY_]}catch(ex){}};goog.UID_PROPERTY_="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;
goog.cloneObject=function(obj){var type=goog.typeOf(obj);if(type=="object"||type=="array"){if(obj.clone)return obj.clone();var clone=type=="array"?[]:{};for(var key in obj)clone[key]=goog.cloneObject(obj[key]);return clone}return obj};goog.bindNative_=function(fn,selfObj,var_args){return fn.call.apply(fn.bind,arguments)};
goog.bindJs_=function(fn,selfObj,var_args){if(!fn)throw new Error;if(arguments.length>2){var boundArgs=Array.prototype.slice.call(arguments,2);return function(){var newArgs=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(newArgs,boundArgs);return fn.apply(selfObj,newArgs)}}else return function(){return fn.apply(selfObj,arguments)}};
goog.bind=function(fn,selfObj,var_args){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1)goog.bind=goog.bindNative_;else goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};goog.partial=function(fn,var_args){var args=Array.prototype.slice.call(arguments,1);return function(){var newArgs=Array.prototype.slice.call(arguments);newArgs.unshift.apply(newArgs,args);return fn.apply(this,newArgs)}};
goog.mixin=function(target,source){for(var x in source)target[x]=source[x]};goog.now=Date.now||function(){return+new Date};
goog.globalEval=function(script){if(goog.global.execScript)goog.global.execScript(script,"JavaScript");else if(goog.global.eval){if(goog.evalWorksForGlobals_==null){goog.global.eval("var _et_ = 1;");if(typeof goog.global["_et_"]!="undefined"){delete goog.global["_et_"];goog.evalWorksForGlobals_=true}else goog.evalWorksForGlobals_=false}if(goog.evalWorksForGlobals_)goog.global.eval(script);else{var doc=goog.global.document;var scriptElt=doc.createElement("script");scriptElt.type="text/javascript";
scriptElt.defer=false;scriptElt.appendChild(doc.createTextNode(script));doc.body.appendChild(scriptElt);doc.body.removeChild(scriptElt)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.cssNameMapping_;goog.cssNameMappingStyle_;
goog.getCssName=function(className,opt_modifier){var getMapping=function(cssName){return goog.cssNameMapping_[cssName]||cssName};var renameByParts=function(cssName){var parts=cssName.split("-");var mapped=[];for(var i=0;i<parts.length;i++)mapped.push(getMapping(parts[i]));return mapped.join("-")};var rename;if(goog.cssNameMapping_)rename=goog.cssNameMappingStyle_=="BY_WHOLE"?getMapping:renameByParts;else rename=function(a){return a};if(opt_modifier)return className+"-"+rename(opt_modifier);else return rename(className)};
goog.setCssNameMapping=function(mapping,opt_style){goog.cssNameMapping_=mapping;goog.cssNameMappingStyle_=opt_style};goog.global.CLOSURE_CSS_NAME_MAPPING;if(!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING)goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING;goog.getMsg=function(str,opt_values){var values=opt_values||{};for(var key in values){var value=(""+values[key]).replace(/\$/g,"$$$$");str=str.replace(new RegExp("\\{\\$"+key+"\\}","gi"),value)}return str};
goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(publicPath,object,opt_objectToExportTo){goog.exportPath_(publicPath,object,opt_objectToExportTo)};goog.exportProperty=function(object,publicName,symbol){object[publicName]=symbol};goog.inherits=function(childCtor,parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;childCtor.superClass_=parentCtor.prototype;childCtor.prototype=new tempCtor;childCtor.prototype.constructor=childCtor};
goog.base=function(me,opt_methodName,var_args){var caller=arguments.callee.caller;if(caller.superClass_)return caller.superClass_.constructor.apply(me,Array.prototype.slice.call(arguments,1));var args=Array.prototype.slice.call(arguments,2);var foundCaller=false;for(var ctor=me.constructor;ctor;ctor=ctor.superClass_&&ctor.superClass_.constructor)if(ctor.prototype[opt_methodName]===caller)foundCaller=true;else if(foundCaller)return ctor.prototype[opt_methodName].apply(me,args);if(me[opt_methodName]===
caller)return me.constructor.prototype[opt_methodName].apply(me,args);else throw Error("goog.base called from a method of one name "+"to a method of a different name");};goog.scope=function(fn){fn.call(goog.global)};goog.provide("goog.debug.errorHandlerWeakDep");goog.debug.errorHandlerWeakDep={protectEntryPoint:function(fn,opt_tracers){return fn}};goog.provide("goog.string");goog.provide("goog.string.Unicode");goog.string.Unicode={NBSP:"\u00a0"};goog.string.startsWith=function(str,prefix){return str.lastIndexOf(prefix,0)==0};goog.string.endsWith=function(str,suffix){var l=str.length-suffix.length;return l>=0&&str.indexOf(suffix,l)==l};goog.string.caseInsensitiveStartsWith=function(str,prefix){return goog.string.caseInsensitiveCompare(prefix,str.substr(0,prefix.length))==0};
goog.string.caseInsensitiveEndsWith=function(str,suffix){return goog.string.caseInsensitiveCompare(suffix,str.substr(str.length-suffix.length,suffix.length))==0};goog.string.subs=function(str,var_args){for(var i=1;i<arguments.length;i++){var replacement=String(arguments[i]).replace(/\$/g,"$$$$");str=str.replace(/\%s/,replacement)}return str};goog.string.collapseWhitespace=function(str){return str.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmpty=function(str){return/^[\s\xa0]*$/.test(str)};
goog.string.isEmptySafe=function(str){return goog.string.isEmpty(goog.string.makeSafe(str))};goog.string.isBreakingWhitespace=function(str){return!/[^\t\n\r ]/.test(str)};goog.string.isAlpha=function(str){return!/[^a-zA-Z]/.test(str)};goog.string.isNumeric=function(str){return!/[^0-9]/.test(str)};goog.string.isAlphaNumeric=function(str){return!/[^a-zA-Z0-9]/.test(str)};goog.string.isSpace=function(ch){return ch==" "};
goog.string.isUnicodeChar=function(ch){return ch.length==1&&ch>=" "&&ch<="~"||ch>="\u0080"&&ch<="\ufffd"};goog.string.stripNewlines=function(str){return str.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(str){return str.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(str){return str.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(str){return str.replace(/\xa0|[ \t]+/g," ")};
goog.string.collapseBreakingSpaces=function(str){return str.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=function(str){return str.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};goog.string.trimLeft=function(str){return str.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(str){return str.replace(/[\s\xa0]+$/,"")};
goog.string.caseInsensitiveCompare=function(str1,str2){var test1=String(str1).toLowerCase();var test2=String(str2).toLowerCase();if(test1<test2)return-1;else if(test1==test2)return 0;else return 1};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;
goog.string.numerateCompare=function(str1,str2){if(str1==str2)return 0;if(!str1)return-1;if(!str2)return 1;var tokens1=str1.toLowerCase().match(goog.string.numerateCompareRegExp_);var tokens2=str2.toLowerCase().match(goog.string.numerateCompareRegExp_);var count=Math.min(tokens1.length,tokens2.length);for(var i=0;i<count;i++){var a=tokens1[i];var b=tokens2[i];if(a!=b){var num1=parseInt(a,10);if(!isNaN(num1)){var num2=parseInt(b,10);if(!isNaN(num2)&&num1-num2)return num1-num2}return a<b?-1:1}}if(tokens1.length!=
tokens2.length)return tokens1.length-tokens2.length;return str1<str2?-1:1};goog.string.urlEncode=function(str){return encodeURIComponent(String(str))};goog.string.urlDecode=function(str){return decodeURIComponent(str.replace(/\+/g," "))};goog.string.newLineToBr=function(str,opt_xml){return str.replace(/(\r\n|\r|\n)/g,opt_xml?"<br />":"<br>")};
goog.string.htmlEscape=function(str,opt_isLikelyToContainHtmlChars){if(opt_isLikelyToContainHtmlChars)return str.replace(goog.string.amperRe_,"&amp;").replace(goog.string.ltRe_,"&lt;").replace(goog.string.gtRe_,"&gt;").replace(goog.string.quotRe_,"&quot;");else{if(!goog.string.allRe_.test(str))return str;if(str.indexOf("&")!=-1)str=str.replace(goog.string.amperRe_,"&amp;");if(str.indexOf("<")!=-1)str=str.replace(goog.string.ltRe_,"&lt;");if(str.indexOf(">")!=-1)str=str.replace(goog.string.gtRe_,"&gt;");
if(str.indexOf('"')!=-1)str=str.replace(goog.string.quotRe_,"&quot;");return str}};goog.string.amperRe_=/&/g;goog.string.ltRe_=/</g;goog.string.gtRe_=/>/g;goog.string.quotRe_=/\"/g;goog.string.allRe_=/[&<>\"]/;goog.string.unescapeEntities=function(str){if(goog.string.contains(str,"&"))if("document"in goog.global)return goog.string.unescapeEntitiesUsingDom_(str);else return goog.string.unescapePureXmlEntities_(str);return str};
goog.string.unescapeEntitiesUsingDom_=function(str){var seen={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};var div=document.createElement("div");return str.replace(goog.string.HTML_ENTITY_PATTERN_,function(s,entity){var value=seen[s];if(value)return value;if(entity.charAt(0)=="#"){var n=Number("0"+entity.substr(1));if(!isNaN(n))value=String.fromCharCode(n)}if(!value){div.innerHTML=s+" ";value=div.firstChild.nodeValue.slice(0,-1)}return seen[s]=value})};
goog.string.unescapePureXmlEntities_=function(str){return str.replace(/&([^;]+);/g,function(s,entity){switch(entity){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:if(entity.charAt(0)=="#"){var n=Number("0"+entity.substr(1));if(!isNaN(n))return String.fromCharCode(n)}return s}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(str,opt_xml){return goog.string.newLineToBr(str.replace(/  /g," &#160;"),opt_xml)};
goog.string.stripQuotes=function(str,quoteChars){var length=quoteChars.length;for(var i=0;i<length;i++){var quoteChar=length==1?quoteChars:quoteChars.charAt(i);if(str.charAt(0)==quoteChar&&str.charAt(str.length-1)==quoteChar)return str.substring(1,str.length-1)}return str};
goog.string.truncate=function(str,chars,opt_protectEscapedCharacters){if(opt_protectEscapedCharacters)str=goog.string.unescapeEntities(str);if(str.length>chars)str=str.substring(0,chars-3)+"...";if(opt_protectEscapedCharacters)str=goog.string.htmlEscape(str);return str};
goog.string.truncateMiddle=function(str,chars,opt_protectEscapedCharacters,opt_trailingChars){if(opt_protectEscapedCharacters)str=goog.string.unescapeEntities(str);if(opt_trailingChars&&str.length>chars){if(opt_trailingChars>chars)opt_trailingChars=chars;var endPoint=str.length-opt_trailingChars;var startPoint=chars-opt_trailingChars;str=str.substring(0,startPoint)+"..."+str.substring(endPoint)}else if(str.length>chars){var half=Math.floor(chars/2);var endPos=str.length-half;half+=chars%2;str=str.substring(0,
half)+"..."+str.substring(endPos)}if(opt_protectEscapedCharacters)str=goog.string.htmlEscape(str);return str};goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};
goog.string.quote=function(s){s=String(s);if(s.quote)return s.quote();else{var sb=['"'];for(var i=0;i<s.length;i++){var ch=s.charAt(i);var cc=ch.charCodeAt(0);sb[i+1]=goog.string.specialEscapeChars_[ch]||(cc>31&&cc<127?ch:goog.string.escapeChar(ch))}sb.push('"');return sb.join("")}};goog.string.escapeString=function(str){var sb=[];for(var i=0;i<str.length;i++)sb[i]=goog.string.escapeChar(str.charAt(i));return sb.join("")};
goog.string.escapeChar=function(c){if(c in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[c];if(c in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[c]=goog.string.specialEscapeChars_[c];var rv=c;var cc=c.charCodeAt(0);if(cc>31&&cc<127)rv=c;else{if(cc<256){rv="\\x";if(cc<16||cc>256)rv+="0"}else{rv="\\u";if(cc<4096)rv+="0"}rv+=cc.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[c]=rv};
goog.string.toMap=function(s){var rv={};for(var i=0;i<s.length;i++)rv[s.charAt(i)]=true;return rv};goog.string.contains=function(s,ss){return s.indexOf(ss)!=-1};goog.string.countOf=function(s,ss){return s&&ss?s.split(ss).length-1:0};goog.string.removeAt=function(s,index,stringLength){var resultStr=s;if(index>=0&&index<s.length&&stringLength>0)resultStr=s.substr(0,index)+s.substr(index+stringLength,s.length-index-stringLength);return resultStr};
goog.string.remove=function(s,ss){var re=new RegExp(goog.string.regExpEscape(ss),"");return s.replace(re,"")};goog.string.removeAll=function(s,ss){var re=new RegExp(goog.string.regExpEscape(ss),"g");return s.replace(re,"")};goog.string.regExpEscape=function(s){return String(s).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(string,length){return(new Array(length+1)).join(string)};
goog.string.padNumber=function(num,length,opt_precision){var s=goog.isDef(opt_precision)?num.toFixed(opt_precision):String(num);var index=s.indexOf(".");if(index==-1)index=s.length;return goog.string.repeat("0",Math.max(0,length-index))+s};goog.string.makeSafe=function(obj){return obj==null?"":String(obj)};goog.string.buildString=function(var_args){return Array.prototype.join.call(arguments,"")};
goog.string.getRandomString=function(){var x=2147483648;return Math.floor(Math.random()*x).toString(36)+Math.abs(Math.floor(Math.random()*x)^goog.now()).toString(36)};
goog.string.compareVersions=function(version1,version2){var order=0;var v1Subs=goog.string.trim(String(version1)).split(".");var v2Subs=goog.string.trim(String(version2)).split(".");var subCount=Math.max(v1Subs.length,v2Subs.length);for(var subIdx=0;order==0&&subIdx<subCount;subIdx++){var v1Sub=v1Subs[subIdx]||"";var v2Sub=v2Subs[subIdx]||"";var v1CompParser=new RegExp("(\\d*)(\\D*)","g");var v2CompParser=new RegExp("(\\d*)(\\D*)","g");do{var v1Comp=v1CompParser.exec(v1Sub)||["","",""];var v2Comp=
v2CompParser.exec(v2Sub)||["","",""];if(v1Comp[0].length==0&&v2Comp[0].length==0)break;var v1CompNum=v1Comp[1].length==0?0:parseInt(v1Comp[1],10);var v2CompNum=v2Comp[1].length==0?0:parseInt(v2Comp[1],10);order=goog.string.compareElements_(v1CompNum,v2CompNum)||goog.string.compareElements_(v1Comp[2].length==0,v2Comp[2].length==0)||goog.string.compareElements_(v1Comp[2],v2Comp[2])}while(order==0)}return order};
goog.string.compareElements_=function(left,right){if(left<right)return-1;else if(left>right)return 1;return 0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(str){var result=0;for(var i=0;i<str.length;++i){result=31*result+str.charCodeAt(i);result%=goog.string.HASHCODE_MAX_}return result};goog.string.uniqueStringCounter_=Math.random()*2147483648|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};
goog.string.toNumber=function(str){var num=Number(str);if(num==0&&goog.string.isEmpty(str))return NaN;return num};goog.string.toCamelCase=function(str){return String(str).replace(/\-([a-z])/g,function(all,match){return match.toUpperCase()})};goog.string.toSelectorCase=function(str){return String(str).replace(/([A-Z])/g,"-$1").toLowerCase()};
goog.string.toTitleCase=function(str,opt_delimiters){var delimiters=goog.isString(opt_delimiters)?goog.string.regExpEscape(opt_delimiters):"\\s";delimiters=delimiters?"|["+delimiters+"]+":"";var regexp=new RegExp("(^"+delimiters+")([a-z])","g");return str.replace(regexp,function(all,p1,p2){return p1+p2.toUpperCase()})};goog.string.parseInt=function(value){if(isFinite(value))value=String(value);if(goog.isString(value))return/^\s*-?0x/i.test(value)?parseInt(value,16):parseInt(value,10);return NaN};goog.provide("goog.userAgent");goog.require("goog.string");goog.userAgent.ASSUME_IE=false;goog.userAgent.ASSUME_GECKO=false;goog.userAgent.ASSUME_WEBKIT=false;goog.userAgent.ASSUME_MOBILE_WEBKIT=false;goog.userAgent.ASSUME_OPERA=false;goog.userAgent.ASSUME_ANY_VERSION=false;goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;
goog.userAgent.getUserAgentString=function(){return goog.global["navigator"]?goog.global["navigator"].userAgent:null};goog.userAgent.getNavigator=function(){return goog.global["navigator"]};
goog.userAgent.init_=function(){goog.userAgent.detectedOpera_=false;goog.userAgent.detectedIe_=false;goog.userAgent.detectedWebkit_=false;goog.userAgent.detectedMobile_=false;goog.userAgent.detectedGecko_=false;var ua;if(!goog.userAgent.BROWSER_KNOWN_&&(ua=goog.userAgent.getUserAgentString())){var navigator=goog.userAgent.getNavigator();goog.userAgent.detectedOpera_=ua.indexOf("Opera")==0;goog.userAgent.detectedIe_=!goog.userAgent.detectedOpera_&&ua.indexOf("MSIE")!=-1;goog.userAgent.detectedWebkit_=
!goog.userAgent.detectedOpera_&&ua.indexOf("WebKit")!=-1;goog.userAgent.detectedMobile_=goog.userAgent.detectedWebkit_&&ua.indexOf("Mobile")!=-1;goog.userAgent.detectedGecko_=!goog.userAgent.detectedOpera_&&!goog.userAgent.detectedWebkit_&&navigator.product=="Gecko"}};if(!goog.userAgent.BROWSER_KNOWN_)goog.userAgent.init_();goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.userAgent.detectedOpera_;
goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.userAgent.detectedIe_;goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.userAgent.detectedGecko_;goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.userAgent.detectedWebkit_;goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.detectedMobile_;goog.userAgent.SAFARI=goog.userAgent.WEBKIT;
goog.userAgent.determinePlatform_=function(){var navigator=goog.userAgent.getNavigator();return navigator&&navigator.platform||""};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.userAgent.ASSUME_MAC=false;goog.userAgent.ASSUME_WINDOWS=false;goog.userAgent.ASSUME_LINUX=false;goog.userAgent.ASSUME_X11=false;goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11;
goog.userAgent.initPlatform_=function(){goog.userAgent.detectedMac_=goog.string.contains(goog.userAgent.PLATFORM,"Mac");goog.userAgent.detectedWindows_=goog.string.contains(goog.userAgent.PLATFORM,"Win");goog.userAgent.detectedLinux_=goog.string.contains(goog.userAgent.PLATFORM,"Linux");goog.userAgent.detectedX11_=!!goog.userAgent.getNavigator()&&goog.string.contains(goog.userAgent.getNavigator()["appVersion"]||"","X11")};if(!goog.userAgent.PLATFORM_KNOWN_)goog.userAgent.initPlatform_();
goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.userAgent.detectedMac_;goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.userAgent.detectedWindows_;goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.detectedLinux_;goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.detectedX11_;
goog.userAgent.determineVersion_=function(){var version="",re;if(goog.userAgent.OPERA&&goog.global["opera"]){var operaVersion=goog.global["opera"].version;version=typeof operaVersion=="function"?operaVersion():operaVersion}else{if(goog.userAgent.GECKO)re=/rv\:([^\);]+)(\)|;)/;else if(goog.userAgent.IE)re=/MSIE\s+([^\);]+)(\)|;)/;else if(goog.userAgent.WEBKIT)re=/WebKit\/(\S+)/;if(re){var arr=re.exec(goog.userAgent.getUserAgentString());version=arr?arr[1]:""}}if(goog.userAgent.IE){var docMode=goog.userAgent.getDocumentMode_();
if(docMode>parseFloat(version))return String(docMode)}return version};goog.userAgent.getDocumentMode_=function(){var doc=goog.global["document"];return doc?doc["documentMode"]:undefined};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(v1,v2){return goog.string.compareVersions(v1,v2)};goog.userAgent.isVersionCache_={};
goog.userAgent.isVersion=function(version){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionCache_[version]||(goog.userAgent.isVersionCache_[version]=goog.string.compareVersions(goog.userAgent.VERSION,version)>=0)};goog.userAgent.isDocumentMode=function(documentMode){return goog.userAgent.IE&&goog.userAgent.DOCUMENT_MODE>=documentMode};
goog.userAgent.DOCUMENT_MODE=function(){var doc=goog.global["document"];if(!doc||!goog.userAgent.IE)return undefined;var mode=goog.userAgent.getDocumentMode_();return mode||(doc["compatMode"]=="CSS1Compat"?parseInt(goog.userAgent.VERSION,10):5)}();goog.provide("goog.events.Listener");goog.events.Listener=function(){if(goog.events.Listener.ENABLE_MONITORING)this.creationStack=(new Error).stack};goog.events.Listener.counter_=0;goog.events.Listener.ENABLE_MONITORING=false;goog.events.Listener.prototype.isFunctionListener_;goog.events.Listener.prototype.listener;goog.events.Listener.prototype.proxy;goog.events.Listener.prototype.src;goog.events.Listener.prototype.type;goog.events.Listener.prototype.capture;goog.events.Listener.prototype.handler;
goog.events.Listener.prototype.key=0;goog.events.Listener.prototype.removed=false;goog.events.Listener.prototype.callOnce=false;goog.events.Listener.prototype.creationStack;
goog.events.Listener.prototype.init=function(listener,proxy,src,type,capture,opt_handler){if(goog.isFunction(listener))this.isFunctionListener_=true;else if(listener&&listener.handleEvent&&goog.isFunction(listener.handleEvent))this.isFunctionListener_=false;else throw Error("Invalid listener argument");this.listener=listener;this.proxy=proxy;this.src=src;this.type=type;this.capture=!!capture;this.handler=opt_handler;this.callOnce=false;this.key=++goog.events.Listener.counter_;this.removed=false};
goog.events.Listener.prototype.handleEvent=function(eventObject){if(this.isFunctionListener_)return this.listener.call(this.handler||this.src,eventObject);return this.listener.handleEvent.call(this.listener,eventObject)};goog.provide("goog.object");goog.object.forEach=function(obj,f,opt_obj){for(var key in obj)f.call(opt_obj,obj[key],key,obj)};goog.object.filter=function(obj,f,opt_obj){var res={};for(var key in obj)if(f.call(opt_obj,obj[key],key,obj))res[key]=obj[key];return res};goog.object.map=function(obj,f,opt_obj){var res={};for(var key in obj)res[key]=f.call(opt_obj,obj[key],key,obj);return res};goog.object.some=function(obj,f,opt_obj){for(var key in obj)if(f.call(opt_obj,obj[key],key,obj))return true;return false};
goog.object.every=function(obj,f,opt_obj){for(var key in obj)if(!f.call(opt_obj,obj[key],key,obj))return false;return true};goog.object.getCount=function(obj){var rv=0;for(var key in obj)rv++;return rv};goog.object.getAnyKey=function(obj){for(var key in obj)return key};goog.object.getAnyValue=function(obj){for(var key in obj)return obj[key]};goog.object.contains=function(obj,val){return goog.object.containsValue(obj,val)};
goog.object.getValues=function(obj){var res=[];var i=0;for(var key in obj)res[i++]=obj[key];return res};goog.object.getKeys=function(obj){var res=[];var i=0;for(var key in obj)res[i++]=key;return res};goog.object.getValueByKeys=function(obj,var_args){var isArrayLike=goog.isArrayLike(var_args);var keys=isArrayLike?var_args:arguments;for(var i=isArrayLike?0:1;i<keys.length;i++){obj=obj[keys[i]];if(!goog.isDef(obj))break}return obj};goog.object.containsKey=function(obj,key){return key in obj};
goog.object.containsValue=function(obj,val){for(var key in obj)if(obj[key]==val)return true;return false};goog.object.findKey=function(obj,f,opt_this){for(var key in obj)if(f.call(opt_this,obj[key],key,obj))return key;return undefined};goog.object.findValue=function(obj,f,opt_this){var key=goog.object.findKey(obj,f,opt_this);return key&&obj[key]};goog.object.isEmpty=function(obj){for(var key in obj)return false;return true};goog.object.clear=function(obj){for(var i in obj)delete obj[i]};
goog.object.remove=function(obj,key){var rv;if(rv=key in obj)delete obj[key];return rv};goog.object.add=function(obj,key,val){if(key in obj)throw Error('The object already contains the key "'+key+'"');goog.object.set(obj,key,val)};goog.object.get=function(obj,key,opt_val){if(key in obj)return obj[key];return opt_val};goog.object.set=function(obj,key,value){obj[key]=value};goog.object.setIfUndefined=function(obj,key,value){return key in obj?obj[key]:obj[key]=value};
goog.object.clone=function(obj){var res={};for(var key in obj)res[key]=obj[key];return res};goog.object.unsafeClone=function(obj){var type=goog.typeOf(obj);if(type=="object"||type=="array"){if(obj.clone)return obj.clone();var clone=type=="array"?[]:{};for(var key in obj)clone[key]=goog.object.unsafeClone(obj[key]);return clone}return obj};goog.object.transpose=function(obj){var transposed={};for(var key in obj)transposed[obj[key]]=key;return transposed};
goog.object.PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];goog.object.extend=function(target,var_args){var key,source;for(var i=1;i<arguments.length;i++){source=arguments[i];for(key in source)target[key]=source[key];for(var j=0;j<goog.object.PROTOTYPE_FIELDS_.length;j++){key=goog.object.PROTOTYPE_FIELDS_[j];if(Object.prototype.hasOwnProperty.call(source,key))target[key]=source[key]}}};
goog.object.create=function(var_args){var argLength=arguments.length;if(argLength==1&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(argLength%2)throw Error("Uneven number of arguments");var rv={};for(var i=0;i<argLength;i+=2)rv[arguments[i]]=arguments[i+1];return rv};
goog.object.createSet=function(var_args){var argLength=arguments.length;if(argLength==1&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);var rv={};for(var i=0;i<argLength;i++)rv[arguments[i]]=true;return rv};goog.object.createImmutableView=function(obj){var result=obj;if(Object.isFrozen&&!Object.isFrozen(obj)){result=Object.create(obj);Object.freeze(result)}return result};goog.object.isImmutableView=function(obj){return!!Object.isFrozen&&Object.isFrozen(obj)};goog.provide("goog.events.BrowserFeature");goog.require("goog.userAgent");
goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentMode(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentMode(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersion("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersion("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersion("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersion("8")||goog.userAgent.OPERA&&goog.userAgent.isVersion("9.5")||
goog.userAgent.WEBKIT&&goog.userAgent.isVersion("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersion("8")||goog.userAgent.IE&&!goog.userAgent.isVersion("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global["document"]&&document.documentElement&&"ontouchstart"in document.documentElement)||!!(goog.global["navigator"]&&goog.global["navigator"]["msMaxTouchPoints"])};goog.provide("goog.debug.Error");goog.debug.Error=function(opt_msg){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else this.stack=(new Error).stack||"";if(opt_msg)this.message=String(opt_msg)};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.provide("goog.asserts");goog.provide("goog.asserts.AssertionError");goog.require("goog.debug.Error");goog.require("goog.string");goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(messagePattern,messageArgs){messageArgs.unshift(messagePattern);goog.debug.Error.call(this,goog.string.subs.apply(null,messageArgs));messageArgs.shift();this.messagePattern=messagePattern};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);
goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.doAssertFailure_=function(defaultMessage,defaultArgs,givenMessage,givenArgs){var message="Assertion failed";if(givenMessage){message+=": "+givenMessage;var args=givenArgs}else if(defaultMessage){message+=": "+defaultMessage;args=defaultArgs}throw new goog.asserts.AssertionError(""+message,args||[]);};
goog.asserts.assert=function(condition,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!condition)goog.asserts.doAssertFailure_("",null,opt_message,Array.prototype.slice.call(arguments,2));return condition};goog.asserts.fail=function(opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS)throw new goog.asserts.AssertionError("Failure"+(opt_message?": "+opt_message:""),Array.prototype.slice.call(arguments,1));};
goog.asserts.assertNumber=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(value))goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return value};
goog.asserts.assertString=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isString(value))goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return value};
goog.asserts.assertFunction=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(value))goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return value};
goog.asserts.assertObject=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isObject(value))goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return value};
goog.asserts.assertArray=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isArray(value))goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return value};
goog.asserts.assertBoolean=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(value))goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return value};
goog.asserts.assertInstanceof=function(value,type,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!(value instanceof type))goog.asserts.doAssertFailure_("instanceof check failed.",null,opt_message,Array.prototype.slice.call(arguments,3));return value};goog.provide("goog.array");goog.provide("goog.array.ArrayLike");goog.require("goog.asserts");goog.NATIVE_ARRAY_PROTOTYPES=true;goog.array.ArrayLike;goog.array.peek=function(array){return array[array.length-1]};goog.array.ARRAY_PROTOTYPE_=Array.prototype;
goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.indexOf?function(arr,obj,opt_fromIndex){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.indexOf.call(arr,obj,opt_fromIndex)}:function(arr,obj,opt_fromIndex){var fromIndex=opt_fromIndex==null?0:opt_fromIndex<0?Math.max(0,arr.length+opt_fromIndex):opt_fromIndex;if(goog.isString(arr)){if(!goog.isString(obj)||obj.length!=1)return-1;return arr.indexOf(obj,fromIndex)}for(var i=fromIndex;i<arr.length;i++)if(i in
arr&&arr[i]===obj)return i;return-1};
goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.lastIndexOf?function(arr,obj,opt_fromIndex){goog.asserts.assert(arr.length!=null);var fromIndex=opt_fromIndex==null?arr.length-1:opt_fromIndex;return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(arr,obj,fromIndex)}:function(arr,obj,opt_fromIndex){var fromIndex=opt_fromIndex==null?arr.length-1:opt_fromIndex;if(fromIndex<0)fromIndex=Math.max(0,arr.length+fromIndex);if(goog.isString(arr)){if(!goog.isString(obj)||obj.length!=
1)return-1;return arr.lastIndexOf(obj,fromIndex)}for(var i=fromIndex;i>=0;i--)if(i in arr&&arr[i]===obj)return i;return-1};goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.forEach?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);goog.array.ARRAY_PROTOTYPE_.forEach.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++)if(i in arr2)f.call(opt_obj,arr2[i],i,arr)};
goog.array.forEachRight=function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=l-1;i>=0;--i)if(i in arr2)f.call(opt_obj,arr2[i],i,arr)};
goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.filter?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.filter.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var res=[];var resLength=0;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++)if(i in arr2){var val=arr2[i];if(f.call(opt_obj,val,i,arr))res[resLength++]=val}return res};
goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.map?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.map.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var res=new Array(l);var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++)if(i in arr2)res[i]=f.call(opt_obj,arr2[i],i,arr);return res};
goog.array.reduce=function(arr,f,val,opt_obj){if(arr.reduce)if(opt_obj)return arr.reduce(goog.bind(f,opt_obj),val);else return arr.reduce(f,val);var rval=val;goog.array.forEach(arr,function(val,index){rval=f.call(opt_obj,rval,val,index,arr)});return rval};
goog.array.reduceRight=function(arr,f,val,opt_obj){if(arr.reduceRight)if(opt_obj)return arr.reduceRight(goog.bind(f,opt_obj),val);else return arr.reduceRight(f,val);var rval=val;goog.array.forEachRight(arr,function(val,index){rval=f.call(opt_obj,rval,val,index,arr)});return rval};
goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.some?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.some.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++)if(i in arr2&&f.call(opt_obj,arr2[i],i,arr))return true;return false};
goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.every?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.every.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++)if(i in arr2&&!f.call(opt_obj,arr2[i],i,arr))return false;return true};
goog.array.count=function(arr,f,opt_obj){var count=0;goog.array.forEach(arr,function(element,index,arr){if(f.call(opt_obj,element,index,arr))++count},opt_obj);return count};goog.array.find=function(arr,f,opt_obj){var i=goog.array.findIndex(arr,f,opt_obj);return i<0?null:goog.isString(arr)?arr.charAt(i):arr[i]};goog.array.findIndex=function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++)if(i in arr2&&f.call(opt_obj,arr2[i],i,arr))return i;return-1};
goog.array.findRight=function(arr,f,opt_obj){var i=goog.array.findIndexRight(arr,f,opt_obj);return i<0?null:goog.isString(arr)?arr.charAt(i):arr[i]};goog.array.findIndexRight=function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=l-1;i>=0;i--)if(i in arr2&&f.call(opt_obj,arr2[i],i,arr))return i;return-1};goog.array.contains=function(arr,obj){return goog.array.indexOf(arr,obj)>=0};goog.array.isEmpty=function(arr){return arr.length==0};
goog.array.clear=function(arr){if(!goog.isArray(arr))for(var i=arr.length-1;i>=0;i--)delete arr[i];arr.length=0};goog.array.insert=function(arr,obj){if(!goog.array.contains(arr,obj))arr.push(obj)};goog.array.insertAt=function(arr,obj,opt_i){goog.array.splice(arr,opt_i,0,obj)};goog.array.insertArrayAt=function(arr,elementsToAdd,opt_i){goog.partial(goog.array.splice,arr,opt_i,0).apply(null,elementsToAdd)};
goog.array.insertBefore=function(arr,obj,opt_obj2){var i;if(arguments.length==2||(i=goog.array.indexOf(arr,opt_obj2))<0)arr.push(obj);else goog.array.insertAt(arr,obj,i)};goog.array.remove=function(arr,obj){var i=goog.array.indexOf(arr,obj);var rv;if(rv=i>=0)goog.array.removeAt(arr,i);return rv};goog.array.removeAt=function(arr,i){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.splice.call(arr,i,1).length==1};
goog.array.removeIf=function(arr,f,opt_obj){var i=goog.array.findIndex(arr,f,opt_obj);if(i>=0){goog.array.removeAt(arr,i);return true}return false};goog.array.concat=function(var_args){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.toArray=function(object){var length=object.length;if(length>0){var rv=new Array(length);for(var i=0;i<length;i++)rv[i]=object[i];return rv}return[]};goog.array.clone=goog.array.toArray;
goog.array.extend=function(arr1,var_args){for(var i=1;i<arguments.length;i++){var arr2=arguments[i];var isArrayLike;if(goog.isArray(arr2)||(isArrayLike=goog.isArrayLike(arr2))&&Object.prototype.hasOwnProperty.call(arr2,"callee"))arr1.push.apply(arr1,arr2);else if(isArrayLike){var len1=arr1.length;var len2=arr2.length;for(var j=0;j<len2;j++)arr1[len1+j]=arr2[j]}else arr1.push(arr2)}};
goog.array.splice=function(arr,index,howMany,var_args){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.splice.apply(arr,goog.array.slice(arguments,1))};goog.array.slice=function(arr,start,opt_end){goog.asserts.assert(arr.length!=null);if(arguments.length<=2)return goog.array.ARRAY_PROTOTYPE_.slice.call(arr,start);else return goog.array.ARRAY_PROTOTYPE_.slice.call(arr,start,opt_end)};
goog.array.removeDuplicates=function(arr,opt_rv){var returnArray=opt_rv||arr;var seen={},cursorInsert=0,cursorRead=0;while(cursorRead<arr.length){var current=arr[cursorRead++];var key=goog.isObject(current)?"o"+goog.getUid(current):(typeof current).charAt(0)+current;if(!Object.prototype.hasOwnProperty.call(seen,key)){seen[key]=true;returnArray[cursorInsert++]=current}}returnArray.length=cursorInsert};
goog.array.binarySearch=function(arr,target,opt_compareFn){return goog.array.binarySearch_(arr,opt_compareFn||goog.array.defaultCompare,false,target)};goog.array.binarySelect=function(arr,evaluator,opt_obj){return goog.array.binarySearch_(arr,evaluator,true,undefined,opt_obj)};
goog.array.binarySearch_=function(arr,compareFn,isEvaluator,opt_target,opt_selfObj){var left=0;var right=arr.length;var found;while(left<right){var middle=left+right>>1;var compareResult;if(isEvaluator)compareResult=compareFn.call(opt_selfObj,arr[middle],middle,arr);else compareResult=compareFn(opt_target,arr[middle]);if(compareResult>0)left=middle+1;else{right=middle;found=!compareResult}}return found?left:~left};
goog.array.sort=function(arr,opt_compareFn){goog.asserts.assert(arr.length!=null);goog.array.ARRAY_PROTOTYPE_.sort.call(arr,opt_compareFn||goog.array.defaultCompare)};
goog.array.stableSort=function(arr,opt_compareFn){for(var i=0;i<arr.length;i++)arr[i]={index:i,value:arr[i]};var valueCompareFn=opt_compareFn||goog.array.defaultCompare;function stableCompareFn(obj1,obj2){return valueCompareFn(obj1.value,obj2.value)||obj1.index-obj2.index}goog.array.sort(arr,stableCompareFn);for(var i=0;i<arr.length;i++)arr[i]=arr[i].value};
goog.array.sortObjectsByKey=function(arr,key,opt_compareFn){var compare=opt_compareFn||goog.array.defaultCompare;goog.array.sort(arr,function(a,b){return compare(a[key],b[key])})};goog.array.isSorted=function(arr,opt_compareFn,opt_strict){var compare=opt_compareFn||goog.array.defaultCompare;for(var i=1;i<arr.length;i++){var compareResult=compare(arr[i-1],arr[i]);if(compareResult>0||compareResult==0&&opt_strict)return false}return true};
goog.array.equals=function(arr1,arr2,opt_equalsFn){if(!goog.isArrayLike(arr1)||!goog.isArrayLike(arr2)||arr1.length!=arr2.length)return false;var l=arr1.length;var equalsFn=opt_equalsFn||goog.array.defaultCompareEquality;for(var i=0;i<l;i++)if(!equalsFn(arr1[i],arr2[i]))return false;return true};goog.array.compare=function(arr1,arr2,opt_equalsFn){return goog.array.equals(arr1,arr2,opt_equalsFn)};
goog.array.compare3=function(arr1,arr2,opt_compareFn){var compare=opt_compareFn||goog.array.defaultCompare;var l=Math.min(arr1.length,arr2.length);for(var i=0;i<l;i++){var result=compare(arr1[i],arr2[i]);if(result!=0)return result}return goog.array.defaultCompare(arr1.length,arr2.length)};goog.array.defaultCompare=function(a,b){return a>b?1:a<b?-1:0};goog.array.defaultCompareEquality=function(a,b){return a===b};
goog.array.binaryInsert=function(array,value,opt_compareFn){var index=goog.array.binarySearch(array,value,opt_compareFn);if(index<0){goog.array.insertAt(array,value,-(index+1));return true}return false};goog.array.binaryRemove=function(array,value,opt_compareFn){var index=goog.array.binarySearch(array,value,opt_compareFn);return index>=0?goog.array.removeAt(array,index):false};
goog.array.bucket=function(array,sorter){var buckets={};for(var i=0;i<array.length;i++){var value=array[i];var key=sorter(value,i,array);if(goog.isDef(key)){var bucket=buckets[key]||(buckets[key]=[]);bucket.push(value)}}return buckets};goog.array.toObject=function(arr,keyFunc,opt_obj){var ret={};goog.array.forEach(arr,function(element,index){ret[keyFunc.call(opt_obj,element,index,arr)]=element});return ret};goog.array.repeat=function(value,n){var array=[];for(var i=0;i<n;i++)array[i]=value;return array};
goog.array.flatten=function(var_args){var result=[];for(var i=0;i<arguments.length;i++){var element=arguments[i];if(goog.isArray(element))result.push.apply(result,goog.array.flatten.apply(null,element));else result.push(element)}return result};goog.array.rotate=function(array,n){goog.asserts.assert(array.length!=null);if(array.length){n%=array.length;if(n>0)goog.array.ARRAY_PROTOTYPE_.unshift.apply(array,array.splice(-n,n));else if(n<0)goog.array.ARRAY_PROTOTYPE_.push.apply(array,array.splice(0,-n))}return array};
goog.array.zip=function(var_args){if(!arguments.length)return[];var result=[];for(var i=0;true;i++){var value=[];for(var j=0;j<arguments.length;j++){var arr=arguments[j];if(i>=arr.length)return result;value.push(arr[i])}result.push(value)}};goog.array.shuffle=function(arr,opt_randFn){var randFn=opt_randFn||Math.random;for(var i=arr.length-1;i>0;i--){var j=Math.floor(randFn()*(i+1));var tmp=arr[i];arr[i]=arr[j];arr[j]=tmp}};goog.provide("goog.debug.EntryPointMonitor");goog.provide("goog.debug.entryPointRegistry");goog.require("goog.asserts");goog.debug.EntryPointMonitor=function(){};goog.debug.EntryPointMonitor.prototype.wrap;goog.debug.EntryPointMonitor.prototype.unwrap;goog.debug.entryPointRegistry.refList_=[];goog.debug.entryPointRegistry.monitors_=[];goog.debug.entryPointRegistry.monitorsMayExist_=false;
goog.debug.entryPointRegistry.register=function(callback){goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=callback;if(goog.debug.entryPointRegistry.monitorsMayExist_){var monitors=goog.debug.entryPointRegistry.monitors_;for(var i=0;i<monitors.length;i++)callback(goog.bind(monitors[i].wrap,monitors[i]))}};
goog.debug.entryPointRegistry.monitorAll=function(monitor){goog.debug.entryPointRegistry.monitorsMayExist_=true;var transformer=goog.bind(monitor.wrap,monitor);for(var i=0;i<goog.debug.entryPointRegistry.refList_.length;i++)goog.debug.entryPointRegistry.refList_[i](transformer);goog.debug.entryPointRegistry.monitors_.push(monitor)};
goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(monitor){var monitors=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(monitor==monitors[monitors.length-1],"Only the most recent monitor can be unwrapped.");var transformer=goog.bind(monitor.unwrap,monitor);for(var i=0;i<goog.debug.entryPointRegistry.refList_.length;i++)goog.debug.entryPointRegistry.refList_[i](transformer);monitors.length--};goog.provide("goog.events.EventWrapper");goog.events.EventWrapper=function(){};goog.events.EventWrapper.prototype.listen=function(src,listener,opt_capt,opt_scope,opt_eventHandler){};goog.events.EventWrapper.prototype.unlisten=function(src,listener,opt_capt,opt_scope,opt_eventHandler){};goog.provide("goog.events.EventType");goog.require("goog.userAgent");
goog.events.EventType={CLICK:"click",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",SELECTSTART:"selectstart",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",
DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONTEXTMENU:"contextmenu",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",
CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",TRANSITIONEND:goog.userAgent.WEBKIT?"webkitTransitionEnd":goog.userAgent.OPERA?"oTransitionEnd":"transitionend",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",
MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROVER:"MSPointerOver",MSPOINTEROUT:"MSPointerOut",MSPOINTERUP:"MSPointerUp"};goog.provide("goog.disposable.IDisposable");goog.disposable.IDisposable=function(){};goog.disposable.IDisposable.prototype.dispose;goog.disposable.IDisposable.prototype.isDisposed;goog.provide("goog.Disposable");goog.provide("goog.dispose");goog.require("goog.disposable.IDisposable");goog.Disposable=function(){if(goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF){this.creationStack=(new Error).stack;goog.Disposable.instances_[goog.getUid(this)]=this}};goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2};goog.Disposable.MONITORING_MODE=0;goog.Disposable.instances_={};
goog.Disposable.getUndisposedObjects=function(){var ret=[];for(var id in goog.Disposable.instances_)if(goog.Disposable.instances_.hasOwnProperty(id))ret.push(goog.Disposable.instances_[Number(id)]);return ret};goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}};goog.Disposable.prototype.disposed_=false;goog.Disposable.prototype.dependentDisposables_;goog.Disposable.prototype.onDisposeCallbacks_;goog.Disposable.prototype.creationStack;
goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;
goog.Disposable.prototype.dispose=function(){if(!this.disposed_){this.disposed_=true;this.disposeInternal();if(goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF){var uid=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(uid))throw Error(this+" did not call the goog.Disposable base "+"constructor or was disposed of after a clearUndisposedObjects "+"call");delete goog.Disposable.instances_[uid]}}};
goog.Disposable.prototype.registerDisposable=function(disposable){if(!this.dependentDisposables_)this.dependentDisposables_=[];this.dependentDisposables_.push(disposable)};goog.Disposable.prototype.addOnDisposeCallback=function(callback,opt_scope){if(!this.onDisposeCallbacks_)this.onDisposeCallbacks_=[];this.onDisposeCallbacks_.push(goog.bind(callback,opt_scope))};
goog.Disposable.prototype.disposeInternal=function(){if(this.dependentDisposables_)goog.disposeAll.apply(null,this.dependentDisposables_);if(this.onDisposeCallbacks_)while(this.onDisposeCallbacks_.length)this.onDisposeCallbacks_.shift()()};goog.Disposable.isDisposed=function(obj){if(obj&&typeof obj.isDisposed=="function")return obj.isDisposed();return false};goog.dispose=function(obj){if(obj&&typeof obj.dispose=="function")obj.dispose()};
goog.disposeAll=function(var_args){for(var i=0,len=arguments.length;i<len;++i){var disposable=arguments[i];if(goog.isArrayLike(disposable))goog.disposeAll.apply(null,disposable);else goog.dispose(disposable)}};goog.provide("goog.events.Event");goog.require("goog.Disposable");goog.events.Event=function(type,opt_target){this.type=type;this.target=opt_target;this.currentTarget=this.target};goog.events.Event.prototype.disposeInternal=function(){};goog.events.Event.prototype.dispose=function(){};goog.events.Event.prototype.propagationStopped_=false;goog.events.Event.prototype.defaultPrevented=false;goog.events.Event.prototype.returnValue_=true;
goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=true};goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=true;this.returnValue_=false};goog.events.Event.stopPropagation=function(e){e.stopPropagation()};goog.events.Event.preventDefault=function(e){e.preventDefault()};goog.provide("goog.reflect");goog.reflect.object=function(type,object){return object};goog.reflect.sinkValue=function(x){goog.reflect.sinkValue[" "](x);return x};goog.reflect.sinkValue[" "]=goog.nullFunction;goog.reflect.canAccessProperty=function(obj,prop){try{goog.reflect.sinkValue(obj[prop]);return true}catch(e){}return false};goog.provide("goog.events.BrowserEvent");goog.provide("goog.events.BrowserEvent.MouseButton");goog.require("goog.events.BrowserFeature");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.reflect");goog.require("goog.userAgent");goog.events.BrowserEvent=function(opt_e,opt_currentTarget){if(opt_e)this.init(opt_e,opt_currentTarget)};goog.inherits(goog.events.BrowserEvent,goog.events.Event);goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2};
goog.events.BrowserEvent.IEButtonMap=[1,4,2];goog.events.BrowserEvent.prototype.target=null;goog.events.BrowserEvent.prototype.currentTarget;goog.events.BrowserEvent.prototype.relatedTarget=null;goog.events.BrowserEvent.prototype.offsetX=0;goog.events.BrowserEvent.prototype.offsetY=0;goog.events.BrowserEvent.prototype.clientX=0;goog.events.BrowserEvent.prototype.clientY=0;goog.events.BrowserEvent.prototype.screenX=0;goog.events.BrowserEvent.prototype.screenY=0;
goog.events.BrowserEvent.prototype.button=0;goog.events.BrowserEvent.prototype.keyCode=0;goog.events.BrowserEvent.prototype.charCode=0;goog.events.BrowserEvent.prototype.ctrlKey=false;goog.events.BrowserEvent.prototype.altKey=false;goog.events.BrowserEvent.prototype.shiftKey=false;goog.events.BrowserEvent.prototype.metaKey=false;goog.events.BrowserEvent.prototype.state;goog.events.BrowserEvent.prototype.platformModifierKey=false;goog.events.BrowserEvent.prototype.event_=null;
goog.events.BrowserEvent.prototype.init=function(e,opt_currentTarget){var type=this.type=e.type;goog.events.Event.call(this,type);this.target=e.target||e.srcElement;this.currentTarget=opt_currentTarget;var relatedTarget=e.relatedTarget;if(relatedTarget){if(goog.userAgent.GECKO)if(!goog.reflect.canAccessProperty(relatedTarget,"nodeName"))relatedTarget=null}else if(type==goog.events.EventType.MOUSEOVER)relatedTarget=e.fromElement;else if(type==goog.events.EventType.MOUSEOUT)relatedTarget=e.toElement;
this.relatedTarget=relatedTarget;this.offsetX=goog.userAgent.WEBKIT||e.offsetX!==undefined?e.offsetX:e.layerX;this.offsetY=goog.userAgent.WEBKIT||e.offsetY!==undefined?e.offsetY:e.layerY;this.clientX=e.clientX!==undefined?e.clientX:e.pageX;this.clientY=e.clientY!==undefined?e.clientY:e.pageY;this.screenX=e.screenX||0;this.screenY=e.screenY||0;this.button=e.button;this.keyCode=e.keyCode||0;this.charCode=e.charCode||(type=="keypress"?e.keyCode:0);this.ctrlKey=e.ctrlKey;this.altKey=e.altKey;this.shiftKey=
e.shiftKey;this.metaKey=e.metaKey;this.platformModifierKey=goog.userAgent.MAC?e.metaKey:e.ctrlKey;this.state=e.state;this.event_=e;if(e.defaultPrevented)this.preventDefault();delete this.propagationStopped_};
goog.events.BrowserEvent.prototype.isButton=function(button){if(!goog.events.BrowserFeature.HAS_W3C_BUTTON)if(this.type=="click")return button==goog.events.BrowserEvent.MouseButton.LEFT;else return!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[button]);else return this.event_.button==button};goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)};
goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this);if(this.event_.stopPropagation)this.event_.stopPropagation();else this.event_.cancelBubble=true};
goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var be=this.event_;if(!be.preventDefault){be.returnValue=false;if(goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{var VK_F1=112;var VK_F12=123;if(be.ctrlKey||be.keyCode>=VK_F1&&be.keyCode<=VK_F12)be.keyCode=-1}catch(ex){}}else be.preventDefault()};goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_};
goog.events.BrowserEvent.prototype.disposeInternal=function(){};goog.provide("goog.events");goog.require("goog.array");goog.require("goog.debug.entryPointRegistry");goog.require("goog.debug.errorHandlerWeakDep");goog.require("goog.events.BrowserEvent");goog.require("goog.events.BrowserFeature");goog.require("goog.events.Event");goog.require("goog.events.EventWrapper");goog.require("goog.events.Listener");goog.require("goog.object");goog.require("goog.userAgent");goog.events.listeners_={};goog.events.listenerTree_={};goog.events.sources_={};
goog.events.onString_="on";goog.events.onStringMap_={};goog.events.keySeparator_="_";goog.events.listen=function(src,type,listener,opt_capt,opt_handler){if(goog.isArray(type)){for(var i=0;i<type.length;i++)goog.events.listen(src,type[i],listener,opt_capt,opt_handler);return null}else return goog.events.listen_(src,type,listener,false,opt_capt,opt_handler)};
goog.events.listen_=function(src,type,listener,callOnce,opt_capt,opt_handler){if(!type)throw Error("Invalid event type");var capture=!!opt_capt;var map=goog.events.listenerTree_;if(!(type in map))map[type]={count_:0,remaining_:0};map=map[type];if(!(capture in map)){map[capture]={count_:0,remaining_:0};map.count_++}map=map[capture];var srcUid=goog.getUid(src);var listenerArray,listenerObj;map.remaining_++;if(!map[srcUid]){listenerArray=map[srcUid]=[];map.count_++}else{listenerArray=map[srcUid];for(var i=
0;i<listenerArray.length;i++){listenerObj=listenerArray[i];if(listenerObj.listener==listener&&listenerObj.handler==opt_handler){if(listenerObj.removed)break;if(!callOnce)listenerArray[i].callOnce=false;return listenerArray[i].key}}}var proxy=goog.events.getProxy();proxy.src=src;listenerObj=new goog.events.Listener;listenerObj.init(listener,proxy,src,type,capture,opt_handler);listenerObj.callOnce=callOnce;var key=listenerObj.key;proxy.key=key;listenerArray.push(listenerObj);goog.events.listeners_[key]=
listenerObj;if(!goog.events.sources_[srcUid])goog.events.sources_[srcUid]=[];goog.events.sources_[srcUid].push(listenerObj);if(src.addEventListener){if(src==goog.global||!src.customEvent_)src.addEventListener(type,proxy,capture)}else src.attachEvent(goog.events.getOnString_(type),proxy);return key};
goog.events.getProxy=function(){var proxyCallbackFunction=goog.events.handleBrowserEvent_;var f=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(eventObject){return proxyCallbackFunction.call(f.src,f.key,eventObject)}:function(eventObject){var v=proxyCallbackFunction.call(f.src,f.key,eventObject);if(!v)return v};return f};
goog.events.listenOnce=function(src,type,listener,opt_capt,opt_handler){if(goog.isArray(type)){for(var i=0;i<type.length;i++)goog.events.listenOnce(src,type[i],listener,opt_capt,opt_handler);return null}else return goog.events.listen_(src,type,listener,true,opt_capt,opt_handler)};goog.events.listenWithWrapper=function(src,wrapper,listener,opt_capt,opt_handler){wrapper.listen(src,listener,opt_capt,opt_handler)};
goog.events.unlisten=function(src,type,listener,opt_capt,opt_handler){if(goog.isArray(type)){for(var i=0;i<type.length;i++)goog.events.unlisten(src,type[i],listener,opt_capt,opt_handler);return null}var capture=!!opt_capt;var listenerArray=goog.events.getListeners_(src,type,capture);if(!listenerArray)return false;for(var i=0;i<listenerArray.length;i++)if(listenerArray[i].listener==listener&&listenerArray[i].capture==capture&&listenerArray[i].handler==opt_handler)return goog.events.unlistenByKey(listenerArray[i].key);
return false};
goog.events.unlistenByKey=function(key){if(!goog.events.listeners_[key])return false;var listener=goog.events.listeners_[key];if(listener.removed)return false;var src=listener.src;var type=listener.type;var proxy=listener.proxy;var capture=listener.capture;if(src.removeEventListener){if(src==goog.global||!src.customEvent_)src.removeEventListener(type,proxy,capture)}else if(src.detachEvent)src.detachEvent(goog.events.getOnString_(type),proxy);var srcUid=goog.getUid(src);if(goog.events.sources_[srcUid]){var sourcesArray=goog.events.sources_[srcUid];
goog.array.remove(sourcesArray,listener);if(sourcesArray.length==0)delete goog.events.sources_[srcUid]}listener.removed=true;var listenerArray=goog.events.listenerTree_[type][capture][srcUid];if(listenerArray){listenerArray.needsCleanup_=true;goog.events.cleanUp_(type,capture,srcUid,listenerArray)}delete goog.events.listeners_[key];return true};goog.events.unlistenWithWrapper=function(src,wrapper,listener,opt_capt,opt_handler){wrapper.unlisten(src,listener,opt_capt,opt_handler)};
goog.events.cleanUp_=function(type,capture,srcUid,listenerArray){if(!listenerArray.locked_)if(listenerArray.needsCleanup_){for(var oldIndex=0,newIndex=0;oldIndex<listenerArray.length;oldIndex++){if(listenerArray[oldIndex].removed){var proxy=listenerArray[oldIndex].proxy;proxy.src=null;continue}if(oldIndex!=newIndex)listenerArray[newIndex]=listenerArray[oldIndex];newIndex++}listenerArray.length=newIndex;listenerArray.needsCleanup_=false;if(newIndex==0){delete goog.events.listenerTree_[type][capture][srcUid];
goog.events.listenerTree_[type][capture].count_--;if(goog.events.listenerTree_[type][capture].count_==0){delete goog.events.listenerTree_[type][capture];goog.events.listenerTree_[type].count_--}if(goog.events.listenerTree_[type].count_==0)delete goog.events.listenerTree_[type]}}};
goog.events.removeAll=function(opt_obj,opt_type,opt_capt){var count=0;var noObj=opt_obj==null;var noType=opt_type==null;var noCapt=opt_capt==null;opt_capt=!!opt_capt;if(!noObj){var srcUid=goog.getUid(opt_obj);if(goog.events.sources_[srcUid]){var sourcesArray=goog.events.sources_[srcUid];for(var i=sourcesArray.length-1;i>=0;i--){var listener=sourcesArray[i];if((noType||opt_type==listener.type)&&(noCapt||opt_capt==listener.capture)){goog.events.unlistenByKey(listener.key);count++}}}}else goog.object.forEach(goog.events.sources_,
function(listeners){for(var i=listeners.length-1;i>=0;i--){var listener=listeners[i];if((noType||opt_type==listener.type)&&(noCapt||opt_capt==listener.capture)){goog.events.unlistenByKey(listener.key);count++}}});return count};goog.events.getListeners=function(obj,type,capture){return goog.events.getListeners_(obj,type,capture)||[]};
goog.events.getListeners_=function(obj,type,capture){var map=goog.events.listenerTree_;if(type in map){map=map[type];if(capture in map){map=map[capture];var objUid=goog.getUid(obj);if(map[objUid])return map[objUid]}}return null};
goog.events.getListener=function(src,type,listener,opt_capt,opt_handler){var capture=!!opt_capt;var listenerArray=goog.events.getListeners_(src,type,capture);if(listenerArray)for(var i=0;i<listenerArray.length;i++)if(!listenerArray[i].removed&&listenerArray[i].listener==listener&&listenerArray[i].capture==capture&&listenerArray[i].handler==opt_handler)return listenerArray[i];return null};
goog.events.hasListener=function(obj,opt_type,opt_capture){var objUid=goog.getUid(obj);var listeners=goog.events.sources_[objUid];if(listeners){var hasType=goog.isDef(opt_type);var hasCapture=goog.isDef(opt_capture);if(hasType&&hasCapture){var map=goog.events.listenerTree_[opt_type];return!!map&&!!map[opt_capture]&&objUid in map[opt_capture]}else if(!(hasType||hasCapture))return true;else return goog.array.some(listeners,function(listener){return hasType&&listener.type==opt_type||hasCapture&&listener.capture==
opt_capture})}return false};goog.events.expose=function(e){var str=[];for(var key in e)if(e[key]&&e[key].id)str.push(key+" = "+e[key]+" ("+e[key].id+")");else str.push(key+" = "+e[key]);return str.join("\n")};goog.events.getOnString_=function(type){if(type in goog.events.onStringMap_)return goog.events.onStringMap_[type];return goog.events.onStringMap_[type]=goog.events.onString_+type};
goog.events.fireListeners=function(obj,type,capture,eventObject){var map=goog.events.listenerTree_;if(type in map){map=map[type];if(capture in map)return goog.events.fireListeners_(map[capture],obj,type,capture,eventObject)}return true};
goog.events.fireListeners_=function(map,obj,type,capture,eventObject){var retval=1;var objUid=goog.getUid(obj);if(map[objUid]){map.remaining_--;var listenerArray=map[objUid];if(!listenerArray.locked_)listenerArray.locked_=1;else listenerArray.locked_++;try{var length=listenerArray.length;for(var i=0;i<length;i++){var listener=listenerArray[i];if(listener&&!listener.removed)retval&=goog.events.fireListener(listener,eventObject)!==false}}finally{listenerArray.locked_--;goog.events.cleanUp_(type,capture,
objUid,listenerArray)}}return Boolean(retval)};goog.events.fireListener=function(listener,eventObject){if(listener.callOnce)goog.events.unlistenByKey(listener.key);return listener.handleEvent(eventObject)};goog.events.getTotalListenerCount=function(){return goog.object.getCount(goog.events.listeners_)};
goog.events.dispatchEvent=function(src,e){var type=e.type||e;var map=goog.events.listenerTree_;if(!(type in map))return true;if(goog.isString(e))e=new goog.events.Event(e,src);else if(!(e instanceof goog.events.Event)){var oldEvent=e;e=new goog.events.Event(type,src);goog.object.extend(e,oldEvent)}else e.target=e.target||src;var rv=1,ancestors;map=map[type];var hasCapture=true in map;var targetsMap;if(hasCapture){ancestors=[];for(var parent=src;parent;parent=parent.getParentEventTarget())ancestors.push(parent);
targetsMap=map[true];targetsMap.remaining_=targetsMap.count_;for(var i=ancestors.length-1;!e.propagationStopped_&&i>=0&&targetsMap.remaining_;i--){e.currentTarget=ancestors[i];rv&=goog.events.fireListeners_(targetsMap,ancestors[i],e.type,true,e)&&e.returnValue_!=false}}var hasBubble=false in map;if(hasBubble){targetsMap=map[false];targetsMap.remaining_=targetsMap.count_;if(hasCapture)for(var i=0;!e.propagationStopped_&&i<ancestors.length&&targetsMap.remaining_;i++){e.currentTarget=ancestors[i];rv&=
goog.events.fireListeners_(targetsMap,ancestors[i],e.type,false,e)&&e.returnValue_!=false}else for(var current=src;!e.propagationStopped_&&current&&targetsMap.remaining_;current=current.getParentEventTarget()){e.currentTarget=current;rv&=goog.events.fireListeners_(targetsMap,current,e.type,false,e)&&e.returnValue_!=false}}return Boolean(rv)};goog.events.protectBrowserEventEntryPoint=function(errorHandler){goog.events.handleBrowserEvent_=errorHandler.protectEntryPoint(goog.events.handleBrowserEvent_)};
goog.events.handleBrowserEvent_=function(key,opt_evt){if(!goog.events.listeners_[key])return true;var listener=goog.events.listeners_[key];var type=listener.type;var map=goog.events.listenerTree_;if(!(type in map))return true;map=map[type];var retval,targetsMap;if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){var ieEvent=opt_evt||goog.getObjectByName("window.event");var hasCapture=true in map;var hasBubble=false in map;if(hasCapture){if(goog.events.isMarkedIeEvent_(ieEvent))return true;goog.events.markIeEvent_(ieEvent)}var evt=
new goog.events.BrowserEvent;evt.init(ieEvent,this);retval=true;try{if(hasCapture){var ancestors=[];for(var parent=evt.currentTarget;parent;parent=parent.parentNode)ancestors.push(parent);targetsMap=map[true];targetsMap.remaining_=targetsMap.count_;for(var i=ancestors.length-1;!evt.propagationStopped_&&i>=0&&targetsMap.remaining_;i--){evt.currentTarget=ancestors[i];retval&=goog.events.fireListeners_(targetsMap,ancestors[i],type,true,evt)}if(hasBubble){targetsMap=map[false];targetsMap.remaining_=targetsMap.count_;
for(var i=0;!evt.propagationStopped_&&i<ancestors.length&&targetsMap.remaining_;i++){evt.currentTarget=ancestors[i];retval&=goog.events.fireListeners_(targetsMap,ancestors[i],type,false,evt)}}}else retval=goog.events.fireListener(listener,evt)}finally{if(ancestors)ancestors.length=0}return retval}var be=new goog.events.BrowserEvent(opt_evt,this);retval=goog.events.fireListener(listener,be);return retval};
goog.events.markIeEvent_=function(e){var useReturnValue=false;if(e.keyCode==0)try{e.keyCode=-1;return}catch(ex){useReturnValue=true}if(useReturnValue||e.returnValue==undefined)e.returnValue=true};goog.events.isMarkedIeEvent_=function(e){return e.keyCode<0||e.returnValue!=undefined};goog.events.uniqueIdCounter_=0;goog.events.getUniqueId=function(identifier){return identifier+"_"+goog.events.uniqueIdCounter_++};
goog.debug.entryPointRegistry.register(function(transformer){goog.events.handleBrowserEvent_=transformer(goog.events.handleBrowserEvent_)});goog.provide("ww.util");ww.util.floatComplexGaussianRandom=function(){var x1;var x2;var w;var out=[];do{x1=2*Math.random()-1;x2=2*Math.random()-1;w=x1*x1+x2*x2}while(w>=1);w=Math.sqrt(-1*Math.log(w)/w);out[0]=x1*w;out[1]=x2*w;return out};
(function(){var lastTime=0;var vendors=["ms","moz","webkit","o"];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=
window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(id){clearTimeout(id)}})();ww.raqSubscribers={};ww.raqRunning=false;ww.lastTime=0;ww.testMode=window.location.href.indexOf("test")>-1;var subscriberKey,loopSubscriber,loopCurrentTime,loopDelta;
ww.raqOnFrame=function(t){loopCurrentTime=t||(new Date).getTime();loopDelta=loopCurrentTime-ww.lastTime;for(subscriberKey in ww.raqSubscribers)if(ww.raqSubscribers.hasOwnProperty(subscriberKey)){loopSubscriber=ww.raqSubscribers[subscriberKey];loopSubscriber[1].call(loopSubscriber[0],loopDelta)}ww.lastTime=loopCurrentTime;if(ww.raqRunning)requestAnimationFrame(ww.raqOnFrame)};
ww.raqUpdateStatus=function(){var len=0;for(var key in ww.raqSubscribers)if(ww.raqSubscribers.hasOwnProperty(key))len++;if(len>0){if(!ww.raqRunning){ww.raqRunning=true;ww.lastTime=(new Date).getTime();ww.raqOnFrame()}}else if(ww.raqRunning)ww.raqRunning=false};ww.raqSubscribe=function(name,obj,func){ww.raqSubscribers[name]=[obj,func];ww.raqUpdateStatus()};ww.raqUnsubscribe=function(name){delete ww.raqSubscribers[name];ww.raqUpdateStatus()};goog.provide("ww.mode.Core");goog.require("goog.events");goog.require("ww.util");window["AudioContext"]=window["AudioContext"]||window["webkitAudioContext"]||null;
ww.mode.Core=function(name,wantsAudio,wantsDrawing,wantsPhysics){this.prefix_=Modernizr["prefixed"]("transform");this.name_=name;this.hasFocus=false;this.wantsAudio_=wantsAudio&&window["AudioContext"]||false;this.wantsDrawing_=wantsDrawing||false;this.wantsPhysics_=wantsPhysics||false;this.wantsRenderLoop_=this.wantsDrawing_||this.wantsPhysics_||false;this.tweens_=[];if(!ww.testMode&&DEBUG_MODE)this.addDebugUI_();var self=this;goog.events.listen(window,"message",function(evt){var data=evt.getBrowserEvent().data;
self.log("Got message: "+data["name"],data);if(data["name"]==="focus")self["focus"]();else if(data["name"]==="unfocus")self["unfocus"]()});this.window_=$(window);this.width_=0;this.height_=0;this.window_.resize(function(){self.onResize(true)});this.onResize();if(Modernizr["touch"]){document.body.style[Modernizr["prefixed"]("userSelect")]="none";document.body.style[Modernizr["prefixed"]("userSelect")]="none";document.body.style[Modernizr["prefixed"]("userDrag")]="none";document.body.style[Modernizr["prefixed"]("tapHighlightColor")]=
"rgba(0,0,0,0)"}this.init();$(function(){self.letterI=$("#letter-i");self.letterO=$("#letter-o");self["focus"]()});this.ready()};ww.mode.Core.prototype.log=function(msg){if(DEBUG_MODE&&console&&console.log){var args=Array.prototype.slice.call(arguments);if(typeof args[0]==="string")args[0]=this.name_+": "+args[0];console.log.apply(console,args)}};ww.mode.Core.prototype.init=function(){this.log("Init");if(this.wantsPhysics_)this.resetPhysicsWorld_()};
ww.mode.Core.prototype.showReload=function(){this["unfocus"]();var self=this;if(!this.$reloadModal_){this.$reloadModal_=$("#reload");if(!this.$reloadModal_.length)this.$reloadModal_=$("<div id='reload'></div>").appendTo(document.body);this.$reloadModal_.bind("tap.reload",function(){self.$reloadModal_.hide();self.init();self["focus"]()})}this.$reloadModal_.show()};
ww.mode.Core.prototype.onResize=function(redraw){this.width_=this.window_.width();this.height_=this.window_.height();this.log("Resize "+this.width_+"x"+this.height_);if(this.paperCanvas_){this.paperCanvas_.width=this.width_;this.paperCanvas_.height=this.height_;paper["view"]["setViewSize"](this.width_,this.height_)}if(redraw)this.redraw()};
if(DEBUG_MODE)ww.mode.Core.prototype.addDebugUI_=function(){var self=this;var focusElem=document.createElement("button");focusElem.style.fontSize="15px";focusElem.innerHTML="Focus";focusElem.onclick=function(){self["focus"]()};var unfocusElem=document.createElement("button");unfocusElem.style.fontSize="15px";unfocusElem.innerHTML="Unfocus";unfocusElem.onclick=function(){self["unfocus"]()};var restartElem=document.createElement("button");restartElem.style.fontSize="15px";restartElem.innerHTML="Restart";
restartElem.onclick=function(){self.init()};var containerElem=document.createElement("div");containerElem.style.position="fixed";containerElem.style.bottom=0;containerElem.style.left=0;containerElem.style.right=0;containerElem.style.height="40px";containerElem.style.background="rgba(0,0,0,0.2)";containerElem.appendChild(focusElem);containerElem.appendChild(unfocusElem);containerElem.appendChild(restartElem);document.body.appendChild(containerElem)};
ww.mode.Core.prototype.startRendering=function(){if(!this.wantsRenderLoop_)return;this.framesRendered_=0;this.timeElapsed_=0;ww.raqSubscribe(this.name_,this,this.renderFrame)};ww.mode.Core.prototype.stopRendering=function(){if(!this.wantsRenderLoop_)return;ww.raqUnsubscribe(this.name_)};
ww.mode.Core.prototype.renderFrame=function(delta){this.timeElapsed_+=delta;delta*=0.0010;if(delta>0.5)delta=0.016;if(this.wantsPhysics_)this.stepPhysics(delta);TWEEN["update"](this.timeElapsed_);if(this.wantsDrawing_)this.onFrame(delta);this.framesRendered_++};ww.mode.Core.prototype.redraw=function(){if(this.wantsDrawing_)this.onFrame(0)};ww.mode.Core.prototype.onFrame=function(delta){if(this.paperCanvas_)paper["view"]["draw"]()};
ww.mode.Core.prototype.ready=function(){window["currentMode"]=this;if(window["onModeReady"])window["onModeReady"](this);this.log("Is ready");this.sendMessage_(this.name_+".ready")};ww.mode.Core.prototype.sendMessage_=function(msgName,value){if(window.parent&&window.parent.postMessage)window.parent.postMessage({"name":msgName,"data":value},"*")};ww.mode.Core.prototype["focus"]=function(){if(this.hasFocus)return;this.log("Got focus");this.hasFocus=true;this.startRendering();this.didFocus()};
ww.mode.Core.prototype.didFocus=function(){var self=this;var hammerOpts={"prevent_default":true};var evt=Modernizr["touch"]?"touchend":"mouseup";this.letterI.bind(evt+".core",hammerOpts,function(){self.activateI()});this.letterO.bind(evt+".core",hammerOpts,function(){self.activateO()});$(document).bind("keypress.core",function(e){if(e.keyCode===105)self.activateI();else if(e.keyCode===111)self.activateO();else return;e.preventDefault();e.stopPropagation();return false})};
ww.mode.Core.prototype["unfocus"]=function(){if(!this.hasFocus)return;this.log("Lost focus");this.hasFocus=false;this.stopRendering();this.didUnfocus()};ww.mode.Core.prototype.didUnfocus=function(){this.letterI.unbind("tap.core");this.letterO.unbind("tap.core");$(document).unbind("keypress.core")};
ww.mode.Core.prototype.getSoundBufferFromURL_=function(url,gotSound){this.soundBuffersFromURL_=this.soundBuffersFromURL_||{};if(this.soundBuffersFromURL_[url]){gotSound(this.soundBuffersFromURL_[url]);return}var request=new XMLHttpRequest;request.open("GET",url,true);request.responseType="arraybuffer";var self=this;request.onload=function(){var audioContext=self.getAudioContext_();audioContext["decodeAudioData"](request.response,function(buffer){self.soundBuffersFromURL_[url]=buffer;gotSound(self.soundBuffersFromURL_[url])},
function(){})};request.send()};ww.mode.Core.prototype.getPhysicsWorld_=function(){if(this.physicsWorld_)return this.physicsWorld_;this.physicsWorld_=new window["Physics"];return this.physicsWorld_};ww.mode.Core.prototype.resetPhysicsWorld_=function(){if(this.physicsWorld_&&this.physicsWorld_["destroy"])this.physicsWorld_["destroy"]();this.physicsWorld_=null};
ww.mode.Core.prototype.stepPhysics=function(delta){if(delta>0){var world=this.physicsWorld_;world["integrate"](delta);if(this.paperCanvas_)for(var i=0;i<world["particles"].length;i++){var p=world["particles"][i];if(typeof p["drawObj"]!=="undefined"&&p["drawObj"]["position"]){p["drawObj"]["position"]["x"]=p["pos"]["x"];p["drawObj"]["position"]["y"]=p["pos"]["y"]}}}};ww.mode.Core.prototype.getAudioContext_=function(){this.audioContext_=this.audioContext_||new window["AudioContext"];return this.audioContext_};
ww.mode.Core.prototype.playSound=function(filename){if(!this.wantsAudio_)return;var url="../sounds/"+this.name_+"/"+filename;if(ww.testMode)url="../"+url;this.log('Requested sound "'+filename+'" from "'+url+'"');var audioContext=this.getAudioContext_();this.getSoundBufferFromURL_(url,function(buffer){var source=audioContext["createBufferSource"]();source["buffer"]=buffer;source["connect"](audioContext["destination"]);source["noteOn"](0)})};ww.mode.Core.prototype.activateI=function(){this.log('Activated "I"')};
ww.mode.Core.prototype.activateO=function(){this.log('Activated "O"')};ww.mode.Core.prototype.transformElem_=function(elem,value){elem.style[this.prefix_]=value};ww.mode.Core.prototype.getPaperCanvas_=function(){if(!this.paperCanvas_){this.paperCanvas_=document.createElement("canvas");this.paperCanvas_.width=this.width_;this.paperCanvas_.height=this.height_;$(document.body).prepend(this.paperCanvas_);paper["setup"](this.paperCanvas_)}return this.paperCanvas_};ww.mode.Core.prototype.addTween=function(tween){tween["start"](this.timeElapsed_)};goog.require("ww.mode.Core");goog.provide("ww.mode.CatMode");ww.mode.CatMode=function(){goog.base(this,"cat",true,true)};goog.inherits(ww.mode.CatMode,ww.mode.Core);
ww.mode.CatMode.prototype.activateI=function(){goog.base(this,"activateI");this.playSound("cat-1.mp3");var self=this;var stretchOut=new TWEEN["Tween"]({"scaleY":1});stretchOut["to"]({"scaleY":1.55},200);stretchOut["easing"](TWEEN["Easing"]["Bounce"]["InOut"]);stretchOut["onUpdate"](function(){self.transformElem_(self.letterI[0],"scaleY("+this["scaleY"]+")")});var stretchBack=new TWEEN["Tween"]({"scaleY":1.55});stretchBack["to"]({"scaleY":1},200);stretchBack["easing"](TWEEN["Easing"]["Bounce"]["InOut"]);
stretchBack["delay"](200);stretchBack["onUpdate"](function(){self.transformElem_(self.letterI[0],"scaleY("+this["scaleY"]+")")});this.addTween(stretchOut);this.addTween(stretchBack)};
ww.mode.CatMode.prototype.activateO=function(){goog.base(this,"activateO");this.playSound("cat-2.mp3");var self=this;var position=[Random(-200,200),Random(-50,50)];var moveOut=new TWEEN["Tween"]({"scale":1,"x":0,"y":0});moveOut["to"]({"scale":1.5,"x":position[0],"y":position[1]},200);moveOut["easing"](TWEEN["Easing"]["Bounce"]["InOut"]);moveOut["onUpdate"](function(){var translate="translate("+this["x"]+"px, "+this["y"]+"px) ";translate+="scale("+this["scale"]+")";self.transformElem_(self.letterO[0],
translate)});var moveBack=new TWEEN["Tween"]({"scale":1.5,"x":position[0],"y":position[1]});moveBack["to"]({"scale":1,"x":0,"y":0},200);moveBack["delay"](200);moveBack["easing"](TWEEN["Easing"]["Bounce"]["InOut"]);moveBack["onUpdate"](function(){var translate="translate("+this["x"]+"px, "+this["y"]+"px) ";translate+="scale("+this["scale"]+")";self.transformElem_(self.letterO[0],translate)});this.addTween(moveOut);this.addTween(moveBack)};goog.require("ww.mode.Core");goog.provide("ww.mode.BaconMode");ww.mode.BaconMode=function(){goog.base(this,"bacon",true,true)};goog.inherits(ww.mode.BaconMode,ww.mode.Core);ww.mode.BaconMode.prototype.init=function(){goog.base(this,"init");var self=this;this.container=$("#bacon-container").css("opacity",1);this.bacon=$("#bacon");this.eggs=$("eggs")};goog.require("ww.mode.Core");goog.require("ww.util");goog.provide("ww.mode.HomeMode");ww.mode.HomeMode=function(){goog.base(this,"home",true,true);this.setupPatternMatchers_();this.currentPattern_="";this.maxPatternLength_=15};goog.inherits(ww.mode.HomeMode,ww.mode.Core);function pad(number,length){var str=""+number;while(str.length<length)str="0"+str;return str}
ww.mode.HomeMode.prototype.playProcessedAudio_=function(filename,filter){if(!this.wantsAudio_)return;var url="../sounds/"+this.name_+"/"+filename;if(ww.testMode)url="../"+url;this.log('Requested sound "'+filename+'" from "'+url+'"');var audioContext=this.audioContext_;var self=this;this.getSoundBufferFromURL_(url,function(buffer){var source=audioContext["createBufferSource"]();source["buffer"]=buffer;source["connect"](filter["input"]);filter["connect"](audioContext["destination"]);source["noteOn"](0)})};
ww.mode.HomeMode.prototype.activateI=function(){this.iClicked_=true;if(this.iMultiplier_<10)this.iMultiplier_+=2;this.playProcessedAudio_("boing.wav",this.chorus_);this.addCharacter_("1")};ww.mode.HomeMode.prototype.activateO=function(){this.oClicked_=true;if(this.oMultiplier_<10)this.oMultiplier_+=2;this.playProcessedAudio_("boing.wav",this.delay_);this.addCharacter_("0")};
ww.mode.HomeMode.prototype.setupPatternMatchers_=function(){var patterns={},key,mode;for(key in ww.mode.modes)if(ww.mode.modes.hasOwnProperty(key)&&ww.mode.modes[key].pattern){mode=ww.mode.modes[key];patterns[key]={klass:mode.klass,binaryPattern:pad(mode.pattern.toString(2),mode.len)}}this.matchers_=[];for(key in patterns)if(patterns.hasOwnProperty(key)){mode=patterns[key];this.log("Building matchers for: "+mode.binaryPattern);for(var i=0;i<mode.binaryPattern.length;i++)this.matchers_.push({key:key,
matcher:mode.binaryPattern.slice(0,i+1),isPartial:i+1!=mode.binaryPattern.length})}};
ww.mode.HomeMode.prototype.addCharacter_=function(str){this.currentPattern_+=str;if(this.currentPattern_.length>this.maxPatternLength_)this.currentPattern_=this.currentPattern_.slice(-this.maxPatternLength_,this.currentPattern_.length);this.log("current pattern: "+this.currentPattern_);$("#pattern").text(this.currentPattern_);var matched=this.runMatchers_();if(matched){this.log("matched",matched);if(matched.isPartial);else this.goToMode_(matched.key)}};
ww.mode.HomeMode.prototype.runMatchers_=function(){var matches=[];for(var i=0;i<this.matchers_.length;i++){var matcher=this.matchers_[i];var lastXChars=this.currentPattern_.slice(-matcher.matcher.length,this.currentPattern_.length);if(lastXChars.indexOf(matcher.matcher)>-1){matches.push({matcher:matcher,len:matcher.matcher.length,isPartial:matcher.isPartial});if(!matcher.isPartial)return matcher}}var found;var longestLen=0;for(var j=0;j<matches.length;j++)if(matches[j].len>longestLen){found=matches[j].matcher;
longestLen=matches[j].len}return found};ww.mode.HomeMode.prototype.goToMode_=function(key){this.sendMessage_("goToMode",key)};
ww.mode.HomeMode.prototype.drawI_=function(isNew){this.iWidth_=this.width_*0.175;this.iHeight_=this.iWidth_*2.12698413;this.i_X=this.screenCenterX_-this.iWidth_*1.5;this.i_Y=this.screenCenterY_-this.iHeight_/2;if(isNew){var iTopLeft=new paper["Point"](this.i_X,this.i_Y);var iSize=new paper["Size"](this.iWidth_,this.iHeight_);this.letterI_=new paper["Rectangle"](iTopLeft,iSize);this.paperI_=new paper["Path"]["Rectangle"](this.letterI_);this.paperI_["fillColor"]="#11a860";this.i_PointX=[];this.i_PointY_=
[];for(this.i_=0;this.i_<this.paperI_["segments"].length;this.i_++){this.i_PointX.push(this.paperI_["segments"][this.i_]["point"]["_x"]);this.i_PointY_.push(this.paperI_["segments"][this.i_]["point"]["_y"])}}else if(!isNew&&this.paperI_){this.paperI_["position"]={x:this.i_X+this.iWidth_/2,y:this.i_Y+this.iHeight_/2};this.paperI_["scale"](this.iWidth_/this.paperI_["bounds"]["width"]);for(this.i_=0;this.i_<this.paperI_["segments"].length;this.i_++){this.i_PointX[this.i_]=this.paperI_["segments"][this.i_]["point"]["_x"];
this.i_PointY_[this.i_]=this.paperI_["segments"][this.i_]["point"]["_y"]}}else{this.log("drawI_(true) must be called before it can be redrawn");return}};
ww.mode.HomeMode.prototype.drawO_=function(isNew){this.oRad_=this.width_*0.1944444444;this.oX_=this.screenCenterX_+this.oRad_;this.oY_=this.screenCenterY_;if(isNew){var oCenter=new paper["Point"](this.oX_,this.oY_);this.paperO_=new paper["Path"]["Circle"](oCenter,this.oRad_);this.paperO_["fillColor"]="#3777e2";this.oHandleInX_=[];this.oHandleInY_=[];this.oHandleOutX_=[];this.oHandleOutY_=[];this.oPointX_=[];this.oPointY_=[];for(this.i_=0;this.i_<this.paperO_["segments"].length;this.i_++){this.oPointX_.push(this.paperO_["segments"][this.i_]["point"]["_x"]);
this.oPointY_.push(this.paperO_["segments"][this.i_]["point"]["_y"]);this.oHandleInX_.push(this.paperO_["segments"][this.i_]["handleIn"]["_x"]);this.oHandleInY_.push(this.paperO_["segments"][this.i_]["handleIn"]["_y"]);this.oHandleOutX_.push(this.paperO_["segments"][this.i_]["handleOut"]["_x"]);this.oHandleOutY_.push(this.paperO_["segments"][this.i_]["handleOut"]["_y"])}}else if(!isNew&&this.paperO_){this.paperO_["position"]={x:this.oX_,y:this.oY_};this.paperO_["scale"](this.oRad_*2/this.paperO_["bounds"]["height"]);
for(this.i_=0;this.i_<this.paperO_["segments"].length;this.i_++){this.oPointX_[this.i_]=this.paperO_["segments"][this.i_]["point"]["_x"];this.oPointY_[this.i_]=this.paperO_["segments"][this.i_]["point"]["_y"];this.oHandleInX_[this.i_]=this.paperO_["segments"][this.i_]["handleIn"]["_x"];this.oHandleInY_[this.i_]=this.paperO_["segments"][this.i_]["handleIn"]["_y"];this.oHandleOutX_[this.i_]=this.paperO_["segments"][this.i_]["handleOut"]["_x"];this.oHandleOutY_[this.i_]=this.paperO_["segments"][this.i_]["handleOut"]["_y"]}}else{this.log("drawO_(true) must be called before it can be redrawn");
return}};
ww.mode.HomeMode.prototype.drawSlash_=function(isNew){if(isNew&&this.paperI_&&this.paperO_){this.slashStart_=new paper["Point"](this.screenCenterX_+this.oRad_/8,this.screenCenterY_-this.iHeight_/2-this.iHeight_*1.5*0.17475728);this.slashEnd_=new paper["Point"](this.i_X+this.iWidth_,this.screenCenterY_+this.iHeight_/2+this.iHeight_*1.5*0.17475728);this.paperSlash_=new paper["Path"];this.paperSlash_["strokeWidth"]=this.width_*0.01388889;this.paperSlash_["strokeColor"]="#ebebeb";this.paperSlash_["add"](this.slashStart_,this.slashEnd_)}else if(!isNew&&
this.paperSlash_){this.slashStart_["x"]=this.screenCenterX_+this.oRad_/8;this.slashStart_["y"]=this.screenCenterY_-this.iHeight_/2-this.iHeight_*1.5*0.17475728;this.slashEnd_["x"]=this.i_X+this.iWidth_;this.slashEnd_["y"]=this.screenCenterY_+this.iHeight_/2+this.iHeight_*1.5*0.17475728;this.paperSlash_["segments"][0]["point"]=this.slashStart_;this.paperSlash_["segments"][1]["point"]=this.slashEnd_;this.paperSlash_["strokeWidth"]=this.width_*0.01388889}else{this.log("The I and O must be created before the slash can be drawn.");
return}};
ww.mode.HomeMode.prototype.init=function(){goog.base(this,"init");this.getAudioContext_();var tuna=new Tuna(this.audioContext_);this.delay_=new tuna["Delay"]({feedback:0,delayTime:0,wetLevel:0,dryLevel:0,cutoff:20,bypass:0});this.chorus_=new tuna["Chorus"]({rate:0.01,feedback:0.2,delay:0,bypass:0});this.getPaperCanvas_();this.deltaModifier_=0;this.tempFloat=[];this.i_=0;this.screenCenterX_=this.width_/2;this.screenCenterY_=this.height_/2;this.lastClick=new paper["Point"](this.screenCenterX_,this.screenCenterY_);
this.iClicked_=false;this.iIncrement_=true;this.iModifier_=0;this.iMultiplier_=1;this.drawI_(true);this.oClicked_=false;this.oIncrement_=true;this.oModifier_=0;this.oMultiplier_=1;this.drawO_(true);this.drawSlash_(true)};
ww.mode.HomeMode.prototype.didFocus=function(){goog.base(this,"didFocus");var self=this;var canvas=this.getPaperCanvas_();var evt=Modernizr["touch"]?"touchmove":"mousemove";var tool=new paper["Tool"];tool["onMouseDown"]=function(event){self.lastClick=event["point"];if(self.paperO_["hitTest"](event["point"]))self.activateO();if(self.paperI_["hitTest"](event["point"]))self.activateI()}};
ww.mode.HomeMode.prototype.onResize=function(redraw){goog.base(this,"onResize",false);this.screenCenterX_=this.width_/2;this.screenCenterY_=this.height_/2;this.drawI_();this.drawO_();this.drawSlash_();if(redraw)this.redraw()};
ww.mode.HomeMode.prototype.onFrame=function(delta){goog.base(this,"onFrame",delta);this.deltaModifier_=delta/100;if(this.iClicked_==true){if(this.iModifier_<this.deltaModifier_*1E4&&this.iIncrement_==true)this.iModifier_+=this.deltaModifier_*1E3;else if(this.iMultiplier_>1){if(this.iModifier_<this.deltaModifier_*1E4)this.iModifier_+=this.deltaModifier_*100;if(this.iMultiplier_>1)this.iMultiplier_-=0.1;else this.iMultiplier_=1}else{this.iIncrement_=false;this.iModifier_-=this.deltaModifier_*1E3;if(this.iMultiplier_>
1)this.iMultiplier_-=0.1;else this.iMultiplier_=1}if(this.iModifier_<this.deltaModifier_*1E3){this.iClicked_=false;this.iIncrement_=true;this.iMultiplier_=1}for(this.i_=0;this.i_<this.paperI_["segments"].length;this.i_++){this.tempFloat=ww.util.floatComplexGaussianRandom();this.paperI_["segments"][this.i_]["point"]["_x"]=this.i_PointX[this.i_]+Math.cos(this.framesRendered_/10)*this.iModifier_*this.iMultiplier_*this.tempFloat[0];this.paperI_["segments"][this.i_]["point"]["_y"]=this.i_PointY_[this.i_]+
Math.sin(this.framesRendered_/10)*this.iModifier_*this.iMultiplier_*this.tempFloat[1]}}else for(this.i_=0;this.i_<this.paperO_["segments"].length;this.i_++){this.paperI_["segments"][this.i_]["point"]["_x"]=this.i_PointX[this.i_];this.paperI_["segments"][this.i_]["point"]["_y"]=this.i_PointY_[this.i_]}if(this.oClicked_===true){if(this.oModifier_<this.deltaModifier_*1E4&&this.oIncrement_===true)this.oModifier_+=this.deltaModifier_*1E3;else if(this.oMultiplier_>1){if(this.oModifier_<this.deltaModifier_*
1E4)this.oModifier_+=this.deltaModifier_*100;if(this.oMultiplier_>1)this.oMultiplier_-=0.1;else this.oMultiplier_=1}else{this.oIncrement_=false;this.oModifier_-=this.deltaModifier_*1E3;if(this.oMultiplier_>1)this.oMultiplier_-=0.1;else this.oMultiplier_=1}if(this.oModifier_<this.deltaModifier_*1E3){this.oClicked_=false;this.oIncrement_=true;this.oMultiplier_=1}this.delay_["feedback"]=this.oMultiplier_/10;for(this.i_=0;this.i_<this.paperO_["segments"].length;this.i_++){this.tempFloat=ww.util.floatComplexGaussianRandom();
this.paperO_["segments"][this.i_]["handleIn"]["_x"]=this.oHandleInX_[this.i_]+Math.cos(this.framesRendered_/10*this.tempFloat[0])*this.oModifier_*this.oMultiplier_;this.paperO_["segments"][this.i_]["handleIn"]["_y"]=this.oHandleInY_[this.i_]+Math.sin(this.framesRendered_/10*this.tempFloat[0])*this.oModifier_*this.oMultiplier_;this.paperO_["segments"][this.i_]["handleOut"]["_x"]=this.oHandleOutX_[this.i_]-Math.cos(this.framesRendered_/10*this.tempFloat[0])*this.oModifier_*this.oMultiplier_;this.paperO_["segments"][this.i_]["handleOut"]["_y"]=
this.oHandleOutY_[this.i_]-Math.sin(this.framesRendered_/10*this.tempFloat[0])*this.oModifier_*this.oMultiplier_;this.paperO_["segments"][this.i_]["point"]["_x"]=this.oPointX_[this.i_]-Math.sin(this.framesRendered_/10*this.tempFloat[0])*this.oModifier_*this.oMultiplier_;this.paperO_["segments"][this.i_]["point"]["_y"]=this.oPointY_[this.i_]-Math.cos(this.framesRendered_/10*this.tempFloat[0])*this.oModifier_*this.oMultiplier_}}else for(this.i_=0;this.i_<this.paperO_["segments"].length;this.i_++){this.paperO_["segments"][this.i_]["handleIn"]["_x"]=
this.oHandleInX_[this.i_];this.paperO_["segments"][this.i_]["handleIn"]["_y"]=this.oHandleInY_[this.i_];this.paperO_["segments"][this.i_]["handleOut"]["_x"]=this.oHandleOutX_[this.i_];this.paperO_["segments"][this.i_]["handleOut"]["_y"]=this.oHandleOutY_[this.i_];this.paperO_["segments"][this.i_]["point"]["_x"]=this.oPointX_[this.i_];this.paperO_["segments"][this.i_]["point"]["_y"]=this.oPointY_[this.i_]}};goog.require("ww.mode.Core");goog.provide("ww.mode.SimoneMode");ww.mode.SimoneMode=function(){goog.base(this,"simone",true,true)};goog.inherits(ww.mode.SimoneMode,ww.mode.Core);
ww.mode.SimoneMode.prototype.init=function(){goog.base(this,"init");var self=this;TWEEN["removeAll"]();if(Modernizr["touch"]){this.evtStart="touchstart.simon";this.evtEnd="touchend.simon"}else{this.evtStart="mousedown.simon";this.evtEnd="mouseup.simon"}this.topLeft=$("#red");this.topRight=$("#green");this.bottomLeft=$("#blue");this.bottomRight=$("#yellow");this.segments=[this.topLeft,this.topRight,this.bottomLeft,this.bottomRight];this.segmentEls=$("#red, #green, #blue, #yellow").css("opacity",1);
this.levelCount=$("#max-level").removeClass().text("");this.uiContainer=$("#levels").css("opacity",0);this.container=$("#simone");this.message=$("#message").css("opacity",1);this.playAgainEl=$("#play-again");this.container.bind(this.evtEnd,function(){self.message.css("opacity",0);self.beginGame_();self.container.unbind(self.evtEnd)});this.plays=0;this.isPlaying=false;this.isAnimating=false;this.stepIndex=0;this.lastStep=0;this.highestLevel=0;this.generateSequence_();this.total=this.sequence.length;
this.getAudioContext_();this.source=this.audioContext_["createOscillator"]();this.analyser=this.audioContext_["createAnalyser"]();this.analyser["fftSize"]=512;this.analyser["smoothingTimeConstant"]=0.85;this.notes=[{"frequency":1806,"detune":-3663,"type":1},{"frequency":1806,"detune":-4758,"type":1},{"frequency":229,"detune":1053,"type":1},{"frequency":580,"detune":-1137,"type":2}]};
ww.mode.SimoneMode.prototype.startCheck_=function(noteNum){if(this.isPlaying&&!this.isAnimating){var note=this.notes[noteNum],segment=this.segments[noteNum],self=this;this.log("Playing note: ",note);this.source["type"]=note["type"];this.source["frequency"]["value"]=note["frequency"];this.source["detune"]["value"]=note["detune"];var fadeInQuick=new TWEEN["Tween"]({"opacity":0.5});fadeInQuick["to"]({"opacity":1},100);fadeInQuick["onStart"](function(){self.source["connect"](self.analyser);self.analyser["connect"](self.audioContext_["destination"]);
self.source["noteOn"](0)});fadeInQuick["onUpdate"](function(){segment.css("opacity",this["opacity"])});this.addTween(fadeInQuick)}};
ww.mode.SimoneMode.prototype.didFocus=function(){goog.base(this,"didFocus");var self=this;self.playAgainEl.bind(this.evtEnd,function(){self.beginGame_()});self.topLeft.bind(this.evtStart,function(){self.startCheck_(0)});self.topLeft.bind(this.evtEnd,function(){self.checkSequence_(0)});self.topRight.bind(this.evtStart,function(){self.startCheck_(1)});self.topRight.bind(this.evtEnd,function(){self.checkSequence_(1)});self.bottomLeft.bind(this.evtStart,function(){self.startCheck_(2)});self.bottomLeft.bind(this.evtEnd,
function(){self.checkSequence_(2)});self.bottomRight.bind(this.evtStart,function(){self.startCheck_(3)});self.bottomRight.bind(this.evtEnd,function(){self.checkSequence_(3)})};
ww.mode.SimoneMode.prototype.didUnfocus=function(){goog.base(this,"didUnfocus");this.playAgainEl.unbind(this.evtEnd);this.topLeft.unbind(this.evtStart);this.topRight.unbind(this.evtStart);this.bottomLeft.unbind(this.evtStart);this.bottomRight.unbind(this.evtStart);this.topLeft.unbind(this.evtEnd);this.topRight.unbind(this.evtEnd);this.bottomLeft.unbind(this.evtEnd);this.bottomRight.unbind(this.evtEnd)};
ww.mode.SimoneMode.prototype.generateSequence_=function(){this.sequence=this.sequence||[];for(var i=0;i<4;i++)this.sequence.push(~~(Math.random()*4));this.log("generated sequence: "+this.sequence)};ww.mode.SimoneMode.prototype.shuffleSequence_=function(){var i=this.sequence.length,j,swap;while(--i){j=Math.random()*(i+1)|0;swap=this.sequence[i];this.sequence[i]=this.sequence[j];this.sequence[j]=swap}this.log("shuffled sequence: "+this.sequence)};
ww.mode.SimoneMode.prototype.checkSequence_=function(guess){this.log("Guessed ("+guess+")");if(this.isPlaying&&!this.isAnimating){var self=this,guessSeg=self.segments[guess];self.levelCount.removeClass();var fadeOut=new TWEEN["Tween"]({"opacity":1});fadeOut["to"]({"opacity":0.5},200);fadeOut["onUpdate"](function(){guessSeg.css("opacity",this["opacity"])});fadeOut["onComplete"](function(){self.source["disconnect"]()});self.addTween(fadeOut);self.isAnimating=false;if(self.sequence[self.stepIndex]===
guess){self.log("Correct step guess.");if(self.stepIndex!==self.lastStep)self.stepIndex++;else{self.log("Reached last step. Show next step.");self.lastStep++;self.levelCount.addClass("success");if(self.lastStep===self.total){for(var i=0;i<4;i++)self.sequence.push(~~(Math.random()*4));self.total+=4}if(self.lastStep<self.total)self.stepIndex=0;self.displayNext_()}}else{self.log("Wrong. Expected ("+self.sequence[self.stepIndex]+")");self.isPlaying=false;self.levelCount.addClass("game-over");var fadeIn=
new TWEEN["Tween"]({"opacity":0.5});fadeIn["to"]({"opacity":1},200);fadeIn["delay"](500);fadeIn["onUpdate"](function(){self.segmentEls.css("opacity",this["opacity"])});self.addTween(fadeIn)}}};
ww.mode.SimoneMode.prototype.beginGame_=function(){if(!this.isPlaying){var self=this;self.plays++;self.isPlaying=true;self.isAnimating=false;self.stepIndex=0;self.highestLevel=Math.max(self.highestLevel,self.lastStep);self.lastStep=0;self.shuffleSequence_();self.levelCount.removeClass().text("");this.log("Playing sequence: "+this.sequence);self.uiContainer.animate({opacity:1},200);if(self.segmentEls.css("opacity")!=="0.5"){var fadeOut=new TWEEN["Tween"]({"opacity":1});fadeOut["to"]({"opacity":0.5},
200);fadeOut["delay"](200);fadeOut["onUpdate"](function(){self.segmentEls.css("opacity",this["opacity"])});self.addTween(fadeOut)}self.displayNext_()}};
ww.mode.SimoneMode.prototype.displayNext_=function(){if(this.isPlaying){this.isAnimating=true;var self=this,idx,note,segment,stopIndex=this.lastStep+1,delay=500;for(var i=0;i<stopIndex;i++){idx=self.sequence[i];note=self.notes[idx];segment=self.segments[idx];delay+=600;(function(segment,delay,note,i){var fadeIn=new TWEEN["Tween"]({"opacity":0.5});fadeIn["to"]({"opacity":1},200);fadeIn["delay"](delay);fadeIn["onStart"](function(){if(i===0)self.levelCount.removeClass("success");self.log(i+" now playing: ",
note);self.source["type"]=note["type"];self.source["frequency"]["value"]=note["frequency"];self.source["detune"]["value"]=note["detune"];self.source["connect"](self.analyser);self.analyser["connect"](self.audioContext_["destination"]);self.source["noteOn"](0)});fadeIn["onUpdate"](function(){segment[0].style.opacity=this["opacity"]});var fadeOut=new TWEEN["Tween"]({"opacity":1});fadeOut["to"]({"opacity":0.5},200);fadeOut["delay"](delay+300);fadeOut["onUpdate"](function(){segment[0].style.opacity=this["opacity"]});
fadeOut["onComplete"](function(){if(i===stopIndex-1){self.isAnimating=false;self.levelCount.addClass("start").text(stopIndex)}self.source["disconnect"]()});self.addTween(fadeIn);self.addTween(fadeOut)})(segment,delay,note,i)}}};goog.require("ww.mode.Core");goog.provide("ww.mode.ExplodeMode");ww.mode.ExplodeMode=function(){goog.base(this,"explode",true)};goog.inherits(ww.mode.ExplodeMode,ww.mode.Core);ww.mode.ExplodeMode.prototype.init=function(){goog.base(this,"init");$(document.body).css({backgroundImage:"url(../img/explode/1.gif)",backgroundRepeat:"no-repeat","background-size":"100% 100%"});var self=this;setInterval(function(){self.playSound("bomb.wav")},2E3)};goog.require("ww.mode.Core");goog.require("ww.util");goog.provide("ww.mode.SpaceMode");ww.mode.SpaceMode=function(){goog.base(this,"space",true,false,true);this.getAudioContext_();var tuna=new Tuna(this.audioContext_);this.delay=new tuna["Delay"]({feedback:0,delayTime:0,wetLevel:0,dryLevel:0,cutoff:20,bypass:0});this.chorus=new tuna["Chorus"]({rate:0.01,feedback:0.2,delay:0,bypass:0});this.currentPattern_="";this.maxPatternLength_=15};goog.inherits(ww.mode.SpaceMode,ww.mode.Core);
function pad(number,length){var str=""+number;while(str.length<length)str="0"+str;return str}
ww.mode.SpaceMode.prototype.playProcessedAudio=function(filename,filter){if(!this.wantsAudio_)return;var url="../sounds/"+this.name_+"/"+filename;this.log('Requested sound "'+filename+'" from "'+url+'"');var audioContext=this.audioContext_;var self=this;this.getSoundBufferFromURL_(url,function(buffer){var source=audioContext["createBufferSource"]();source["buffer"]=buffer;source["connect"](filter["input"]);filter["connect"](audioContext["destination"]);source["noteOn"](0)})};
ww.mode.SpaceMode.prototype.activateI=function(){this.iClicked=true;if(this.iMultiplier<10)this.iMultiplier+=2};ww.mode.SpaceMode.prototype.activateO=function(){this.oClicked=true;if(this.oMultiplier<10)this.oMultiplier+=2};
ww.mode.SpaceMode.prototype.init=function(){goog.base(this,"init");this.getPaperCanvas_();this.deltaModifier=0;this.tempFloat=[];this.i=0;this.screenCenterX=this.width_/2;this.screenCenterY=this.height_/2;this.mouseX=this.screenCenterX;this.mouseY=this.screenCenterY;this.lastClick=new paper["Point"](this.screenCenterX,this.screenCenterY);this.world=this.getPhysicsWorld_();this.world["viscosity"]=0;for(this.i=0;this.i<200;this.i++){this.tempFloat=ww.util.floatComplexGaussianRandom();this.world["particles"].push(new Particle(this.tempFloat[0]*
this.width_,this.tempFloat[1]*this.height_));this.world["particles"][this.i]["setRadius"](Math.random(this.width_*0.0277778));this.world["particles"][this.i]["vel"]["x"]=10;this.world["particles"][this.i]["vel"]["y"]=0}this.iClicked=false;this.iIncrement=true;this.iModifier=0;this.iMultiplier=1;var iWidth=this.width_*0.175;var iHeight=iWidth*2.12698413;var iX=this.screenCenterX-iWidth*1.5;var iY=this.screenCenterY-iHeight/2;var iTopLeft=new paper["Point"](iX,iY);var iSize=new paper["Size"](iWidth,
iHeight);this.letterI=new paper["Rectangle"](iTopLeft,iSize);this.paperI=new paper["Path"]["Rectangle"](this.letterI);this.paperI["fillColor"]="#11a860";this.iPointX=[];this.iPointY=[];for(this.i=0;this.i<this.paperI["segments"].length;this.i++){this.iPointX.push(this.paperI["segments"][this.i]["point"]["_x"]);this.iPointY.push(this.paperI["segments"][this.i]["point"]["_y"])}this.oClicked=false;this.oIncrement=true;this.oModifier=0;this.oMultiplier=1;this.oRad=this.width_*0.1944444444;this.oScale=
1;var oX=this.screenCenterX+this.oRad;var oY=this.screenCenterY;var oCenter=new paper["Point"](oX,oY);this.paperO=new paper["Path"]["Circle"](oCenter,this.oRad);this.paperO["fillColor"]="#3777e2";this.oHandleInX=[];this.oHandleInY=[];this.oHandleOutX=[];this.oHandleOutY=[];this.oPointX=[];this.oPointY=[];for(this.i=0;this.i<this.paperO["segments"].length;this.i++){this.oHandleInX.push(this.paperO["segments"][this.i]["handleIn"]["_x"]);this.oHandleInY.push(this.paperO["segments"][this.i]["handleIn"]["_y"]);
this.oHandleOutX.push(this.paperO["segments"][this.i]["handleOut"]["_x"]);this.oHandleOutY.push(this.paperO["segments"][this.i]["handleOut"]["_y"])}for(this.i=0;this.i<this.paperO["segments"].length;this.i++){this.oPointX.push(this.paperO["segments"][this.i]["point"]["_x"]);this.oPointY.push(this.paperO["segments"][this.i]["point"]["_y"])}var slashStart=new paper["Point"](this.screenCenterX+this.oRad/8,this.screenCenterY-iHeight/2-iHeight*1.5*0.17475728);var slashEnd=new paper["Point"](iX+iWidth,
this.screenCenterY+iHeight/2+iHeight*1.5*0.17475728);this.paperSlash=new paper["Path"];this.paperSlash["strokeWidth"]=this.width_*0.01388889;this.paperSlash["strokeColor"]="#ebebeb";this.paperSlash["add"](slashStart,slashEnd)};
ww.mode.SpaceMode.prototype.didFocus=function(){goog.base(this,"didFocus");this.$canvas_=$("#space-canvas");this.canvas_=this.$canvas_[0];this.canvas_.width=this.width_;this.canvas_.height=this.height_;this.ctx_=this.canvas_.getContext("2d");var self=this;var evt=Modernizr["touch"]?"touchmove":"mousemove";var tempPoint;var tool=new paper["Tool"];tool["onMouseDown"]=function(event){self.lastClick=event["point"];if(self.paperO["hitTest"](event["point"]))self.activateO();if(self.paperI["hitTest"](event["point"]))self.activateI()};
$(canvas).bind(evt,function(e){e.preventDefault();e.stopPropagation();self.mouseX=e.pageX;self.mouseY=e.pageY})};ww.mode.SpaceMode.prototype.didUnfocus=function(){goog.base(this,"didUnfocus");var canvas=this.getPaperCanvas_();var evt=Modernizr["touch"]?"touchmove":"mousemove";$(canvas).unbind(evt)};
ww.mode.SpaceMode.prototype.stepPhysics=function(delta){goog.base(this,"stepPhysics",delta);for(this.i=0;this.i<this.world["particles"].length;this.i++){this.world["particles"][this.i]["pos"]["x"]+=1+this.screenCenterX-this.mouseX;this.world["particles"][this.i]["pos"]["y"]+=this.screenCenterY-this.mouseY}};
ww.mode.SpaceMode.prototype.onFrame=function(delta){goog.base(this,"onFrame",delta);console.log("frame");if(!this.canvas_)return;this.ctx_.clearRect(0,0,this.canvas_.width+1,this.canvas_.height+1);this.ctx_.fillStyle="#fff";this.ctx_.beginPath();for(this.i=0;this.i<this.world["particles"].length;this.i++){this.ctx_.arc(this.world["particles"][this.i]["pos"]["x"],this.world["particles"][this.i]["pos"]["y"],this.world["particles"][this.i]["radius"],0,Math.PI*2);console.log(this.world["particles"][this.i])}this.ctx_.fill()};goog.require("ww.mode.Core");goog.provide("ww.mode.PinataMode");ww.mode.PinataMode=function(){goog.base(this,"pinata",true,true,false)};goog.inherits(ww.mode.PinataMode,ww.mode.Core);
ww.mode.PinataMode.prototype.init=function(){goog.base(this,"init");this.COLORS_=["#EB475A","#E05A91","#925898","#E96641","#19A281","#FAD14A"];this.NUM_COLORS=this.COLORS_.length;this.prefix=Modernizr["prefixed"]("transform");var self=this;this.centerX=window.innerWidth/2;this.centerY=window.innerHeight/2;this.scale=window.innerWidth/30;this.getPaperCanvas_();if(this.active&&this.active.length){var temp;for(var i=0,l=this.active.length;i<l;i++){temp=this.active.pop();temp["fillColor"]="rgba(255,255,255,0.01)";
temp["point"]=new paper["Point"](this.centerX,this.centerY);temp["position"]=temp["point"];this.deactive.push(temp)}}else{this.deactive=this.prepopulate(200);this.active=[]}this.pinata=$("#pinata");this.pinata.css("opacity","1");this.hitCount=0;this.maxHit=10};ww.mode.PinataMode.prototype.didFocus=function(){goog.base(this,"didFocus");var self=this;self.pinata.bind("tap.pinata",function(){self.popBalls_()})};ww.mode.PinataMode.prototype.didUnfocus=function(){goog.base(this,"didUnfocus");this.pinata.unbind("tap.pinata")};
ww.mode.PinataMode.prototype.onResize=function(redraw){goog.base(this,"onResize",redraw);this.centerX=window.innerWidth/2;this.centerY=window.innerHeight/2;this.scale=window.innerWidth/30};
ww.mode.PinataMode.prototype.onFrame=function(delta){goog.base(this,"onFrame",delta);var length=this.active.length,size=paper["view"]["size"],ball,pre;for(var i=0;i<length;i++){ball=this.active[i];ball["vector"]["y"]+=ball["gravity"];ball["vector"]["x"]*=0.99;pre=this.utilAdd_(ball["point"],ball["vector"]);if(pre["x"]<ball["radius"]||pre["x"]>size["width"]-ball["radius"])ball["vector"]["x"]*=-1*ball["dampen"];if(pre["y"]<ball["radius"]||pre["y"]>size["height"]-ball["radius"]){if(Math.abs(ball["vector"]["x"])<
3){ball["vector"]=paper["Point"]["random"]();ball["vector"]=this.utilAdd_(ball["vector"],[-0.5,0]);ball["vector"]=this.utilMultiply_(ball["vector"],[50,100])}ball["vector"]["y"]*=ball["bounce"]}var ballAndVect=this.utilAdd_(ball["point"],ball["vector"]);var max=paper["Point"]["max"](ball["radius"],ballAndVect);ball["point"]=paper["Point"]["min"](max,size["width"]-ball["radius"]);ball["position"]=ball["point"];ball["rotate"](ball["vector"]["x"]/2)}};
ww.mode.PinataMode.prototype.utilAdd_=function(v1,v2){var result={};result["x"]=(v1["x"]||v1[0])+(v2["x"]||v2[0]);result["y"]=(v1["y"]||v1[1])+(v2["y"]||v2[1]);return result};ww.mode.PinataMode.prototype.utilMultiply_=function(v1,v2){var result={};result["x"]=(v1["x"]||v1[0])*(v2["x"]||v2[0]);result["y"]=(v1["y"]||v1[1])*(v2["y"]||v2[1]);return result};
ww.mode.PinataMode.prototype.prepopulate_=function(max){var balls=[];for(var i=0;i<max;i++){point=new paper["Point"](this.centerX,this.centerY);radius=this.scale*Math.random()+10;ball=new paper["Path"]["Circle"](point,radius);ball["point"]=point;ball["fillColor"]="rgba(255,255,255,0.01)";ball["vector"]=paper["Point"]["random"]();ball["vector"]=this.utilAdd_(ball["vector"],[-0.5,0]);ball["vector"]=this.utilMultiply_(ball["vector"],[50,100]);ball["dampen"]=0.4;ball["gravity"]=3;ball["bounce"]=-0.6;
ball["radius"]=radius;balls.push(ball)}return balls};
ww.mode.PinataMode.prototype.popBalls_=function(){var ball,point,radius,toPop,self=this;this.playSound("whack.mp3");if(this.hitCount<this.maxHit){this.hitCount++;toPop=Math.min(this.deactive.length,~~Random(1,5)*this.hitCount);this.log("hit #"+this.hitCount+". adding "+toPop+" more balls.");for(var i=0;i<toPop;i++){ball=this.deactive.pop();ball["fillColor"]=this.COLORS_[~~Random(0,this.NUM_COLORS)];this.active.push(ball)}var deg=~~Random(10,45);var dir=this.hitCount%2===0?-1:1;var duration=150;var wiggleOne=
(new TWEEN["Tween"]({"deg":0}))["to"]({"deg":dir*deg},duration)["onUpdate"](function(){self.pinata[0].style[self.prefix]="rotate("+this["deg"]+"deg)"});var wiggleTwo=(new TWEEN["Tween"]({"deg":dir*deg}))["to"]({"deg":-1*dir*deg},duration)["delay"](duration)["onUpdate"](function(){self.pinata[0].style[self.prefix]="rotate("+this["deg"]+"deg)"});var wiggleBack=(new TWEEN["Tween"]({"deg":-1*dir*deg}))["to"]({"deg":0},duration)["delay"](duration*2)["onUpdate"](function(){self.pinata[0].style[self.prefix]=
"rotate("+this["deg"]+"deg)"});self.addTween(wiggleOne);self.addTween(wiggleTwo);self.addTween(wiggleBack)}else this.log("reached max hits. pinata game over. "+this.deactive.length+" balls remaining.")};goog.require("ww.mode.Core");goog.provide("ww.mode.PongMode");var TWOPI=Math.PI*2;ww.mode.PongMode=function(){this.startBallSpeed_=this.ballSpeed_=250;this.maxBallSpeed_=800;this.startBallRadius_=this.ballRadius_=30;this.minBallRadius_=10;this.paddleX_=40;this.paddleY_=80;this.paddleWidth_=40;this.paddleHeight_=160;this["topWallOpacity_"]=0;this["rightWallOpacity_"]=0;this["bottomWallOpacity_"]=0;goog.base(this,"pong",true,true,true)};goog.inherits(ww.mode.PongMode,ww.mode.Core);
ww.mode.PongMode.prototype.init=function(){goog.base(this,"init");var world=this.getPhysicsWorld_();world["viscosity"]=0;this.ball_=this.ball_||new Particle;world["particles"].push(this.ball_);this.screenCenterX=this.width_/2;this.screenCenterY=this.height_/2;this.mouseX_=this.screenCenterX;this.mouseY_=this.screenCenterY;this.paddleY_=this.mouseY_-this.paddleHeight_/2;this.resetGame_()};
ww.mode.PongMode.prototype.resetGame_=function(){this.setScore_(0);this["topWallOpacity_"]=0;this["rightWallOpacity_"]=0;this["bottomWallOpacity_"]=0;this.ballRadius_=this.startBallRadius_;this.ballSpeed_=this.startBallSpeed_;this.startXBall_=this.screenCenterX+this.width_/4;this.ball_["setRadius"](this.ballRadius_);this.ball_["pos"]["x"]=this.startXBall_;this.ball_["pos"]["y"]=this.ballRadius_;this.ball_["vel"]["x"]=-this.ballSpeed_;this.ball_["vel"]["y"]=this.ballSpeed_};
ww.mode.PongMode.prototype.onResize=function(redraw){goog.base(this,"onResize",false);if(this.canvas_){this.canvas_.width=this.width_;this.canvas_.height=this.height_}if(redraw)this.redraw()};
ww.mode.PongMode.prototype.didFocus=function(){goog.base(this,"didFocus");this.$score_=$("#score");this.$canvas_=$("#pong-canvas");this.canvas_=this.$canvas_[0];this.canvas_.width=this.width_;this.canvas_.height=this.height_;this.ctx_=this.canvas_.getContext("2d");var self=this;var evt=Modernizr["touch"]?"touchmove":"mousemove";this.$canvas_.bind(evt+".pong",function(e){e.preventDefault();e.stopPropagation();self.mouseX_=e.pageX;self.mouseY_=e.pageY})};
ww.mode.PongMode.prototype.didUnfocus=function(){goog.base(this,"didUnfocus");var evt=Modernizr["touch"]?"touchmove":"mousemove";this.$canvas_.unbind(evt+".pong")};
ww.mode.PongMode.prototype.hitWall_=function(wall){this.playSound("1.wav");var key=wall+"Opacity_";var inFromParams={};inFromParams[key]=this[key];var inToParams={};inToParams[key]=1;var self=this;var fadeInTween=new TWEEN["Tween"](inFromParams);fadeInTween["to"](inToParams,200);fadeInTween["onUpdate"](function(){self[key]=this[key]});this.addTween(fadeInTween)};
ww.mode.PongMode.prototype.hitPaddle_=function(){this.playSound("2.wav");var newScore=this.score_+1;if(this["topWallOpacity_"]>0&&this["rightWallOpacity_"]>0&&this["bottomWallOpacity_"]>0)newScore+=3;this.setScore_(newScore);var self=this;var fadeOutTween=new TWEEN["Tween"]({"topWallOpacity":this["topWallOpacity_"],"rightWallOpacity":this["rightWallOpacity_"],"bottomWallOpacity":this["bottomWallOpacity_"]});fadeOutTween["to"]({"topWallOpacity":0,"rightWallOpacity":0,"bottomWallOpacity":0},200);fadeOutTween["onUpdate"](function(){self["topWallOpacity_"]=
this["topWallOpacity"];self["rightWallOpacity_"]=this["rightWallOpacity"];self["bottomWallOpacity_"]=this["bottomWallOpacity"]});this.addTween(fadeOutTween)};ww.mode.PongMode.prototype.gameOver_=function(){this.log("You Lose");this.showReload()};ww.mode.PongMode.prototype.setScore_=function(val){this.score_=val;if(this.$score_&&this.$score_.length)this.$score_.text(this.score_)};
ww.mode.PongMode.prototype.reflectBall_=function(){if(this.ball_["pos"]["x"]<=this.ball_["radius"])this.gameOver_();var self;if(this.ball_["vel"]["x"]>0&&this.ball_["pos"]["x"]>=this.width_-this.ball_["radius"]){this.ball_["vel"]["x"]*=-1;this.hitWall_("rightWall")}if(this.ball_["vel"]["y"]>0&&this.ball_["pos"]["y"]>=this.height_-this.ball_["radius"]){this.ball_["vel"]["y"]*=-1;this.hitWall_("bottomWall")}if(this.ball_["vel"]["y"]<0&&this.ball_["pos"]["y"]<=this.ball_["radius"]){this.ball_["vel"]["y"]*=
-1;this.hitWall_("topWall")}var paddleTop=this.paddleY_-this.paddleHeight_/2;var paddleBottom=this.paddleY_+this.paddleHeight_/2;if(this.ball_["vel"]["x"]<0&&this.ball_["pos"]["x"]<=this.paddleX_+this.paddleWidth_/2+this.ball_["radius"]&&this.ball_["pos"]["y"]>=paddleTop&&this.ball_["pos"]["y"]<=paddleBottom){this.ball_["vel"]["x"]*=-1;var mag=this.ball_["vel"]["mag"]();if(!this.norm_)this.norm_=this.ball_["vel"]["clone"]();else this.norm_["copy"](this.ball_["vel"]);this.norm_["norm"]();this.changeVec_=
this.changeVec_||new Vector;var diff=(this.ball_["pos"]["y"]-this.paddleY_)/(this.paddleHeight_/2);this.changeVec_["set"](0,diff);this.norm_["add"](this.changeVec_);this.norm_["norm"]();this.norm_["scale"](mag);this.ball_["vel"]["copy"](this.norm_);this.hitPaddle_()}};
ww.mode.PongMode.prototype.stepPhysics=function(delta){goog.base(this,"stepPhysics",delta);var currentPaddleY=this.paddleY_;var targetPaddleY=this.mouseY_;if(targetPaddleY<this.paddleHeight_/2)targetPaddleY=this.paddleHeight_/2;else if(targetPaddleY>this.height_-this.paddleHeight_/2)targetPaddleY=this.height_-this.paddleHeight_/2;var newPaddleY=currentPaddleY+(targetPaddleY-currentPaddleY)*0.5*delta*10;this.paddleY_=newPaddleY;if(this.ball_["vel"]["x"]>0){if(this.ballRadius_>=this.minBallRadius_){this.ballRadius_*=
0.9995;this.ball_["setRadius"](this.ballRadius_)}if(this.ballSpeed_<=this.maxBallSpeed_){this.ballSpeed_*=1.001;this.ball_["vel"]["x"]=this.ball_["vel"]["x"]<0?-this.ballSpeed_:this.ballSpeed_;this.ball_["vel"]["y"]=this.ball_["vel"]["y"]<0?-this.ballSpeed_:this.ballSpeed_}}this.reflectBall_()};
ww.mode.PongMode.prototype.onFrame=function(delta){goog.base(this,"onFrame",delta);if(!this.canvas_)return;this.ctx_.clearRect(0,0,this.canvas_.width+1,this.canvas_.height+1);this.ctx_.fillStyle="#e0493e";this.ctx_.beginPath();this.ctx_.arc(this.ball_["pos"]["x"],this.ball_["pos"]["y"],this.ball_["radius"],0,TWOPI);this.ctx_.fill();this.ctx_.fillStyle="#d0d0d0";this.ctx_.fillRect(this.paddleX_-this.paddleWidth_/2,this.paddleY_-this.paddleHeight_/2,this.paddleWidth_,this.paddleHeight_);this.ctx_.fillStyle=
"#f3cdca";if(this["topWallOpacity_"]>0){this.ctx_.save();this.ctx_.globalAlpha=this["topWallOpacity_"];this.ctx_.fillRect(0,0,this.width_,10);this.ctx_.restore()}if(this["bottomWallOpacity_"]>0){this.ctx_.save();this.ctx_.globalAlpha=this["bottomWallOpacity_"];this.ctx_.fillRect(0,this.height_-10,this.width_,10);this.ctx_.restore()}if(this["rightWallOpacity_"]>0){this.ctx_.save();this.ctx_.globalAlpha=this["rightWallOpacity_"];this.ctx_.fillRect(this.width_-10,0,10,this.height_);this.ctx_.restore()}};goog.provide("ww.mode");goog.provide("ww.mode.modes");goog.require("ww.mode.BaconMode");goog.require("ww.mode.CatMode");goog.require("ww.mode.ExplodeMode");goog.require("ww.mode.HomeMode");goog.require("ww.mode.PinataMode");goog.require("ww.mode.PongMode");goog.require("ww.mode.SimoneMode");goog.require("ww.mode.SpaceMode");var DEBUG_MODE=false;ww.mode.modes={};ww.mode.register=function(name,klass,pattern,len){ww.mode.modes[name]={klass:klass,pattern:pattern,len:len}};ww.mode.findModeByName=function(name){return ww.mode.modes[name]};
ww.mode.register("bacon",ww.mode.BaconMode,7,4);ww.mode.register("cat",ww.mode.CatMode,2,4);ww.mode.register("explode",ww.mode.ExplodeMode,5,4);ww.mode.register("home",ww.mode.HomeMode,null);ww.mode.register("pinata",ww.mode.PinataMode,6,4);ww.mode.register("pong",ww.mode.PongMode,4,4);ww.mode.register("simone",ww.mode.SimoneMode,8,4);ww.mode.register("space",ww.mode.SpaceMode,3,4);
jQuery(function(){var parts=window.location.href.split("/");var page=parts[parts.length-1];var scriptName=page.replace("_test.html",".html").replace(/\.html(.*)/,"");var pair=ww.mode.findModeByName(scriptName);var klass=pair.klass;var controller=new klass});
